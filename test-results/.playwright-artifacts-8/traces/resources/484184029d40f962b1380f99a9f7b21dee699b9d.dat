globalThis.jotaiAtomCache = globalThis.jotaiAtomCache || {
  cache: /* @__PURE__ */ new Map(),
  get(name, inst) {
    if (this.cache.has(name)) {
      return this.cache.get(name);
    }
    this.cache.set(name, inst);
    return inst;
  }
};
import { PATH_ATTIVAZIONI, PATH_CAMBIO_PRODOTTO, PATH_SWITCH_RESID, PATH_SWITCH_VOLTURA, PATH_VOLTURA } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/util/src/index.ts";
import { atom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/node_modules/.vite/apps/naj/deps/jotai.js?v=0189a8d1";
import { getQuerystringFromAnswersGas, getQuerystringFromAnswersPower } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/activation-questions.tsx";
import { gasAtom, offerIdAtom, operativeModeAtom, powerAtom, powerRateAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/atoms.ts";
import { billType$, paymentType$ } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/paymentType$.ts";
import { BillMapper, CommodityMapper, PaymentMapper, PowerRateMapper } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/qs-mappers.ts";
import { OperativeMode } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/types.ts";
import { tsActivationGas$, tsActivationPower$ } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/troubleshooting.ts";
import { getPassTroughQs } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/state-url.ts";
const baseUrlMap = {
  [OperativeMode.SWITCH_IN]: PATH_SWITCH_RESID,
  [OperativeMode.SWITCH_IN_TRANSFER]: PATH_SWITCH_VOLTURA,
  [OperativeMode.NEW_ACTIVATION]: PATH_ATTIVAZIONI,
  [OperativeMode.CHANGE_OFFER]: PATH_CAMBIO_PRODOTTO,
  [OperativeMode.TRANSFER]: PATH_VOLTURA
  // []: 'attiva-offerta-small',
  // []: 'nds',
};
export const weborderUrlAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/weborderUrlAtom", atom(async (get) => {
  const operativeMode = get(operativeModeAtom);
  if (!operativeMode) {
    throw Error("OperativeMode is NOT_SELECTED");
  }
  const baseUrl = baseUrlMap[operativeMode];
  const urlSearchParams = searchParamsMap[operativeMode];
  if (!baseUrl || !urlSearchParams) {
    return ``;
  }
  const qs = await get(urlSearchParams);
  return `${baseUrl}/index.html?${qs}`;
}));
weborderUrlAtom.debugLabel = "weborderUrlAtom";
const switchInParamsAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/switchInParamsAtom", atom(async (get) => {
  return new URLSearchParams({
    codiceProdotto: get(getCodiceProdottoDualAtom),
    codiceOfferta: get(codiceOffertaAtom),
    commodity: get(commodityAtom),
    codiceCanale: get(codiceCanaleAtom),
    codiceConvenzione: get(codiceCanaleAtom),
    codiceTpCanale: get(codiceTpCanaleAtom),
    opzione: get(opzioneAtom),
    "bill-type": await get(billTypeAtom),
    "direct-debit": await get(directDebitAtom),
    ...getPassTroughQs()
  });
}));
switchInParamsAtom.debugLabel = "switchInParamsAtom";
const switchInTransferParamsAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/switchInTransferParamsAtom", atom(async (get) => {
  return new URLSearchParams({
    codiceProdotto: get(codiceOffertaAtom),
    codiceOfferta: get(codiceOffertaAtom),
    commodity: get(commodityAtom),
    codiceCanale: get(codiceCanaleAtom),
    codiceConvenzione: get(codiceCanaleAtom),
    codiceTpCanale: get(codiceTpCanaleAtom),
    opzione: get(opzioneAtom),
    "bill-type": await get(billTypeAtom),
    "direct-debit": await get(directDebitAtom),
    ...getPassTroughQs()
  });
}));
switchInTransferParamsAtom.debugLabel = "switchInTransferParamsAtom";
const newActivationParamsAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/newActivationParamsAtom", atom(async (get) => {
  const power = get(powerAtom);
  const activationPower = get(tsActivationPower$);
  const activationGas = get(tsActivationGas$);
  const urlSearchParams = power ? getQuerystringFromAnswersPower(activationPower) : getQuerystringFromAnswersGas(activationGas);
  urlSearchParams.set("codiceProdotto", get(codiceOffertaAtom));
  urlSearchParams.set("codiceOfferta", get(codiceOffertaAtom));
  urlSearchParams.set("commodity", get(commodityAtom));
  urlSearchParams.set("codiceCanale", get(codiceCanaleAtom) + "A");
  urlSearchParams.set("codiceConvenzione", get(codiceCanaleAtom) + "A");
  urlSearchParams.set("codiceTpCanale", "AT" + get(codiceTpCanaleAtom));
  urlSearchParams.set("opzione", get(opzioneAtom));
  urlSearchParams.set("bill-type", await get(billTypeAtom));
  urlSearchParams.set("direct-debit", await get(directDebitAtom));
  for (const [k, v] of Object.entries(getPassTroughQs())) {
    urlSearchParams.set(k, v);
  }
  return urlSearchParams;
}));
newActivationParamsAtom.debugLabel = "newActivationParamsAtom";
const changeOfferParamsAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/changeOfferParamsAtom", atom(async (get) => {
  return new URLSearchParams({
    codiceProdotto: get(codiceOffertaAtom),
    codiceOfferta: get(codiceOffertaAtom),
    commodity: get(commodityAtom),
    codiceCanale: get(codiceCanaleAtom),
    codiceConvenzione: get(codiceCanaleAtom),
    codiceTpCanale: get(codiceTpCanaleAtom),
    opzione: get(opzioneAtom),
    ...getPassTroughQs()
  });
}));
changeOfferParamsAtom.debugLabel = "changeOfferParamsAtom";
const getTransferParamsAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/getTransferParamsAtom", atom(async (get) => {
  return new URLSearchParams({
    codiceProdotto: get(codiceOffertaAtom),
    codiceOfferta: get(codiceOffertaAtom),
    commodity: get(commodityAtom),
    codiceCanale: get(codiceCanaleAtom) + "V",
    codiceConvenzione: get(codiceCanaleAtom) + "V",
    codiceTpCanale: "VL" + get(codiceTpCanaleAtom),
    opzione: get(opzioneAtom),
    "bill-type": await get(billTypeAtom),
    "direct-debit": await get(directDebitAtom),
    settore: "resid",
    ...getPassTroughQs()
  });
}));
getTransferParamsAtom.debugLabel = "getTransferParamsAtom";
const searchParamsMap = {
  [OperativeMode.SWITCH_IN]: switchInParamsAtom,
  [OperativeMode.SWITCH_IN_TRANSFER]: switchInTransferParamsAtom,
  [OperativeMode.NEW_ACTIVATION]: newActivationParamsAtom,
  [OperativeMode.CHANGE_OFFER]: changeOfferParamsAtom,
  [OperativeMode.TRANSFER]: getTransferParamsAtom
};
const getCodiceProdottoDualAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/getCodiceProdottoDualAtom", atom((get) => {
  const offer = get(offerIdAtom);
  return offer.code;
}));
getCodiceProdottoDualAtom.debugLabel = "getCodiceProdottoDualAtom";
const codiceOffertaAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/codiceOffertaAtom", atom((get) => {
  const {
    code
  } = get(offerIdAtom);
  const power = get(powerAtom);
  const gas = get(gasAtom);
  if (!power) {
    return code.replace(/_L[A-Z]+-/, "_");
  }
  if (!gas) {
    return code.replace(/-G[A-Z]+/, "");
  }
  return code;
}));
codiceOffertaAtom.debugLabel = "codiceOffertaAtom";
const codiceCanaleAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/codiceCanaleAtom", atom((get) => {
  const offer = get(offerIdAtom);
  return offer.channel;
}));
codiceCanaleAtom.debugLabel = "codiceCanaleAtom";
const codiceTpCanaleAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/codiceTpCanaleAtom", atom((get) => {
  const offer = get(offerIdAtom);
  return offer.touchpoint;
}));
codiceTpCanaleAtom.debugLabel = "codiceTpCanaleAtom";
const commodityAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/commodityAtom", atom((get) => {
  const power = !!get(powerAtom);
  const gas = !!get(gasAtom);
  return new CommodityMapper({
    power,
    gas
  }).qs;
}));
commodityAtom.debugLabel = "commodityAtom";
const opzioneAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/opzioneAtom", atom((get) => {
  const powerRate = get(powerRateAtom);
  return new PowerRateMapper(powerRate).qs;
}));
opzioneAtom.debugLabel = "opzioneAtom";
const billTypeAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/billTypeAtom", atom(async (get) => {
  const bill = await get(billType$);
  return new BillMapper(bill).qs;
}));
billTypeAtom.debugLabel = "billTypeAtom";
const directDebitAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/directDebitAtom", atom(async (get) => {
  const payment = await get(paymentType$);
  return new PaymentMapper(payment).qs;
}));
directDebitAtom.debugLabel = "directDebitAtom";
export const troubleshootingAttivazioniAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\troubleshooting\\web-order.ts/troubleshootingAttivazioniAtom", atom(async (get) => {
  const power = get(powerAtom);
  const gas = get(gasAtom);
  const offer = get(offerIdAtom);
  if (power && gas) throw Error("DUAL");
  if (!power && !gas) throw Error("NO GAS OR POWER");
  const path = getUrlAttivazioniPortale(offer.code, power, gas);
  const urlSearchParams = new URLSearchParams({
    codiceProdotto: get(getCodiceProdottoDualAtom),
    codiceOfferta: get(codiceOffertaAtom),
    commodity: get(commodityAtom),
    codiceCanale: get(codiceCanaleAtom),
    codiceConvenzione: get(codiceCanaleAtom),
    codiceTpCanale: get(codiceTpCanaleAtom),
    opzione: get(opzioneAtom),
    "bill-type": await get(billTypeAtom),
    "direct-debit": await get(directDebitAtom),
    coupon: "undefined",
    // dip: 'true'
    ...getPassTroughQs()
  });
  return path + "?" + urlSearchParams.toString();
}));
troubleshootingAttivazioniAtom.debugLabel = "troubleshootingAttivazioniAtom";
const offerAttivazioni = {
  "BASE_LXNOIV-GXNOIV": "per-noi",
  "BASE_LFIXATIV-GFIXATIV": "fixa-time",
  "BASE_LINSV-GINSV": "energia-sempre-piu",
  "BASE_LTCASAV-GTCASAV": "trend-casa"
};
function getUrlAttivazioniPortale(offerCode, power, gas) {
  let s = "/offerta/casa/nuova-fornitura/";
  const element = offerAttivazioni[offerCode];
  if (element == null) {
    throw Error("OFFER UNKNOWN");
  }
  s += element;
  if (power) s += "-luce";
  if (gas) s += "-gas";
  return s;
}

//# sourceMappingURL=data:application/json;base64,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LE1BQUlkLElBQUtjLE1BQUs7QUFFZCxTQUFPQTtBQUNUIiwibmFtZXMiOlsiUEFUSF9BVFRJVkFaSU9OSSIsIlBBVEhfQ0FNQklPX1BST0RPVFRPIiwiUEFUSF9TV0lUQ0hfUkVTSUQiLCJQQVRIX1NXSVRDSF9WT0xUVVJBIiwiUEFUSF9WT0xUVVJBIiwiYXRvbSIsImdldFF1ZXJ5c3RyaW5nRnJvbUFuc3dlcnNHYXMiLCJnZXRRdWVyeXN0cmluZ0Zyb21BbnN3ZXJzUG93ZXIiLCJnYXNBdG9tIiwib2ZmZXJJZEF0b20iLCJvcGVyYXRpdmVNb2RlQXRvbSIsInBvd2VyQXRvbSIsInBvd2VyUmF0ZUF0b20iLCJiaWxsVHlwZSQiLCJwYXltZW50VHlwZSQiLCJCaWxsTWFwcGVyIiwiQ29tbW9kaXR5TWFwcGVyIiwiUGF5bWVudE1hcHBlciIsIlBvd2VyUmF0ZU1hcHBlciIsIk9wZXJhdGl2ZU1vZGUiLCJ0c0FjdGl2YXRpb25HYXMkIiwidHNBY3RpdmF0aW9uUG93ZXIkIiwiZ2V0UGFzc1Ryb3VnaFFzIiwiYmFzZVVybE1hcCIsIlNXSVRDSF9JTiIsIlNXSVRDSF9JTl9UUkFOU0ZFUiIsIk5FV19BQ1RJVkFUSU9OIiwiQ0hBTkdFX09GRkVSIiwiVFJBTlNGRVIiLCJ3ZWJvcmRlclVybEF0b20iLCJnbG9iYWxUaGlzIiwiam90YWlBdG9tQ2FjaGUiLCJnZXQiLCJvcGVyYXRpdmVNb2RlIiwiRXJyb3IiLCJiYXNlVXJsIiwidXJsU2VhcmNoUGFyYW1zIiwic2VhcmNoUGFyYW1zTWFwIiwicXMiLCJkZWJ1Z0xhYmVsIiwic3dpdGNoSW5QYXJhbXNBdG9tIiwiVVJMU2VhcmNoUGFyYW1zIiwiY29kaWNlUHJvZG90dG8iLCJnZXRDb2RpY2VQcm9kb3R0b0R1YWxBdG9tIiwiY29kaWNlT2ZmZXJ0YSIsImNvZGljZU9mZmVydGFBdG9tIiwiY29tbW9kaXR5IiwiY29tbW9kaXR5QXRvbSIsImNvZGljZUNhbmFsZSIsImNvZGljZUNhbmFsZUF0b20iLCJjb2RpY2VDb252ZW56aW9uZSIsImNvZGljZVRwQ2FuYWxlIiwiY29kaWNlVHBDYW5hbGVBdG9tIiwib3B6aW9uZSIsIm9wemlvbmVBdG9tIiwiYmlsbFR5cGVBdG9tIiwiZGlyZWN0RGViaXRBdG9tIiwic3dpdGNoSW5UcmFuc2ZlclBhcmFtc0F0b20iLCJuZXdBY3RpdmF0aW9uUGFyYW1zQXRvbSIsInBvd2VyIiwiYWN0aXZhdGlvblBvd2VyIiwiYWN0aXZhdGlvbkdhcyIsInNldCIsImsiLCJ2IiwiT2JqZWN0IiwiZW50cmllcyIsImNoYW5nZU9mZmVyUGFyYW1zQXRvbSIsImdldFRyYW5zZmVyUGFyYW1zQXRvbSIsInNldHRvcmUiLCJvZmZlciIsImNvZGUiLCJnYXMiLCJyZXBsYWNlIiwiY2hhbm5lbCIsInRvdWNocG9pbnQiLCJwb3dlclJhdGUiLCJiaWxsIiwicGF5bWVudCIsInRyb3VibGVzaG9vdGluZ0F0dGl2YXppb25pQXRvbSIsInBhdGgiLCJnZXRVcmxBdHRpdmF6aW9uaVBvcnRhbGUiLCJjb3Vwb24iLCJ0b1N0cmluZyIsIm9mZmVyQXR0aXZhemlvbmkiLCJvZmZlckNvZGUiLCJzIiwiZWxlbWVudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJ3ZWItb3JkZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBQQVRIX0FUVElWQVpJT05JLFxyXG4gIFBBVEhfQ0FNQklPX1BST0RPVFRPLFxyXG4gIFBBVEhfU1dJVENIX1JFU0lELFxyXG4gIFBBVEhfU1dJVENIX1ZPTFRVUkEsXHJcbiAgUEFUSF9WT0xUVVJBLFxyXG59IGZyb20gJ0BuYWotd28vdXRpbCc7XHJcbmltcG9ydCB7IEF0b20sIGF0b20gfSBmcm9tICdqb3RhaSc7XHJcbmltcG9ydCB7XHJcbiAgZ2V0UXVlcnlzdHJpbmdGcm9tQW5zd2Vyc0dhcyxcclxuICBnZXRRdWVyeXN0cmluZ0Zyb21BbnN3ZXJzUG93ZXIsXHJcbn0gZnJvbSAnLi9hY3RpdmF0aW9uLXF1ZXN0aW9ucyc7XHJcbmltcG9ydCB7XHJcbiAgZ2FzQXRvbSxcclxuICBvZmZlcklkQXRvbSxcclxuICBvcGVyYXRpdmVNb2RlQXRvbSxcclxuICBwb3dlckF0b20sXHJcbiAgcG93ZXJSYXRlQXRvbSxcclxufSBmcm9tICcuL2F0b21zJztcclxuaW1wb3J0IHsgYmlsbFR5cGUkLCBwYXltZW50VHlwZSQgfSBmcm9tICcuL3BheW1lbnRUeXBlJCc7XHJcbmltcG9ydCB7XHJcbiAgQmlsbE1hcHBlcixcclxuICBDb21tb2RpdHlNYXBwZXIsXHJcbiAgUGF5bWVudE1hcHBlcixcclxuICBQb3dlclJhdGVNYXBwZXIsXHJcbn0gZnJvbSAnLi9xcy1tYXBwZXJzJztcclxuaW1wb3J0IHsgT3BlcmF0aXZlTW9kZSB9IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgeyB0c0FjdGl2YXRpb25HYXMkLCB0c0FjdGl2YXRpb25Qb3dlciQgfSBmcm9tICcuL3Ryb3VibGVzaG9vdGluZyc7XHJcbmltcG9ydCB7IGdldFBhc3NUcm91Z2hRcyB9IGZyb20gJy4vc3RhdGUtdXJsJztcclxuXHJcbmNvbnN0IGJhc2VVcmxNYXA6IFBhcnRpYWw8UmVjb3JkPE9wZXJhdGl2ZU1vZGUsIHN0cmluZz4+ID0ge1xyXG4gIFtPcGVyYXRpdmVNb2RlLlNXSVRDSF9JTl06IFBBVEhfU1dJVENIX1JFU0lELFxyXG4gIFtPcGVyYXRpdmVNb2RlLlNXSVRDSF9JTl9UUkFOU0ZFUl06IFBBVEhfU1dJVENIX1ZPTFRVUkEsXHJcbiAgW09wZXJhdGl2ZU1vZGUuTkVXX0FDVElWQVRJT05dOiBQQVRIX0FUVElWQVpJT05JLFxyXG4gIFtPcGVyYXRpdmVNb2RlLkNIQU5HRV9PRkZFUl06IFBBVEhfQ0FNQklPX1BST0RPVFRPLFxyXG4gIFtPcGVyYXRpdmVNb2RlLlRSQU5TRkVSXTogUEFUSF9WT0xUVVJBLFxyXG4gIC8vIFtdOiAnYXR0aXZhLW9mZmVydGEtc21hbGwnLFxyXG4gIC8vIFtdOiAnbmRzJyxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB3ZWJvcmRlclVybEF0b20gPSBhdG9tKGFzeW5jIChnZXQpID0+IHtcclxuICBjb25zdCBvcGVyYXRpdmVNb2RlID0gZ2V0KG9wZXJhdGl2ZU1vZGVBdG9tKTtcclxuXHJcbiAgaWYgKCFvcGVyYXRpdmVNb2RlKSB7XHJcbiAgICB0aHJvdyBFcnJvcignT3BlcmF0aXZlTW9kZSBpcyBOT1RfU0VMRUNURUQnKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGJhc2VVcmwgPSBiYXNlVXJsTWFwW29wZXJhdGl2ZU1vZGVdO1xyXG4gIGNvbnN0IHVybFNlYXJjaFBhcmFtcyA9IHNlYXJjaFBhcmFtc01hcFtvcGVyYXRpdmVNb2RlXTtcclxuXHJcbiAgaWYgKCFiYXNlVXJsIHx8ICF1cmxTZWFyY2hQYXJhbXMpIHtcclxuICAgIHJldHVybiBgYDtcclxuICB9XHJcblxyXG4gIGNvbnN0IHFzID0gYXdhaXQgZ2V0KHVybFNlYXJjaFBhcmFtcyk7XHJcbiAgcmV0dXJuIGAke2Jhc2VVcmx9L2luZGV4Lmh0bWw/JHtxc31gO1xyXG59KTtcclxuXHJcbmNvbnN0IHN3aXRjaEluUGFyYW1zQXRvbSA9IGF0b20oYXN5bmMgKGdldCkgPT4ge1xyXG4gIHJldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcclxuICAgIGNvZGljZVByb2RvdHRvOiBnZXQoZ2V0Q29kaWNlUHJvZG90dG9EdWFsQXRvbSksXHJcbiAgICBjb2RpY2VPZmZlcnRhOiBnZXQoY29kaWNlT2ZmZXJ0YUF0b20pLFxyXG4gICAgY29tbW9kaXR5OiBnZXQoY29tbW9kaXR5QXRvbSksXHJcbiAgICBjb2RpY2VDYW5hbGU6IGdldChjb2RpY2VDYW5hbGVBdG9tKSxcclxuICAgIGNvZGljZUNvbnZlbnppb25lOiBnZXQoY29kaWNlQ2FuYWxlQXRvbSksXHJcbiAgICBjb2RpY2VUcENhbmFsZTogZ2V0KGNvZGljZVRwQ2FuYWxlQXRvbSksXHJcbiAgICBvcHppb25lOiBnZXQob3B6aW9uZUF0b20pLFxyXG4gICAgJ2JpbGwtdHlwZSc6IGF3YWl0IGdldChiaWxsVHlwZUF0b20pLFxyXG4gICAgJ2RpcmVjdC1kZWJpdCc6IGF3YWl0IGdldChkaXJlY3REZWJpdEF0b20pLFxyXG4gICAgLi4uZ2V0UGFzc1Ryb3VnaFFzKCksXHJcbiAgfSk7XHJcbiAgLy8gVE9ETyBnZXN0aXJlIGwnYWJiaW5hdGEgYXNzaWN1cmF6aW9uaVxyXG59KTtcclxuXHJcbmNvbnN0IHN3aXRjaEluVHJhbnNmZXJQYXJhbXNBdG9tID0gYXRvbShhc3luYyAoZ2V0KSA9PiB7XHJcbiAgcmV0dXJuIG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xyXG4gICAgY29kaWNlUHJvZG90dG86IGdldChjb2RpY2VPZmZlcnRhQXRvbSksXHJcbiAgICBjb2RpY2VPZmZlcnRhOiBnZXQoY29kaWNlT2ZmZXJ0YUF0b20pLFxyXG4gICAgY29tbW9kaXR5OiBnZXQoY29tbW9kaXR5QXRvbSksXHJcbiAgICBjb2RpY2VDYW5hbGU6IGdldChjb2RpY2VDYW5hbGVBdG9tKSxcclxuICAgIGNvZGljZUNvbnZlbnppb25lOiBnZXQoY29kaWNlQ2FuYWxlQXRvbSksXHJcbiAgICBjb2RpY2VUcENhbmFsZTogZ2V0KGNvZGljZVRwQ2FuYWxlQXRvbSksXHJcbiAgICBvcHppb25lOiBnZXQob3B6aW9uZUF0b20pLFxyXG4gICAgJ2JpbGwtdHlwZSc6IGF3YWl0IGdldChiaWxsVHlwZUF0b20pLFxyXG4gICAgJ2RpcmVjdC1kZWJpdCc6IGF3YWl0IGdldChkaXJlY3REZWJpdEF0b20pLFxyXG4gICAgLi4uZ2V0UGFzc1Ryb3VnaFFzKCksXHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgbmV3QWN0aXZhdGlvblBhcmFtc0F0b20gPSBhdG9tKGFzeW5jIChnZXQpID0+IHtcclxuICBjb25zdCBwb3dlciA9IGdldChwb3dlckF0b20pO1xyXG4gIGNvbnN0IGFjdGl2YXRpb25Qb3dlciA9IGdldCh0c0FjdGl2YXRpb25Qb3dlciQpO1xyXG4gIGNvbnN0IGFjdGl2YXRpb25HYXMgPSBnZXQodHNBY3RpdmF0aW9uR2FzJCk7XHJcblxyXG4gIGNvbnN0IHVybFNlYXJjaFBhcmFtcyA9IHBvd2VyXHJcbiAgICA/IGdldFF1ZXJ5c3RyaW5nRnJvbUFuc3dlcnNQb3dlcihhY3RpdmF0aW9uUG93ZXIpXHJcbiAgICA6IGdldFF1ZXJ5c3RyaW5nRnJvbUFuc3dlcnNHYXMoYWN0aXZhdGlvbkdhcyk7XHJcblxyXG4gIHVybFNlYXJjaFBhcmFtcy5zZXQoJ2NvZGljZVByb2RvdHRvJywgZ2V0KGNvZGljZU9mZmVydGFBdG9tKSk7XHJcbiAgdXJsU2VhcmNoUGFyYW1zLnNldCgnY29kaWNlT2ZmZXJ0YScsIGdldChjb2RpY2VPZmZlcnRhQXRvbSkpO1xyXG4gIHVybFNlYXJjaFBhcmFtcy5zZXQoJ2NvbW1vZGl0eScsIGdldChjb21tb2RpdHlBdG9tKSk7XHJcbiAgdXJsU2VhcmNoUGFyYW1zLnNldCgnY29kaWNlQ2FuYWxlJywgZ2V0KGNvZGljZUNhbmFsZUF0b20pICsgJ0EnKTtcclxuICB1cmxTZWFyY2hQYXJhbXMuc2V0KCdjb2RpY2VDb252ZW56aW9uZScsIGdldChjb2RpY2VDYW5hbGVBdG9tKSArICdBJyk7XHJcbiAgdXJsU2VhcmNoUGFyYW1zLnNldCgnY29kaWNlVHBDYW5hbGUnLCAnQVQnICsgZ2V0KGNvZGljZVRwQ2FuYWxlQXRvbSkpO1xyXG4gIHVybFNlYXJjaFBhcmFtcy5zZXQoJ29wemlvbmUnLCBnZXQob3B6aW9uZUF0b20pKTtcclxuICB1cmxTZWFyY2hQYXJhbXMuc2V0KCdiaWxsLXR5cGUnLCBhd2FpdCBnZXQoYmlsbFR5cGVBdG9tKSk7XHJcbiAgdXJsU2VhcmNoUGFyYW1zLnNldCgnZGlyZWN0LWRlYml0JywgYXdhaXQgZ2V0KGRpcmVjdERlYml0QXRvbSkpO1xyXG5cclxuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhnZXRQYXNzVHJvdWdoUXMoKSkpIHtcclxuICAgIHVybFNlYXJjaFBhcmFtcy5zZXQoaywgdik7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdXJsU2VhcmNoUGFyYW1zO1xyXG59KTtcclxuXHJcbmNvbnN0IGNoYW5nZU9mZmVyUGFyYW1zQXRvbSA9IGF0b20oYXN5bmMgKGdldCkgPT4ge1xyXG4gIHJldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcclxuICAgIGNvZGljZVByb2RvdHRvOiBnZXQoY29kaWNlT2ZmZXJ0YUF0b20pLFxyXG4gICAgY29kaWNlT2ZmZXJ0YTogZ2V0KGNvZGljZU9mZmVydGFBdG9tKSxcclxuICAgIGNvbW1vZGl0eTogZ2V0KGNvbW1vZGl0eUF0b20pLFxyXG4gICAgY29kaWNlQ2FuYWxlOiBnZXQoY29kaWNlQ2FuYWxlQXRvbSksXHJcbiAgICBjb2RpY2VDb252ZW56aW9uZTogZ2V0KGNvZGljZUNhbmFsZUF0b20pLFxyXG4gICAgY29kaWNlVHBDYW5hbGU6IGdldChjb2RpY2VUcENhbmFsZUF0b20pLFxyXG4gICAgb3B6aW9uZTogZ2V0KG9wemlvbmVBdG9tKSxcclxuICAgIC4uLmdldFBhc3NUcm91Z2hRcygpLFxyXG4gIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IGdldFRyYW5zZmVyUGFyYW1zQXRvbSA9IGF0b20oYXN5bmMgKGdldCkgPT4ge1xyXG4gIHJldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcclxuICAgIGNvZGljZVByb2RvdHRvOiBnZXQoY29kaWNlT2ZmZXJ0YUF0b20pLFxyXG4gICAgY29kaWNlT2ZmZXJ0YTogZ2V0KGNvZGljZU9mZmVydGFBdG9tKSxcclxuICAgIGNvbW1vZGl0eTogZ2V0KGNvbW1vZGl0eUF0b20pLFxyXG4gICAgY29kaWNlQ2FuYWxlOiBnZXQoY29kaWNlQ2FuYWxlQXRvbSkgKyAnVicsXHJcbiAgICBjb2RpY2VDb252ZW56aW9uZTogZ2V0KGNvZGljZUNhbmFsZUF0b20pICsgJ1YnLFxyXG4gICAgY29kaWNlVHBDYW5hbGU6ICdWTCcgKyBnZXQoY29kaWNlVHBDYW5hbGVBdG9tKSxcclxuICAgIG9wemlvbmU6IGdldChvcHppb25lQXRvbSksXHJcbiAgICAnYmlsbC10eXBlJzogYXdhaXQgZ2V0KGJpbGxUeXBlQXRvbSksXHJcbiAgICAnZGlyZWN0LWRlYml0JzogYXdhaXQgZ2V0KGRpcmVjdERlYml0QXRvbSksXHJcbiAgICBzZXR0b3JlOiAncmVzaWQnLFxyXG4gICAgLi4uZ2V0UGFzc1Ryb3VnaFFzKCksXHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3Qgc2VhcmNoUGFyYW1zTWFwOiBQYXJ0aWFsPFxyXG4gIFJlY29yZDxPcGVyYXRpdmVNb2RlLCBBdG9tPFByb21pc2U8VVJMU2VhcmNoUGFyYW1zPj4+XHJcbj4gPSB7XHJcbiAgW09wZXJhdGl2ZU1vZGUuU1dJVENIX0lOXTogc3dpdGNoSW5QYXJhbXNBdG9tLFxyXG4gIFtPcGVyYXRpdmVNb2RlLlNXSVRDSF9JTl9UUkFOU0ZFUl06IHN3aXRjaEluVHJhbnNmZXJQYXJhbXNBdG9tLFxyXG4gIFtPcGVyYXRpdmVNb2RlLk5FV19BQ1RJVkFUSU9OXTogbmV3QWN0aXZhdGlvblBhcmFtc0F0b20sXHJcbiAgW09wZXJhdGl2ZU1vZGUuQ0hBTkdFX09GRkVSXTogY2hhbmdlT2ZmZXJQYXJhbXNBdG9tLFxyXG4gIFtPcGVyYXRpdmVNb2RlLlRSQU5TRkVSXTogZ2V0VHJhbnNmZXJQYXJhbXNBdG9tLFxyXG59O1xyXG5cclxuY29uc3QgZ2V0Q29kaWNlUHJvZG90dG9EdWFsQXRvbSA9IGF0b20oKGdldCkgPT4ge1xyXG4gIGNvbnN0IG9mZmVyID0gZ2V0KG9mZmVySWRBdG9tKTtcclxuICByZXR1cm4gb2ZmZXIuY29kZTtcclxufSk7XHJcblxyXG5jb25zdCBjb2RpY2VPZmZlcnRhQXRvbSA9IGF0b20oKGdldCkgPT4ge1xyXG4gIGNvbnN0IHsgY29kZSB9ID0gZ2V0KG9mZmVySWRBdG9tKTtcclxuICBjb25zdCBwb3dlciA9IGdldChwb3dlckF0b20pO1xyXG4gIGNvbnN0IGdhcyA9IGdldChnYXNBdG9tKTtcclxuXHJcbiAgaWYgKCFwb3dlcikge1xyXG4gICAgcmV0dXJuIGNvZGUucmVwbGFjZSgvX0xbQS1aXSstLywgJ18nKTtcclxuICB9XHJcbiAgaWYgKCFnYXMpIHtcclxuICAgIHJldHVybiBjb2RlLnJlcGxhY2UoLy1HW0EtWl0rLywgJycpO1xyXG4gIH1cclxuICByZXR1cm4gY29kZTtcclxufSk7XHJcblxyXG5jb25zdCBjb2RpY2VDYW5hbGVBdG9tID0gYXRvbSgoZ2V0KSA9PiB7XHJcbiAgY29uc3Qgb2ZmZXIgPSBnZXQob2ZmZXJJZEF0b20pO1xyXG4gIHJldHVybiBvZmZlci5jaGFubmVsO1xyXG59KTtcclxuXHJcbmNvbnN0IGNvZGljZVRwQ2FuYWxlQXRvbSA9IGF0b20oKGdldCkgPT4ge1xyXG4gIGNvbnN0IG9mZmVyID0gZ2V0KG9mZmVySWRBdG9tKTtcclxuICByZXR1cm4gb2ZmZXIudG91Y2hwb2ludDtcclxufSk7XHJcblxyXG5jb25zdCBjb21tb2RpdHlBdG9tID0gYXRvbSgoZ2V0KSA9PiB7XHJcbiAgY29uc3QgcG93ZXIgPSAhIWdldChwb3dlckF0b20pO1xyXG4gIGNvbnN0IGdhcyA9ICEhZ2V0KGdhc0F0b20pO1xyXG5cclxuICByZXR1cm4gbmV3IENvbW1vZGl0eU1hcHBlcih7IHBvd2VyLCBnYXMgfSkucXM7XHJcbn0pO1xyXG5cclxuY29uc3Qgb3B6aW9uZUF0b20gPSBhdG9tKChnZXQpID0+IHtcclxuICBjb25zdCBwb3dlclJhdGUgPSBnZXQocG93ZXJSYXRlQXRvbSk7XHJcbiAgcmV0dXJuIG5ldyBQb3dlclJhdGVNYXBwZXIocG93ZXJSYXRlKS5xcztcclxufSk7XHJcblxyXG5jb25zdCBiaWxsVHlwZUF0b20gPSBhdG9tKGFzeW5jIChnZXQpID0+IHtcclxuICBjb25zdCBiaWxsID0gYXdhaXQgZ2V0KGJpbGxUeXBlJCk7XHJcbiAgcmV0dXJuIG5ldyBCaWxsTWFwcGVyKGJpbGwpLnFzO1xyXG59KTtcclxuXHJcbmNvbnN0IGRpcmVjdERlYml0QXRvbSA9IGF0b20oYXN5bmMgKGdldCkgPT4ge1xyXG4gIGNvbnN0IHBheW1lbnQgPSBhd2FpdCBnZXQocGF5bWVudFR5cGUkKTtcclxuICByZXR1cm4gbmV3IFBheW1lbnRNYXBwZXIocGF5bWVudCkucXM7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRyb3VibGVzaG9vdGluZ0F0dGl2YXppb25pQXRvbSA9IGF0b20oYXN5bmMgKGdldCkgPT4ge1xyXG4gIGNvbnN0IHBvd2VyID0gZ2V0KHBvd2VyQXRvbSkhO1xyXG4gIGNvbnN0IGdhcyA9IGdldChnYXNBdG9tKSE7XHJcbiAgY29uc3Qgb2ZmZXIgPSBnZXQob2ZmZXJJZEF0b20pO1xyXG5cclxuICBpZiAocG93ZXIgJiYgZ2FzKSB0aHJvdyBFcnJvcignRFVBTCcpO1xyXG4gIGlmICghcG93ZXIgJiYgIWdhcykgdGhyb3cgRXJyb3IoJ05PIEdBUyBPUiBQT1dFUicpO1xyXG5cclxuICBjb25zdCBwYXRoID0gZ2V0VXJsQXR0aXZhemlvbmlQb3J0YWxlKG9mZmVyLmNvZGUsIHBvd2VyLCBnYXMpO1xyXG5cclxuICBjb25zdCB1cmxTZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcclxuICAgIGNvZGljZVByb2RvdHRvOiBnZXQoZ2V0Q29kaWNlUHJvZG90dG9EdWFsQXRvbSksXHJcbiAgICBjb2RpY2VPZmZlcnRhOiBnZXQoY29kaWNlT2ZmZXJ0YUF0b20pLFxyXG4gICAgY29tbW9kaXR5OiBnZXQoY29tbW9kaXR5QXRvbSksXHJcbiAgICBjb2RpY2VDYW5hbGU6IGdldChjb2RpY2VDYW5hbGVBdG9tKSxcclxuICAgIGNvZGljZUNvbnZlbnppb25lOiBnZXQoY29kaWNlQ2FuYWxlQXRvbSksXHJcbiAgICBjb2RpY2VUcENhbmFsZTogZ2V0KGNvZGljZVRwQ2FuYWxlQXRvbSksXHJcbiAgICBvcHppb25lOiBnZXQob3B6aW9uZUF0b20pLFxyXG4gICAgJ2JpbGwtdHlwZSc6IGF3YWl0IGdldChiaWxsVHlwZUF0b20pLFxyXG4gICAgJ2RpcmVjdC1kZWJpdCc6IGF3YWl0IGdldChkaXJlY3REZWJpdEF0b20pLFxyXG4gICAgY291cG9uOiAndW5kZWZpbmVkJyxcclxuICAgIC8vIGRpcDogJ3RydWUnXHJcbiAgICAuLi5nZXRQYXNzVHJvdWdoUXMoKSxcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHBhdGggKyAnPycgKyB1cmxTZWFyY2hQYXJhbXMudG9TdHJpbmcoKTtcclxufSk7XHJcbmNvbnN0IG9mZmVyQXR0aXZhemlvbmk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XHJcbiAgJ0JBU0VfTFhOT0lWLUdYTk9JVic6ICdwZXItbm9pJyxcclxuICAnQkFTRV9MRklYQVRJVi1HRklYQVRJVic6ICdmaXhhLXRpbWUnLFxyXG4gICdCQVNFX0xJTlNWLUdJTlNWJzogJ2VuZXJnaWEtc2VtcHJlLXBpdScsXHJcbiAgJ0JBU0VfTFRDQVNBVi1HVENBU0FWJzogJ3RyZW5kLWNhc2EnLFxyXG59O1xyXG5cclxuZnVuY3Rpb24gZ2V0VXJsQXR0aXZhemlvbmlQb3J0YWxlKFxyXG4gIG9mZmVyQ29kZTogc3RyaW5nLFxyXG4gIHBvd2VyOiBib29sZWFuLFxyXG4gIGdhczogYm9vbGVhblxyXG4pIHtcclxuICBsZXQgcyA9ICcvb2ZmZXJ0YS9jYXNhL251b3ZhLWZvcm5pdHVyYS8nO1xyXG4gIGNvbnN0IGVsZW1lbnQgPSBvZmZlckF0dGl2YXppb25pW29mZmVyQ29kZV07XHJcbiAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xyXG4gICAgdGhyb3cgRXJyb3IoJ09GRkVSIFVOS05PV04nKTtcclxuICB9XHJcbiAgcyArPSBlbGVtZW50O1xyXG4gIGlmIChwb3dlcikgcyArPSAnLWx1Y2UnO1xyXG4gIGlmIChnYXMpIHMgKz0gJy1nYXMnO1xyXG5cclxuICByZXR1cm4gcztcclxufVxyXG4iXSwiZmlsZSI6IkM6L1VzZXJzL2FpbnRyb25hL0Rlc2t0b3AvQXBwL3JlYWN0L25hai9saWJzL2RhdGEtYWNjZXNzL3NyYy9saWIvdHJvdWJsZXNob290aW5nL3dlYi1vcmRlci50cyJ9