globalThis.jotaiAtomCache = globalThis.jotaiAtomCache || {
  cache: /* @__PURE__ */ new Map(),
  get(name, inst) {
    if (this.cache.has(name)) {
      return this.cache.get(name);
    }
    this.cache.set(name, inst);
    return inst;
  }
};
import { Segment } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/enums.ts";
import { BillMapper, CommodityMapper, OperativeModeMapper, PaymentMapper, PowerRateMapper } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/qs-mappers.ts";
import { Bill, OperativeMode, Payment, PowerRate } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/types.ts";
const KEY_CODICE_PRODOTTO = "codiceProdotto";
const KEY_CODICE_CANALE = "codiceCanale";
const KEY_CODICE_TP_CANALE = "codiceTpCanale";
const KEY_COMMODITY = "commodity";
const KEY_POWER_RATE = "opzione";
const KEY_PAYMENT = "direct-debit";
const KEY_BILL = "bill-type";
const KEY_OPERATIVE_MODE = "salesProcess";
const KEY_CVT = "cvt";
const KEY_PRODUCT_PANEL = "panel";
const KEY_PRODUCT_BROADBAND = "fiber";
const KEY_DEV_MODE = "dev";
const KEY_NEW_PRODUCTS_MODE = "new-products";
const KEY_TEST_RESID_MODE = "abt";
const KEY_TEST_FROM_CHATBOT_MODE = "abc";
const KEY_TEST_BUSINESS_MODE = "abu";
const KEY_TEST_NEW_ACTIVATION = "aba";
const KEY_SEGMENT = "segment";
const searchParams = new URLSearchParams(document.location.search);
export function restoreWantsCommodityFromUrl() {
  return searchParams.has(KEY_COMMODITY) || !restorePanelFromUrl() && !restoreBroadbandFromUrl();
}
export function restorePowerFromUrl() {
  const commodity = new CommodityMapper();
  commodity.qs = searchParams.get(KEY_COMMODITY);
  return commodity.value?.power || false;
}
export function restoreGasFromUrl() {
  const commodity = new CommodityMapper();
  commodity.qs = searchParams.get(KEY_COMMODITY);
  return commodity.value?.gas || false;
}
export function restoreBroadbandFromUrl() {
  return searchParams.has(KEY_PRODUCT_BROADBAND);
}
export function restoreOperativeModeFromUrl() {
  const operativeMode = new OperativeModeMapper();
  operativeMode.qs = searchParams.get(KEY_OPERATIVE_MODE);
  return operativeMode.value || OperativeMode.NOT_SELECTED;
}
export function restorePowerRateFromUrl() {
  const powerRate = new PowerRateMapper();
  powerRate.qs = searchParams.get(KEY_POWER_RATE);
  return powerRate.value || PowerRate.NOT_SELECTED;
}
export function restorePaymentFromUrl() {
  const payment = new PaymentMapper();
  payment.qs = searchParams.get(KEY_PAYMENT);
  return payment.value || Payment.NOT_SELECTED;
}
export function restoreBillFromUrl() {
  const bill = new BillMapper();
  bill.qs = searchParams.get(KEY_BILL);
  return bill.value || Bill.NOT_SELECTED;
}
export function restoreOfferFromUrl() {
  const offer = {
    code: searchParams.get(KEY_CODICE_PRODOTTO) ?? "",
    channel: searchParams.get(KEY_CODICE_CANALE) ?? "",
    touchpoint: searchParams.get(KEY_CODICE_TP_CANALE) ?? ""
  };
  return offer.code && offer || {
    code: "",
    channel: "",
    touchpoint: ""
  };
}
export function restoreCvtFromUrl() {
  return searchParams.get(KEY_CVT) || "";
}
export function restorePanelFromUrl() {
  return searchParams.has(KEY_PRODUCT_PANEL);
}
export function restoreDevModeFromUrl() {
  return hasSearchParamFromUrl(KEY_DEV_MODE);
}
export function restoreTestResidModeFromUrl() {
  return hasSearchParamFromUrl(KEY_TEST_RESID_MODE) || hasSearchParamFromUrl(KEY_TEST_FROM_CHATBOT_MODE);
}
export function restoreTestBusinessModeFromUrl() {
  return hasSearchParamFromUrl(KEY_TEST_BUSINESS_MODE);
}
export function restoreTestNewActivationsFromUrl() {
  return hasSearchParamFromUrl(KEY_TEST_NEW_ACTIVATION);
}
export function restoreNewProductsFromUrl() {
  return hasSearchParamFromUrl(KEY_NEW_PRODUCTS_MODE);
}
export function getSearchParamsFromUrl() {
  return searchParams;
}
export function hasSearchParamFromUrl(key) {
  return searchParams.has(key);
}
export function saveToUrl(state, searchParams2) {
  const offer = state.commodities?.offer;
  if (offer) {
    searchParams2.set(KEY_CODICE_PRODOTTO, offer.code);
    searchParams2.set(KEY_CODICE_CANALE, offer.channel);
    searchParams2.set(KEY_CODICE_TP_CANALE, offer.touchpoint);
  }
  if (state.commodities?.operativeMode) {
    const operativeMode = new OperativeModeMapper(state.commodities.operativeMode);
    searchParams2.set(KEY_OPERATIVE_MODE, operativeMode.qs);
  }
  if (state.commodities?.power != null && state.commodities?.gas != null) {
    const commodity = new CommodityMapper({
      power: state.commodities.power,
      gas: state.commodities.gas
    });
    searchParams2.set(KEY_COMMODITY, commodity.qs);
  }
  if (state.commodities?.powerRate) {
    const powerRate = new PowerRateMapper(state.commodities.powerRate);
    searchParams2.set(KEY_POWER_RATE, powerRate.qs);
  }
  if (state.commodities?.payment) {
    const payment = new PaymentMapper(state.commodities.payment);
    searchParams2.set(KEY_PAYMENT, payment.qs);
  }
  if (state.commodities?.bill) {
    const bill = new BillMapper(state.commodities.bill);
    searchParams2.set(KEY_BILL, bill.qs);
  }
  if (state.segment) {
    searchParams2.set(KEY_SEGMENT, state.segment === Segment.SMALL ? "biz" : "res");
  }
}
export function getPassTroughQs() {
  const params = new URLSearchParams(window.location.search);
  const qs = {};
  if (params.has("app")) {
    qs["app"] = params.get("app") || "";
  }
  if (params.has("safe-area")) {
    qs["safe-area"] = params.get("safe-area") || "";
  }
  return qs;
}
export function getLeadChannelFromUrl() {
  const params = new URLSearchParams(window.location.search);
  return params.get("leadChannel");
}

//# sourceMappingURL=data:application/json;base64,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UUFBTUYsU0FBUyxJQUFJOUMsZ0JBQWdCK0MsT0FBTzdDLFNBQVNDLE1BQU07QUFDekQsU0FBTzJDLE9BQU9uQyxJQUFJLGFBQWE7QUFDakMiLCJuYW1lcyI6WyJTZWdtZW50IiwiQmlsbE1hcHBlciIsIkNvbW1vZGl0eU1hcHBlciIsIk9wZXJhdGl2ZU1vZGVNYXBwZXIiLCJQYXltZW50TWFwcGVyIiwiUG93ZXJSYXRlTWFwcGVyIiwiQmlsbCIsIk9wZXJhdGl2ZU1vZGUiLCJQYXltZW50IiwiUG93ZXJSYXRlIiwiS0VZX0NPRElDRV9QUk9ET1RUTyIsIktFWV9DT0RJQ0VfQ0FOQUxFIiwiS0VZX0NPRElDRV9UUF9DQU5BTEUiLCJLRVlfQ09NTU9ESVRZIiwiS0VZX1BPV0VSX1JBVEUiLCJLRVlfUEFZTUVOVCIsIktFWV9CSUxMIiwiS0VZX09QRVJBVElWRV9NT0RFIiwiS0VZX0NWVCIsIktFWV9QUk9EVUNUX1BBTkVMIiwiS0VZX1BST0RVQ1RfQlJPQURCQU5EIiwiS0VZX0RFVl9NT0RFIiwiS0VZX05FV19QUk9EVUNUU19NT0RFIiwiS0VZX1RFU1RfUkVTSURfTU9ERSIsIktFWV9URVNUX0ZST01fQ0hBVEJPVF9NT0RFIiwiS0VZX1RFU1RfQlVTSU5FU1NfTU9ERSIsIktFWV9URVNUX05FV19BQ1RJVkFUSU9OIiwiS0VZX1NFR01FTlQiLCJzZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJkb2N1bWVudCIsImxvY2F0aW9uIiwic2VhcmNoIiwicmVzdG9yZVdhbnRzQ29tbW9kaXR5RnJvbVVybCIsImhhcyIsInJlc3RvcmVQYW5lbEZyb21VcmwiLCJyZXN0b3JlQnJvYWRiYW5kRnJvbVVybCIsInJlc3RvcmVQb3dlckZyb21VcmwiLCJjb21tb2RpdHkiLCJxcyIsImdldCIsInZhbHVlIiwicG93ZXIiLCJyZXN0b3JlR2FzRnJvbVVybCIsImdhcyIsInJlc3RvcmVPcGVyYXRpdmVNb2RlRnJvbVVybCIsIm9wZXJhdGl2ZU1vZGUiLCJOT1RfU0VMRUNURUQiLCJyZXN0b3JlUG93ZXJSYXRlRnJvbVVybCIsInBvd2VyUmF0ZSIsInJlc3RvcmVQYXltZW50RnJvbVVybCIsInBheW1lbnQiLCJyZXN0b3JlQmlsbEZyb21VcmwiLCJiaWxsIiwicmVzdG9yZU9mZmVyRnJvbVVybCIsIm9mZmVyIiwiY29kZSIsImNoYW5uZWwiLCJ0b3VjaHBvaW50IiwicmVzdG9yZUN2dEZyb21VcmwiLCJyZXN0b3JlRGV2TW9kZUZyb21VcmwiLCJoYXNTZWFyY2hQYXJhbUZyb21VcmwiLCJyZXN0b3JlVGVzdFJlc2lkTW9kZUZyb21VcmwiLCJyZXN0b3JlVGVzdEJ1c2luZXNzTW9kZUZyb21VcmwiLCJyZXN0b3JlVGVzdE5ld0FjdGl2YXRpb25zRnJvbVVybCIsInJlc3RvcmVOZXdQcm9kdWN0c0Zyb21VcmwiLCJnZXRTZWFyY2hQYXJhbXNGcm9tVXJsIiwia2V5Iiwic2F2ZVRvVXJsIiwic3RhdGUiLCJjb21tb2RpdGllcyIsInNldCIsInNlZ21lbnQiLCJTTUFMTCIsImdldFBhc3NUcm91Z2hRcyIsInBhcmFtcyIsIndpbmRvdyIsImdldExlYWRDaGFubmVsRnJvbVVybCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJzdGF0ZS11cmwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2VnbWVudCB9IGZyb20gJy4uL2F0b21zL2VudW1zJztcclxuaW1wb3J0IHtcclxuICBCaWxsTWFwcGVyLFxyXG4gIENvbW1vZGl0eU1hcHBlcixcclxuICBPcGVyYXRpdmVNb2RlTWFwcGVyLFxyXG4gIFBheW1lbnRNYXBwZXIsXHJcbiAgUG93ZXJSYXRlTWFwcGVyLFxyXG59IGZyb20gJy4vcXMtbWFwcGVycyc7XHJcbmltcG9ydCB7IEJpbGwsIE9mZmVyLCBPcGVyYXRpdmVNb2RlLCBQYXltZW50LCBQb3dlclJhdGUgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbmNvbnN0IEtFWV9DT0RJQ0VfUFJPRE9UVE8gPSAnY29kaWNlUHJvZG90dG8nO1xyXG5jb25zdCBLRVlfQ09ESUNFX0NBTkFMRSA9ICdjb2RpY2VDYW5hbGUnO1xyXG5jb25zdCBLRVlfQ09ESUNFX1RQX0NBTkFMRSA9ICdjb2RpY2VUcENhbmFsZSc7XHJcbmNvbnN0IEtFWV9DT01NT0RJVFkgPSAnY29tbW9kaXR5JztcclxuY29uc3QgS0VZX1BPV0VSX1JBVEUgPSAnb3B6aW9uZSc7XHJcbmNvbnN0IEtFWV9QQVlNRU5UID0gJ2RpcmVjdC1kZWJpdCc7XHJcbmNvbnN0IEtFWV9CSUxMID0gJ2JpbGwtdHlwZSc7XHJcbmNvbnN0IEtFWV9PUEVSQVRJVkVfTU9ERSA9ICdzYWxlc1Byb2Nlc3MnO1xyXG5jb25zdCBLRVlfQ1ZUID0gJ2N2dCc7XHJcbmNvbnN0IEtFWV9QUk9EVUNUX1BBTkVMID0gJ3BhbmVsJztcclxuY29uc3QgS0VZX1BST0RVQ1RfQlJPQURCQU5EID0gJ2ZpYmVyJztcclxuY29uc3QgS0VZX0RFVl9NT0RFID0gJ2Rldic7XHJcbmNvbnN0IEtFWV9ORVdfUFJPRFVDVFNfTU9ERSA9ICduZXctcHJvZHVjdHMnO1xyXG5jb25zdCBLRVlfVEVTVF9SRVNJRF9NT0RFID0gJ2FidCc7XHJcbmNvbnN0IEtFWV9URVNUX0ZST01fQ0hBVEJPVF9NT0RFID0gJ2FiYyc7XHJcbmNvbnN0IEtFWV9URVNUX0JVU0lORVNTX01PREUgPSAnYWJ1JztcclxuY29uc3QgS0VZX1RFU1RfTkVXX0FDVElWQVRJT04gPSAnYWJhJztcclxuLyoqIFVzZWQgYnkgdGhlIGJhY2tlbmQgdGVhbSB0byB0cmFjayByZWZlcnJhbCBvZiBzZXJ2aWNlcyBjYWxscy4gVmFsdWVzOiByZXMvYml6ICovXHJcbmNvbnN0IEtFWV9TRUdNRU5UID0gJ3NlZ21lbnQnO1xyXG5cclxuY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc3RvcmVXYW50c0NvbW1vZGl0eUZyb21VcmwoKSB7XHJcbiAgLy8gSWYgdGhlIHVzZXIgd2FudHMgcGFuZWwgb3IgYnJvYWRiYW5kLCB0aGUgdXNlciBtdXN0IGV4cGxpY2l0bHkgYXNrIGZvciBhIGNvbW1vZGl0eS5cclxuICByZXR1cm4gKFxyXG4gICAgc2VhcmNoUGFyYW1zLmhhcyhLRVlfQ09NTU9ESVRZKSB8fFxyXG4gICAgKCFyZXN0b3JlUGFuZWxGcm9tVXJsKCkgJiYgIXJlc3RvcmVCcm9hZGJhbmRGcm9tVXJsKCkpXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc3RvcmVQb3dlckZyb21VcmwoKSB7XHJcbiAgY29uc3QgY29tbW9kaXR5ID0gbmV3IENvbW1vZGl0eU1hcHBlcigpO1xyXG4gIGNvbW1vZGl0eS5xcyA9IHNlYXJjaFBhcmFtcy5nZXQoS0VZX0NPTU1PRElUWSk7XHJcblxyXG4gIHJldHVybiBjb21tb2RpdHkudmFsdWU/LnBvd2VyIHx8IGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzdG9yZUdhc0Zyb21VcmwoKSB7XHJcbiAgY29uc3QgY29tbW9kaXR5ID0gbmV3IENvbW1vZGl0eU1hcHBlcigpO1xyXG4gIGNvbW1vZGl0eS5xcyA9IHNlYXJjaFBhcmFtcy5nZXQoS0VZX0NPTU1PRElUWSk7XHJcblxyXG4gIHJldHVybiBjb21tb2RpdHkudmFsdWU/LmdhcyB8fCBmYWxzZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc3RvcmVCcm9hZGJhbmRGcm9tVXJsKCkge1xyXG4gIHJldHVybiBzZWFyY2hQYXJhbXMuaGFzKEtFWV9QUk9EVUNUX0JST0FEQkFORCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlT3BlcmF0aXZlTW9kZUZyb21VcmwoKSB7XHJcbiAgY29uc3Qgb3BlcmF0aXZlTW9kZSA9IG5ldyBPcGVyYXRpdmVNb2RlTWFwcGVyKCk7XHJcbiAgb3BlcmF0aXZlTW9kZS5xcyA9IHNlYXJjaFBhcmFtcy5nZXQoS0VZX09QRVJBVElWRV9NT0RFKTtcclxuXHJcbiAgcmV0dXJuIG9wZXJhdGl2ZU1vZGUudmFsdWUgfHwgT3BlcmF0aXZlTW9kZS5OT1RfU0VMRUNURUQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlUG93ZXJSYXRlRnJvbVVybCgpIHtcclxuICBjb25zdCBwb3dlclJhdGUgPSBuZXcgUG93ZXJSYXRlTWFwcGVyKCk7XHJcbiAgcG93ZXJSYXRlLnFzID0gc2VhcmNoUGFyYW1zLmdldChLRVlfUE9XRVJfUkFURSk7XHJcblxyXG4gIHJldHVybiBwb3dlclJhdGUudmFsdWUgfHwgUG93ZXJSYXRlLk5PVF9TRUxFQ1RFRDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc3RvcmVQYXltZW50RnJvbVVybCgpIHtcclxuICBjb25zdCBwYXltZW50ID0gbmV3IFBheW1lbnRNYXBwZXIoKTtcclxuICBwYXltZW50LnFzID0gc2VhcmNoUGFyYW1zLmdldChLRVlfUEFZTUVOVCk7XHJcblxyXG4gIHJldHVybiBwYXltZW50LnZhbHVlIHx8IFBheW1lbnQuTk9UX1NFTEVDVEVEO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzdG9yZUJpbGxGcm9tVXJsKCkge1xyXG4gIGNvbnN0IGJpbGwgPSBuZXcgQmlsbE1hcHBlcigpO1xyXG4gIGJpbGwucXMgPSBzZWFyY2hQYXJhbXMuZ2V0KEtFWV9CSUxMKTtcclxuXHJcbiAgcmV0dXJuIGJpbGwudmFsdWUgfHwgQmlsbC5OT1RfU0VMRUNURUQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlT2ZmZXJGcm9tVXJsKCkge1xyXG4gIGNvbnN0IG9mZmVyOiBPZmZlciA9IHtcclxuICAgIGNvZGU6IHNlYXJjaFBhcmFtcy5nZXQoS0VZX0NPRElDRV9QUk9ET1RUTykgPz8gJycsXHJcbiAgICBjaGFubmVsOiBzZWFyY2hQYXJhbXMuZ2V0KEtFWV9DT0RJQ0VfQ0FOQUxFKSA/PyAnJyxcclxuICAgIHRvdWNocG9pbnQ6IHNlYXJjaFBhcmFtcy5nZXQoS0VZX0NPRElDRV9UUF9DQU5BTEUpID8/ICcnLFxyXG4gIH07XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICAob2ZmZXIuY29kZSAmJiBvZmZlcikgfHwge1xyXG4gICAgICBjb2RlOiAnJyxcclxuICAgICAgY2hhbm5lbDogJycsXHJcbiAgICAgIHRvdWNocG9pbnQ6ICcnLFxyXG4gICAgfVxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlQ3Z0RnJvbVVybCgpIHtcclxuICByZXR1cm4gc2VhcmNoUGFyYW1zLmdldChLRVlfQ1ZUKSB8fCAnJztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc3RvcmVQYW5lbEZyb21VcmwoKSB7XHJcbiAgcmV0dXJuIHNlYXJjaFBhcmFtcy5oYXMoS0VZX1BST0RVQ1RfUEFORUwpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzdG9yZURldk1vZGVGcm9tVXJsKCkge1xyXG4gIHJldHVybiBoYXNTZWFyY2hQYXJhbUZyb21VcmwoS0VZX0RFVl9NT0RFKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc3RvcmVUZXN0UmVzaWRNb2RlRnJvbVVybCgpIHtcclxuICByZXR1cm4gKFxyXG4gICAgaGFzU2VhcmNoUGFyYW1Gcm9tVXJsKEtFWV9URVNUX1JFU0lEX01PREUpIHx8XHJcbiAgICBoYXNTZWFyY2hQYXJhbUZyb21VcmwoS0VZX1RFU1RfRlJPTV9DSEFUQk9UX01PREUpXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc3RvcmVUZXN0QnVzaW5lc3NNb2RlRnJvbVVybCgpIHtcclxuICByZXR1cm4gaGFzU2VhcmNoUGFyYW1Gcm9tVXJsKEtFWV9URVNUX0JVU0lORVNTX01PREUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzdG9yZVRlc3ROZXdBY3RpdmF0aW9uc0Zyb21VcmwoKSB7XHJcbiAgcmV0dXJuIGhhc1NlYXJjaFBhcmFtRnJvbVVybChLRVlfVEVTVF9ORVdfQUNUSVZBVElPTik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlTmV3UHJvZHVjdHNGcm9tVXJsKCkge1xyXG4gIHJldHVybiBoYXNTZWFyY2hQYXJhbUZyb21VcmwoS0VZX05FV19QUk9EVUNUU19NT0RFKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlYXJjaFBhcmFtc0Zyb21VcmwoKSB7XHJcbiAgcmV0dXJuIHNlYXJjaFBhcmFtcztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc1NlYXJjaFBhcmFtRnJvbVVybChrZXk6IHN0cmluZykge1xyXG4gIHJldHVybiBzZWFyY2hQYXJhbXMuaGFzKGtleSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYXZlVG9VcmwoXHJcbiAgc3RhdGU6IHtcclxuICAgIHJlYWRvbmx5IGNvbW1vZGl0aWVzPzoge1xyXG4gICAgICByZWFkb25seSBwb3dlcj86IGJvb2xlYW47XHJcbiAgICAgIHJlYWRvbmx5IGdhcz86IGJvb2xlYW47XHJcbiAgICAgIHJlYWRvbmx5IG9wZXJhdGl2ZU1vZGU/OiBPcGVyYXRpdmVNb2RlO1xyXG4gICAgICByZWFkb25seSBvZmZlcj86IE9mZmVyO1xyXG4gICAgICByZWFkb25seSBwb3dlclJhdGU/OiBQb3dlclJhdGU7XHJcbiAgICAgIHJlYWRvbmx5IHBheW1lbnQ/OiBQYXltZW50O1xyXG4gICAgICByZWFkb25seSBiaWxsPzogQmlsbDtcclxuICAgIH07XHJcbiAgICByZWFkb25seSBzZWdtZW50PzogU2VnbWVudDtcclxuICB9LFxyXG4gIHNlYXJjaFBhcmFtczogVVJMU2VhcmNoUGFyYW1zXHJcbikge1xyXG4gIGNvbnN0IG9mZmVyID0gc3RhdGUuY29tbW9kaXRpZXM/Lm9mZmVyO1xyXG4gIGlmIChvZmZlcikge1xyXG4gICAgc2VhcmNoUGFyYW1zLnNldChLRVlfQ09ESUNFX1BST0RPVFRPLCBvZmZlci5jb2RlKTtcclxuICAgIHNlYXJjaFBhcmFtcy5zZXQoS0VZX0NPRElDRV9DQU5BTEUsIG9mZmVyLmNoYW5uZWwpO1xyXG4gICAgc2VhcmNoUGFyYW1zLnNldChLRVlfQ09ESUNFX1RQX0NBTkFMRSwgb2ZmZXIudG91Y2hwb2ludCk7XHJcbiAgfVxyXG5cclxuICBpZiAoc3RhdGUuY29tbW9kaXRpZXM/Lm9wZXJhdGl2ZU1vZGUpIHtcclxuICAgIGNvbnN0IG9wZXJhdGl2ZU1vZGUgPSBuZXcgT3BlcmF0aXZlTW9kZU1hcHBlcihcclxuICAgICAgc3RhdGUuY29tbW9kaXRpZXMub3BlcmF0aXZlTW9kZVxyXG4gICAgKTtcclxuICAgIHNlYXJjaFBhcmFtcy5zZXQoS0VZX09QRVJBVElWRV9NT0RFLCBvcGVyYXRpdmVNb2RlLnFzKTtcclxuICB9XHJcblxyXG4gIGlmIChzdGF0ZS5jb21tb2RpdGllcz8ucG93ZXIgIT0gbnVsbCAmJiBzdGF0ZS5jb21tb2RpdGllcz8uZ2FzICE9IG51bGwpIHtcclxuICAgIGNvbnN0IGNvbW1vZGl0eSA9IG5ldyBDb21tb2RpdHlNYXBwZXIoe1xyXG4gICAgICBwb3dlcjogc3RhdGUuY29tbW9kaXRpZXMucG93ZXIsXHJcbiAgICAgIGdhczogc3RhdGUuY29tbW9kaXRpZXMuZ2FzLFxyXG4gICAgfSk7XHJcbiAgICBzZWFyY2hQYXJhbXMuc2V0KEtFWV9DT01NT0RJVFksIGNvbW1vZGl0eS5xcyk7XHJcbiAgfVxyXG5cclxuICBpZiAoc3RhdGUuY29tbW9kaXRpZXM/LnBvd2VyUmF0ZSkge1xyXG4gICAgY29uc3QgcG93ZXJSYXRlID0gbmV3IFBvd2VyUmF0ZU1hcHBlcihzdGF0ZS5jb21tb2RpdGllcy5wb3dlclJhdGUpO1xyXG4gICAgc2VhcmNoUGFyYW1zLnNldChLRVlfUE9XRVJfUkFURSwgcG93ZXJSYXRlLnFzKTtcclxuICB9XHJcblxyXG4gIGlmIChzdGF0ZS5jb21tb2RpdGllcz8ucGF5bWVudCkge1xyXG4gICAgY29uc3QgcGF5bWVudCA9IG5ldyBQYXltZW50TWFwcGVyKHN0YXRlLmNvbW1vZGl0aWVzLnBheW1lbnQpO1xyXG4gICAgc2VhcmNoUGFyYW1zLnNldChLRVlfUEFZTUVOVCwgcGF5bWVudC5xcyk7XHJcbiAgfVxyXG5cclxuICBpZiAoc3RhdGUuY29tbW9kaXRpZXM/LmJpbGwpIHtcclxuICAgIGNvbnN0IGJpbGwgPSBuZXcgQmlsbE1hcHBlcihzdGF0ZS5jb21tb2RpdGllcy5iaWxsKTtcclxuICAgIHNlYXJjaFBhcmFtcy5zZXQoS0VZX0JJTEwsIGJpbGwucXMpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHN0YXRlLnNlZ21lbnQpIHtcclxuICAgIHNlYXJjaFBhcmFtcy5zZXQoXHJcbiAgICAgIEtFWV9TRUdNRU5ULFxyXG4gICAgICBzdGF0ZS5zZWdtZW50ID09PSBTZWdtZW50LlNNQUxMID8gJ2JpeicgOiAncmVzJ1xyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXNzVHJvdWdoUXMoKSB7XHJcbiAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuXHJcbiAgY29uc3QgcXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuXHJcbiAgaWYgKHBhcmFtcy5oYXMoJ2FwcCcpKSB7XHJcbiAgICBxc1snYXBwJ10gPSBwYXJhbXMuZ2V0KCdhcHAnKSB8fCAnJztcclxuICB9XHJcbiAgaWYgKHBhcmFtcy5oYXMoJ3NhZmUtYXJlYScpKSB7XHJcbiAgICBxc1snc2FmZS1hcmVhJ10gPSBwYXJhbXMuZ2V0KCdzYWZlLWFyZWEnKSB8fCAnJztcclxuICB9XHJcblxyXG4gIHJldHVybiBxcztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldExlYWRDaGFubmVsRnJvbVVybCgpOiBzdHJpbmcgfCBudWxsIHtcclxuICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG4gIHJldHVybiBwYXJhbXMuZ2V0KCdsZWFkQ2hhbm5lbCcpO1xyXG59XHJcbiJdLCJmaWxlIjoiQzovVXNlcnMvYWludHJvbmEvRGVza3RvcC9BcHAvcmVhY3QvbmFqL2xpYnMvZGF0YS1hY2Nlc3Mvc3JjL2xpYi90cm91Ymxlc2hvb3Rpbmcvc3RhdGUtdXJsLnRzIn0=