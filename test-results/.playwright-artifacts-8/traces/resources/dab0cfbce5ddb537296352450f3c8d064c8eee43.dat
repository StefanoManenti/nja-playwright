globalThis.jotaiAtomCache = globalThis.jotaiAtomCache || {
  cache: /* @__PURE__ */ new Map(),
  get(name, inst) {
    if (this.cache.has(name)) {
      return this.cache.get(name);
    }
    this.cache.set(name, inst);
    return inst;
  }
};
import { atom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/node_modules/.vite/apps/naj/deps/jotai.js?v=0189a8d1";
import { accountSelectedAtom, supplyAddressSelectedAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/account-selected-atoms.ts";
import { customerSegmentAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/customer-atoms.ts";
import { Segment } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/enums.ts";
import { residentialAddressSameAsSupplyAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/profile-atoms.ts";
import { isExistingGasSupply, isExistingPowerSupply } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/supply.ts";
import { estimatedYearGasConsumptionAtom, gasConsumptionTypeAtom, gasSupplySelectedAtom, pdrGasAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/supply-selected-gas.ts";
import { estimatedYearPowerConsumptionAtom, podPowerAtom, powerSupplySelectedAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/supply-selected-power.ts";
export const bulkOrderSupply$ = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\atoms\\contract\\helpers\\supply.ts/bulkOrderSupply$", atom(async (get) => {
  const segment = await get(customerSegmentAtom);
  const supplyAddress = await get(supplyAddressSelectedAtom);
  const commodity = (await get(accountSelectedAtom))?.commodity;
  const resident = segment === Segment.RESID ? await get(residentialAddressSameAsSupplyAtom) : false;
  const power = commodity?.power ? await get(bulkOrderPowerSupply$) : void 0;
  const gas = commodity?.gas ? await get(bulkOrderGasSupply$) : void 0;
  return {
    ...supplyAddress?.asLeadFormat(),
    resident,
    accountCode: power?.accountCode || gas?.accountCode,
    power,
    gas
  };
}, async (get, set, args) => {
  if (args.power) {
    await set(bulkOrderPowerSupply$, args.power);
  }
  if (args.gas) {
    await set(bulkOrderGasSupply$, args.gas);
  }
}));
bulkOrderSupply$.debugLabel = "bulkOrderSupply$";
const bulkOrderPowerSupply$ = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\atoms\\contract\\helpers\\supply.ts/bulkOrderPowerSupply$", atom(async (get) => {
  const supply = await get(powerSupplySelectedAtom);
  if (!supply) {
    return;
  }
  return {
    pod: await get(podPowerAtom),
    annualConsumption: await get(estimatedYearPowerConsumptionAtom),
    accountCode: supply.account.code,
    assetCode: isExistingPowerSupply(supply) ? supply.assetSiebel : get(supply.assetCode)
  };
}, async (_get, set, args) => {
  const pod = args?.pod;
  if (pod) {
    await set(podPowerAtom, pod);
  }
  const annualConsumption = args?.annualConsumption;
  if (annualConsumption) {
    await set(estimatedYearPowerConsumptionAtom, annualConsumption);
  }
}));
bulkOrderPowerSupply$.debugLabel = "bulkOrderPowerSupply$";
const bulkOrderGasSupply$ = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\atoms\\contract\\helpers\\supply.ts/bulkOrderGasSupply$", atom(async (get) => {
  const supply = await get(gasSupplySelectedAtom);
  if (!supply) {
    return;
  }
  const pdr = await get(pdrGasAtom);
  const consumption = await get(gasConsumptionTypeAtom);
  const annualConsumption = await get(estimatedYearGasConsumptionAtom);
  return {
    pdr,
    forCooking: consumption?.forCooking,
    forHeating: consumption?.forHeating,
    forHotWater: consumption?.forHotWater,
    annualConsumption,
    accountCode: supply.account.code,
    assetCode: isExistingGasSupply(supply) ? supply.assetSiebel : get(supply.assetCode)
  };
}, async (_get, set, args) => {
  const pdr = args?.pdr;
  if (pdr) {
    await set(pdrGasAtom, pdr);
  }
  if (args) {
    await set(gasConsumptionTypeAtom, {
      forCooking: args?.forCooking,
      forHeating: args?.forHeating,
      forHotWater: args?.forHotWater
    });
  }
  const annualConsumption = args?.annualConsumption;
  if (annualConsumption) {
    await set(estimatedYearGasConsumptionAtom, annualConsumption);
  }
}));
bulkOrderGasSupply$.debugLabel = "bulkOrderGasSupply$";

//# sourceMappingURL=data:application/json;base64,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RTtBQUFBQSxJQUN6QkMsYUFBYUgsYUFBYUc7QUFBQUEsSUFDMUJWO0FBQUFBLElBQ0FOLGFBQWFJLE9BQU9HLFFBQVFDO0FBQUFBLElBQzVCQyxXQUFXakMsb0JBQW9CNEIsTUFBTSxJQUNqQ0EsT0FBT00sY0FDUHRCLElBQUlnQixPQUFPSyxTQUFTO0FBQUEsRUFDMUI7QUFDRixHQUNBLE9BQU9FLE1BQU1WLEtBQUtDLFNBQStCO0FBQy9DLFFBQU1VLE1BQU1WLE1BQU1VO0FBQ2xCLE1BQUlBLEtBQUs7QUFDUCxVQUFNWCxJQUFJcEIsWUFBWStCLEdBQUc7QUFBQSxFQUMzQjtBQUNBLE1BQUlWLE1BQU07QUFDUixVQUFNRCxJQUFJdEIsd0JBQXdCO0FBQUEsTUFDaENtQyxZQUFZWixNQUFNWTtBQUFBQSxNQUNsQkMsWUFBWWIsTUFBTWE7QUFBQUEsTUFDbEJDLGFBQWFkLE1BQU1jO0FBQUFBLElBQ3JCLENBQUM7QUFBQSxFQUNIO0FBQ0EsUUFBTVYsb0JBQW9CSixNQUFNSTtBQUNoQyxNQUFJQSxtQkFBbUI7QUFDckIsVUFBTUwsSUFBSXZCLGlDQUFpQzRCLGlCQUFpQjtBQUFBLEVBQzlEO0FBQ0YsQ0FDRixDQUFDO0FBQUFSLG9CQUFBSyxhQUFBIiwibmFtZXMiOlsiYXRvbSIsImFjY291bnRTZWxlY3RlZEF0b20iLCJzdXBwbHlBZGRyZXNzU2VsZWN0ZWRBdG9tIiwiY3VzdG9tZXJTZWdtZW50QXRvbSIsIlNlZ21lbnQiLCJyZXNpZGVudGlhbEFkZHJlc3NTYW1lQXNTdXBwbHlBdG9tIiwiaXNFeGlzdGluZ0dhc1N1cHBseSIsImlzRXhpc3RpbmdQb3dlclN1cHBseSIsImVzdGltYXRlZFllYXJHYXNDb25zdW1wdGlvbkF0b20iLCJnYXNDb25zdW1wdGlvblR5cGVBdG9tIiwiZ2FzU3VwcGx5U2VsZWN0ZWRBdG9tIiwicGRyR2FzQXRvbSIsImVzdGltYXRlZFllYXJQb3dlckNvbnN1bXB0aW9uQXRvbSIsInBvZFBvd2VyQXRvbSIsInBvd2VyU3VwcGx5U2VsZWN0ZWRBdG9tIiwiYnVsa09yZGVyU3VwcGx5JCIsImdsb2JhbFRoaXMiLCJqb3RhaUF0b21DYWNoZSIsImdldCIsInNlZ21lbnQiLCJzdXBwbHlBZGRyZXNzIiwiY29tbW9kaXR5IiwicmVzaWRlbnQiLCJSRVNJRCIsInBvd2VyIiwiYnVsa09yZGVyUG93ZXJTdXBwbHkkIiwidW5kZWZpbmVkIiwiZ2FzIiwiYnVsa09yZGVyR2FzU3VwcGx5JCIsImFzTGVhZEZvcm1hdCIsImFjY291bnRDb2RlIiwic2V0IiwiYXJncyIsImRlYnVnTGFiZWwiLCJzdXBwbHkiLCJwb2QiLCJhbm51YWxDb25zdW1wdGlvbiIsImFjY291bnQiLCJjb2RlIiwiYXNzZXRDb2RlIiwiYXNzZXRTaWViZWwiLCJfZ2V0IiwicGRyIiwiY29uc3VtcHRpb24iLCJmb3JDb29raW5nIiwiZm9ySGVhdGluZyIsImZvckhvdFdhdGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbInN1cHBseS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdG9tIH0gZnJvbSAnam90YWknO1xyXG5pbXBvcnQgdHlwZSB7IEZvcm5pdHVyZURhdGEgfSBmcm9tICcuLi8uLi8uLi9hcGkvbGVhZC9fdHlwZXMnO1xyXG5pbXBvcnQge1xyXG4gIGFjY291bnRTZWxlY3RlZEF0b20sXHJcbiAgc3VwcGx5QWRkcmVzc1NlbGVjdGVkQXRvbSxcclxufSBmcm9tICcuLi8uLi9hY2NvdW50LXNlbGVjdGVkLWF0b21zJztcclxuaW1wb3J0IHsgY3VzdG9tZXJTZWdtZW50QXRvbSB9IGZyb20gJy4uLy4uL2N1c3RvbWVyLWF0b21zJztcclxuaW1wb3J0IHsgU2VnbWVudCB9IGZyb20gJy4uLy4uL2VudW1zJztcclxuaW1wb3J0IHsgcmVzaWRlbnRpYWxBZGRyZXNzU2FtZUFzU3VwcGx5QXRvbSB9IGZyb20gJy4uLy4uL3Byb2ZpbGUtYXRvbXMnO1xyXG5pbXBvcnQgeyBpc0V4aXN0aW5nR2FzU3VwcGx5LCBpc0V4aXN0aW5nUG93ZXJTdXBwbHkgfSBmcm9tICcuLi8uLi9zdXBwbHknO1xyXG5pbXBvcnQge1xyXG4gIGVzdGltYXRlZFllYXJHYXNDb25zdW1wdGlvbkF0b20sXHJcbiAgZ2FzQ29uc3VtcHRpb25UeXBlQXRvbSxcclxuICBnYXNTdXBwbHlTZWxlY3RlZEF0b20sXHJcbiAgcGRyR2FzQXRvbSxcclxufSBmcm9tICcuLi8uLi9zdXBwbHktc2VsZWN0ZWQtZ2FzJztcclxuaW1wb3J0IHtcclxuICBlc3RpbWF0ZWRZZWFyUG93ZXJDb25zdW1wdGlvbkF0b20sXHJcbiAgcG9kUG93ZXJBdG9tLFxyXG4gIHBvd2VyU3VwcGx5U2VsZWN0ZWRBdG9tLFxyXG59IGZyb20gJy4uLy4uL3N1cHBseS1zZWxlY3RlZC1wb3dlcic7XHJcbmltcG9ydCB7IEFzeW5jQnVsa09yZGVySGVscGVyQXRvbSB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGJ1bGtPcmRlclN1cHBseSQ6IEFzeW5jQnVsa09yZGVySGVscGVyQXRvbTxGb3JuaXR1cmVEYXRhPiA9IGF0b20oXHJcbiAgYXN5bmMgKGdldCkgPT4ge1xyXG4gICAgY29uc3Qgc2VnbWVudCA9IGF3YWl0IGdldChjdXN0b21lclNlZ21lbnRBdG9tKTtcclxuICAgIGNvbnN0IHN1cHBseUFkZHJlc3MgPSBhd2FpdCBnZXQoc3VwcGx5QWRkcmVzc1NlbGVjdGVkQXRvbSk7XHJcbiAgICBjb25zdCBjb21tb2RpdHkgPSAoYXdhaXQgZ2V0KGFjY291bnRTZWxlY3RlZEF0b20pKT8uY29tbW9kaXR5O1xyXG4gICAgY29uc3QgcmVzaWRlbnQgPVxyXG4gICAgICBzZWdtZW50ID09PSBTZWdtZW50LlJFU0lEXHJcbiAgICAgICAgPyBhd2FpdCBnZXQocmVzaWRlbnRpYWxBZGRyZXNzU2FtZUFzU3VwcGx5QXRvbSlcclxuICAgICAgICA6IGZhbHNlO1xyXG4gICAgY29uc3QgcG93ZXIgPSBjb21tb2RpdHk/LnBvd2VyXHJcbiAgICAgID8gYXdhaXQgZ2V0KGJ1bGtPcmRlclBvd2VyU3VwcGx5JClcclxuICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBnYXMgPSBjb21tb2RpdHk/LmdhcyA/IGF3YWl0IGdldChidWxrT3JkZXJHYXNTdXBwbHkkKSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5zdXBwbHlBZGRyZXNzPy5hc0xlYWRGb3JtYXQoKSxcclxuICAgICAgcmVzaWRlbnQ6IHJlc2lkZW50LFxyXG4gICAgICBhY2NvdW50Q29kZTogcG93ZXI/LmFjY291bnRDb2RlIHx8IGdhcz8uYWNjb3VudENvZGUsXHJcbiAgICAgIHBvd2VyOiBwb3dlcixcclxuICAgICAgZ2FzOiBnYXMsXHJcbiAgICB9IGFzIEZvcm5pdHVyZURhdGE7XHJcbiAgfSxcclxuICBhc3luYyAoZ2V0LCBzZXQsIGFyZ3MpID0+IHtcclxuICAgIGlmIChhcmdzLnBvd2VyKSB7XHJcbiAgICAgIGF3YWl0IHNldChidWxrT3JkZXJQb3dlclN1cHBseSQsIGFyZ3MucG93ZXIpO1xyXG4gICAgfVxyXG4gICAgaWYgKGFyZ3MuZ2FzKSB7XHJcbiAgICAgIGF3YWl0IHNldChidWxrT3JkZXJHYXNTdXBwbHkkLCBhcmdzLmdhcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4pO1xyXG5cclxuY29uc3QgYnVsa09yZGVyUG93ZXJTdXBwbHkkID0gYXRvbShcclxuICBhc3luYyAoZ2V0KSA9PiB7XHJcbiAgICBjb25zdCBzdXBwbHkgPSBhd2FpdCBnZXQocG93ZXJTdXBwbHlTZWxlY3RlZEF0b20pO1xyXG4gICAgaWYgKCFzdXBwbHkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHBvZDogYXdhaXQgZ2V0KHBvZFBvd2VyQXRvbSksXHJcbiAgICAgIGFubnVhbENvbnN1bXB0aW9uOiBhd2FpdCBnZXQoZXN0aW1hdGVkWWVhclBvd2VyQ29uc3VtcHRpb25BdG9tKSxcclxuICAgICAgYWNjb3VudENvZGU6IHN1cHBseS5hY2NvdW50LmNvZGUsXHJcbiAgICAgIGFzc2V0Q29kZTogaXNFeGlzdGluZ1Bvd2VyU3VwcGx5KHN1cHBseSlcclxuICAgICAgICA/IHN1cHBseS5hc3NldFNpZWJlbFxyXG4gICAgICAgIDogZ2V0KHN1cHBseS5hc3NldENvZGUpLFxyXG4gICAgfSBhcyBGb3JuaXR1cmVEYXRhWydwb3dlciddO1xyXG4gIH0sXHJcbiAgYXN5bmMgKF9nZXQsIHNldCwgYXJnczogRm9ybml0dXJlRGF0YVsncG93ZXInXSkgPT4ge1xyXG4gICAgY29uc3QgcG9kID0gYXJncz8ucG9kO1xyXG4gICAgaWYgKHBvZCkge1xyXG4gICAgICBhd2FpdCBzZXQocG9kUG93ZXJBdG9tLCBwb2QpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYW5udWFsQ29uc3VtcHRpb24gPSBhcmdzPy5hbm51YWxDb25zdW1wdGlvbjtcclxuICAgIGlmIChhbm51YWxDb25zdW1wdGlvbikge1xyXG4gICAgICBhd2FpdCBzZXQoZXN0aW1hdGVkWWVhclBvd2VyQ29uc3VtcHRpb25BdG9tLCBhbm51YWxDb25zdW1wdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG4pO1xyXG5cclxuY29uc3QgYnVsa09yZGVyR2FzU3VwcGx5JCA9IGF0b20oXHJcbiAgYXN5bmMgKGdldCkgPT4ge1xyXG4gICAgY29uc3Qgc3VwcGx5ID0gYXdhaXQgZ2V0KGdhc1N1cHBseVNlbGVjdGVkQXRvbSk7XHJcbiAgICBpZiAoIXN1cHBseSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBwZHIgPSBhd2FpdCBnZXQocGRyR2FzQXRvbSk7XHJcbiAgICBjb25zdCBjb25zdW1wdGlvbiA9IGF3YWl0IGdldChnYXNDb25zdW1wdGlvblR5cGVBdG9tKTtcclxuICAgIGNvbnN0IGFubnVhbENvbnN1bXB0aW9uID0gYXdhaXQgZ2V0KGVzdGltYXRlZFllYXJHYXNDb25zdW1wdGlvbkF0b20pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHBkcjogcGRyLFxyXG4gICAgICBmb3JDb29raW5nOiBjb25zdW1wdGlvbj8uZm9yQ29va2luZyxcclxuICAgICAgZm9ySGVhdGluZzogY29uc3VtcHRpb24/LmZvckhlYXRpbmcsXHJcbiAgICAgIGZvckhvdFdhdGVyOiBjb25zdW1wdGlvbj8uZm9ySG90V2F0ZXIsXHJcbiAgICAgIGFubnVhbENvbnN1bXB0aW9uOiBhbm51YWxDb25zdW1wdGlvbixcclxuICAgICAgYWNjb3VudENvZGU6IHN1cHBseS5hY2NvdW50LmNvZGUsXHJcbiAgICAgIGFzc2V0Q29kZTogaXNFeGlzdGluZ0dhc1N1cHBseShzdXBwbHkpXHJcbiAgICAgICAgPyBzdXBwbHkuYXNzZXRTaWViZWxcclxuICAgICAgICA6IGdldChzdXBwbHkuYXNzZXRDb2RlKSxcclxuICAgIH0gYXMgRm9ybml0dXJlRGF0YVsnZ2FzJ107XHJcbiAgfSxcclxuICBhc3luYyAoX2dldCwgc2V0LCBhcmdzOiBGb3JuaXR1cmVEYXRhWydnYXMnXSkgPT4ge1xyXG4gICAgY29uc3QgcGRyID0gYXJncz8ucGRyO1xyXG4gICAgaWYgKHBkcikge1xyXG4gICAgICBhd2FpdCBzZXQocGRyR2FzQXRvbSwgcGRyKTtcclxuICAgIH1cclxuICAgIGlmIChhcmdzKSB7XHJcbiAgICAgIGF3YWl0IHNldChnYXNDb25zdW1wdGlvblR5cGVBdG9tLCB7XHJcbiAgICAgICAgZm9yQ29va2luZzogYXJncz8uZm9yQ29va2luZyxcclxuICAgICAgICBmb3JIZWF0aW5nOiBhcmdzPy5mb3JIZWF0aW5nLFxyXG4gICAgICAgIGZvckhvdFdhdGVyOiBhcmdzPy5mb3JIb3RXYXRlcixcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhbm51YWxDb25zdW1wdGlvbiA9IGFyZ3M/LmFubnVhbENvbnN1bXB0aW9uO1xyXG4gICAgaWYgKGFubnVhbENvbnN1bXB0aW9uKSB7XHJcbiAgICAgIGF3YWl0IHNldChlc3RpbWF0ZWRZZWFyR2FzQ29uc3VtcHRpb25BdG9tLCBhbm51YWxDb25zdW1wdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG4pO1xyXG4iXSwiZmlsZSI6IkM6L1VzZXJzL2FpbnRyb25hL0Rlc2t0b3AvQXBwL3JlYWN0L25hai9saWJzL2RhdGEtYWNjZXNzL3NyYy9saWIvYXRvbXMvY29udHJhY3QvaGVscGVycy9zdXBwbHkudHMifQ==