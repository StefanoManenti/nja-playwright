globalThis.jotaiAtomCache = globalThis.jotaiAtomCache || {
  cache: /* @__PURE__ */ new Map(),
  get(name, inst) {
    if (this.cache.has(name)) {
      return this.cache.get(name);
    }
    this.cache.set(name, inst);
    return inst;
  }
};
export function synchronized(f) {
  let lock;
  return async (...args) => {
    if (lock) {
      return lock;
    }
    const promise = f(...args);
    lock = promise;
    try {
      await promise;
    } finally {
      lock = void 0;
    }
    return promise;
  };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUlPLGdCQUFTQSxhQUNkQyxHQUNBO0FBQ0EsTUFBSUM7QUFDSixTQUFPLFVBQVVDLFNBQVk7QUFDM0IsUUFBSUQsTUFBTTtBQUNSLGFBQU9BO0FBQUFBLElBQ1Q7QUFFQSxVQUFNRSxVQUFVSCxFQUFFLEdBQUdFLElBQUk7QUFDekJELFdBQU9FO0FBQ1AsUUFBSTtBQUNGLFlBQU1BO0FBQUFBLElBQ1IsVUFBQztBQUNDRixhQUFPRztBQUFBQSxJQUNUO0FBQ0EsV0FBT0Q7QUFBQUEsRUFDVDtBQUNGIiwibmFtZXMiOlsic3luY2hyb25pemVkIiwiZiIsImxvY2siLCJhcmdzIiwicHJvbWlzZSIsInVuZGVmaW5lZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJzeW5jcm9uaXplZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogUHJldmVudCB0aGUgZXhlY3V0aW9uIGZvciB0aGUgZnVuY3Rpb24gcGFzc2VkIGFzIGFyZ3MgaWYgYWxyZWFkeSBpbiBleGVjdXRpb25cclxuICogQHBhcmFtIGYgdGhlIGZ1bmN0aW9uIHRvIHdyYXBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzeW5jaHJvbml6ZWQ8QSBleHRlbmRzIHVua25vd25bXSwgUj4oXHJcbiAgZjogKC4uLmFyZ3M6IEEpID0+IFByb21pc2U8Uj5cclxuKSB7XHJcbiAgbGV0IGxvY2s6IFByb21pc2U8Uj4gfCB1bmRlZmluZWQ7XHJcbiAgcmV0dXJuIGFzeW5jICguLi5hcmdzOiBBKSA9PiB7XHJcbiAgICBpZiAobG9jaykge1xyXG4gICAgICByZXR1cm4gbG9jaztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwcm9taXNlID0gZiguLi5hcmdzKTtcclxuICAgIGxvY2sgPSBwcm9taXNlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgcHJvbWlzZTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGxvY2sgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJvbWlzZTtcclxuICB9O1xyXG59XHJcbiJdLCJmaWxlIjoiQzovVXNlcnMvYWludHJvbmEvRGVza3RvcC9BcHAvcmVhY3QvbmFqL2xpYnMvdXRpbC9zcmMvbGliL3N5bmNyb25pemVkLnRzIn0=