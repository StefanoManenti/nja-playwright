globalThis.jotaiAtomCache = globalThis.jotaiAtomCache || {
  cache: /* @__PURE__ */ new Map(),
  get(name, inst) {
    if (this.cache.has(name)) {
      return this.cache.get(name);
    }
    this.cache.set(name, inst);
    return inst;
  }
};
import { costiAttivazione } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/api/weborder/costiAttivazione.ts";
import { workingProductAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/troubleshooting.ts";
import { OperativeMode } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/types.ts";
import { atomWithErrorReset } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/utils/atomWithRetryableQuery.ts";
import { supplyAddressSelectedAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/account-selected-atoms.ts";
import { currentContractInfoAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/current-contract-info-atoms.ts";
import { TransferType, transferTypeAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/transfer.ts";
import { tipoTroubleshootingCalcolato$ } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/activations/tipo-troubleshooting.ts";
import { getActivationSdr, VOLTURA_CAMBIO_FORNITORE, VOLTURA_GAS, VOLTURA_GAS_INCORPORAZIONE_SOCIETARIA, VOLTURA_GAS_MORTIS_CAUSA, VOLTURA_POWER, VOLTURA_POWER_INCORPORAZIONE_SOCIETARIA, VOLTURA_POWER_MORTIS_CAUSA } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/costs/sdr.ts";
export const activationCosts$ = atomWithErrorReset(async (get) => {
  const contract = get(currentContractInfoAtom);
  const idLead = contract.idLead;
  const plicoCode = await contract.plicoCode;
  const wp = get(workingProductAtom);
  const commodityObj = wp.commodity;
  const commodity = commodityObj.toString();
  const codiceIstat = (await get(supplyAddressSelectedAtom))?.istatCode;
  const toReturn = {};
  async function getSdr(commodity2) {
    switch (wp.operativeMode) {
      case OperativeMode.NEW_ACTIVATION: {
        const tipoTroubleshooting = await get(tipoTroubleshootingCalcolato$);
        return getActivationSdr(tipoTroubleshooting);
      }
      case OperativeMode.SWITCH_IN_TRANSFER: {
        if (commodity2 === "POWER") return VOLTURA_CAMBIO_FORNITORE;
        return;
      }
      case OperativeMode.TRANSFER: {
        const tipologyTransfer = get(transferTypeAtom);
        if (commodity2 === "GAS") {
          if (tipologyTransfer === TransferType.ORDINARIA) return VOLTURA_GAS;
          if (tipologyTransfer === TransferType.MORTIS_CAUSA) return VOLTURA_GAS_MORTIS_CAUSA;
          if (tipologyTransfer === TransferType.INCORPORAZIONE_SOCIETARIA) return VOLTURA_GAS_INCORPORAZIONE_SOCIETARIA;
          return VOLTURA_GAS;
        }
        if (commodity2 === "POWER") {
          if (tipologyTransfer === TransferType.ORDINARIA) return VOLTURA_POWER;
          if (tipologyTransfer === TransferType.MORTIS_CAUSA) return VOLTURA_POWER_MORTIS_CAUSA;
          if (tipologyTransfer === TransferType.INCORPORAZIONE_SOCIETARIA) return VOLTURA_POWER_INCORPORAZIONE_SOCIETARIA;
          return VOLTURA_POWER;
        }
      }
    }
  }
  if (commodityObj.gas) {
    const sdr = await getSdr("GAS");
    if (sdr) {
      toReturn.gas = await costiAttivazione({
        idLead,
        plicoCode,
        commodity,
        codiceSdr: sdr.codiceSdr,
        descrizioneSdr: sdr.descrizioneSdr,
        codiceIstat
      });
    }
  }
  if (commodityObj.power) {
    const sdr = await getSdr("POWER");
    if (sdr) {
      toReturn.power = await costiAttivazione({
        idLead,
        plicoCode,
        commodity,
        codiceSdr: sdr.codiceSdr,
        descrizioneSdr: sdr.descrizioneSdr,
        codiceIstat
      });
    }
  }
  return toReturn;
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLFNBQVNBLHdCQUF3QjtBQUNqQyxTQUFTQywwQkFBMEI7QUFDbkMsU0FBU0MscUJBQXFCO0FBQzlCLFNBQVNDLDBCQUEwQjtBQUNuQyxTQUFTQyxpQ0FBaUM7QUFDMUMsU0FBU0MsK0JBQStCO0FBQ3hDLFNBQVNDLGNBQWNDLHdCQUF3QjtBQUMvQyxTQUFTQyxxQ0FBcUM7QUFDOUMsU0FDRUMsa0JBQ0FDLDBCQUNBQyxhQUNBQyx1Q0FDQUMsMEJBQ0FDLGVBQ0FDLHlDQUNBQyxrQ0FDSztBQU9BLGFBQU1DLG1CQUFtQmQsbUJBQW1CLE9BQU9lLFFBQVE7QUFDaEUsUUFBTUMsV0FBV0QsSUFBSWIsdUJBQXVCO0FBQzVDLFFBQU1lLFNBQVNELFNBQVNDO0FBQ3hCLFFBQU1DLFlBQVksTUFBTUYsU0FBU0U7QUFDakMsUUFBTUMsS0FBS0osSUFBSWpCLGtCQUFrQjtBQUNqQyxRQUFNc0IsZUFBZUQsR0FBR0U7QUFDeEIsUUFBTUEsWUFBWUQsYUFBYUUsU0FBUztBQUN4QyxRQUFNQyxlQUFlLE1BQU1SLElBQUlkLHlCQUF5QixJQUFJdUI7QUFFNUQsUUFBTUMsV0FBMkMsQ0FBQztBQUVsRCxpQkFBZUMsT0FBT0wsWUFBNEI7QUFDaEQsWUFBUUYsR0FBR1EsZUFBYTtBQUFBLE1BQ3RCLEtBQUs1QixjQUFjNkIsZ0JBQWdCO0FBQ2pDLGNBQU1DLHNCQUF1QixNQUFNZCxJQUFJViw2QkFBNkI7QUFDcEUsZUFBT0MsaUJBQWlCdUIsbUJBQW1CO0FBQUEsTUFDN0M7QUFBQSxNQUNBLEtBQUs5QixjQUFjK0Isb0JBQW9CO0FBQ3JDLFlBQUlULGVBQWMsUUFBUyxRQUFPZDtBQUNsQztBQUFBLE1BQ0Y7QUFBQSxNQUNBLEtBQUtSLGNBQWNnQyxVQUFVO0FBQzNCLGNBQU1DLG1CQUFtQmpCLElBQUlYLGdCQUFnQjtBQUU3QyxZQUFJaUIsZUFBYyxPQUFPO0FBQ3ZCLGNBQUlXLHFCQUFxQjdCLGFBQWE4QixVQUFXLFFBQU96QjtBQUN4RCxjQUFJd0IscUJBQXFCN0IsYUFBYStCLGFBQ3BDLFFBQU94QjtBQUNULGNBQUlzQixxQkFBcUI3QixhQUFhZ0MsMEJBQ3BDLFFBQU8xQjtBQUNULGlCQUFPRDtBQUFBQSxRQUNUO0FBQ0EsWUFBSWEsZUFBYyxTQUFTO0FBQ3pCLGNBQUlXLHFCQUFxQjdCLGFBQWE4QixVQUFXLFFBQU90QjtBQUN4RCxjQUFJcUIscUJBQXFCN0IsYUFBYStCLGFBQ3BDLFFBQU9yQjtBQUNULGNBQUltQixxQkFBcUI3QixhQUFhZ0MsMEJBQ3BDLFFBQU92QjtBQUNULGlCQUFPRDtBQUFBQSxRQUNUO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBRUEsTUFBSVMsYUFBYWdCLEtBQUs7QUFDcEIsVUFBTUMsTUFBTSxNQUFNWCxPQUFPLEtBQUs7QUFDOUIsUUFBSVcsS0FBSztBQUNQWixlQUFTVyxNQUFNLE1BQU12QyxpQkFBaUI7QUFBQSxRQUNwQ29CO0FBQUFBLFFBQ0FDO0FBQUFBLFFBQ0FHO0FBQUFBLFFBQ0FpQixXQUFXRCxJQUFJQztBQUFBQSxRQUNmQyxnQkFBZ0JGLElBQUlFO0FBQUFBLFFBQ3BCaEI7QUFBQUEsTUFDRixDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0Y7QUFFQSxNQUFJSCxhQUFhb0IsT0FBTztBQUN0QixVQUFNSCxNQUFNLE1BQU1YLE9BQU8sT0FBTztBQUNoQyxRQUFJVyxLQUFLO0FBQ1BaLGVBQVNlLFFBQVEsTUFBTTNDLGlCQUFpQjtBQUFBLFFBQ3RDb0I7QUFBQUEsUUFDQUM7QUFBQUEsUUFDQUc7QUFBQUEsUUFDQWlCLFdBQVdELElBQUlDO0FBQUFBLFFBQ2ZDLGdCQUFnQkYsSUFBSUU7QUFBQUEsUUFDcEJoQjtBQUFBQSxNQUNGLENBQUM7QUFBQSxJQUNIO0FBQUEsRUFDRjtBQUVBLFNBQU9FO0FBQ1QsQ0FBQyIsIm5hbWVzIjpbImNvc3RpQXR0aXZhemlvbmUiLCJ3b3JraW5nUHJvZHVjdEF0b20iLCJPcGVyYXRpdmVNb2RlIiwiYXRvbVdpdGhFcnJvclJlc2V0Iiwic3VwcGx5QWRkcmVzc1NlbGVjdGVkQXRvbSIsImN1cnJlbnRDb250cmFjdEluZm9BdG9tIiwiVHJhbnNmZXJUeXBlIiwidHJhbnNmZXJUeXBlQXRvbSIsInRpcG9Ucm91Ymxlc2hvb3RpbmdDYWxjb2xhdG8kIiwiZ2V0QWN0aXZhdGlvblNkciIsIlZPTFRVUkFfQ0FNQklPX0ZPUk5JVE9SRSIsIlZPTFRVUkFfR0FTIiwiVk9MVFVSQV9HQVNfSU5DT1JQT1JBWklPTkVfU09DSUVUQVJJQSIsIlZPTFRVUkFfR0FTX01PUlRJU19DQVVTQSIsIlZPTFRVUkFfUE9XRVIiLCJWT0xUVVJBX1BPV0VSX0lOQ09SUE9SQVpJT05FX1NPQ0lFVEFSSUEiLCJWT0xUVVJBX1BPV0VSX01PUlRJU19DQVVTQSIsImFjdGl2YXRpb25Db3N0cyQiLCJnZXQiLCJjb250cmFjdCIsImlkTGVhZCIsInBsaWNvQ29kZSIsIndwIiwiY29tbW9kaXR5T2JqIiwiY29tbW9kaXR5IiwidG9TdHJpbmciLCJjb2RpY2VJc3RhdCIsImlzdGF0Q29kZSIsInRvUmV0dXJuIiwiZ2V0U2RyIiwib3BlcmF0aXZlTW9kZSIsIk5FV19BQ1RJVkFUSU9OIiwidGlwb1Ryb3VibGVzaG9vdGluZyIsIlNXSVRDSF9JTl9UUkFOU0ZFUiIsIlRSQU5TRkVSIiwidGlwb2xvZ3lUcmFuc2ZlciIsIk9SRElOQVJJQSIsIk1PUlRJU19DQVVTQSIsIklOQ09SUE9SQVpJT05FX1NPQ0lFVEFSSUEiLCJnYXMiLCJzZHIiLCJjb2RpY2VTZHIiLCJkZXNjcml6aW9uZVNkciIsInBvd2VyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbImFjdGl2YXRpb24tY29zdHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29zdGlBdHRpdmF6aW9uZSB9IGZyb20gJy4uLy4uL2FwaS93ZWJvcmRlci9jb3N0aUF0dGl2YXppb25lJztcclxuaW1wb3J0IHsgd29ya2luZ1Byb2R1Y3RBdG9tIH0gZnJvbSAnLi4vLi4vdHJvdWJsZXNob290aW5nL3Ryb3VibGVzaG9vdGluZyc7XHJcbmltcG9ydCB7IE9wZXJhdGl2ZU1vZGUgfSBmcm9tICcuLi8uLi90cm91Ymxlc2hvb3RpbmcvdHlwZXMnO1xyXG5pbXBvcnQgeyBhdG9tV2l0aEVycm9yUmVzZXQgfSBmcm9tICcuLi8uLi91dGlscy9hdG9tV2l0aFJldHJ5YWJsZVF1ZXJ5JztcclxuaW1wb3J0IHsgc3VwcGx5QWRkcmVzc1NlbGVjdGVkQXRvbSB9IGZyb20gJy4uL2FjY291bnQtc2VsZWN0ZWQtYXRvbXMnO1xyXG5pbXBvcnQgeyBjdXJyZW50Q29udHJhY3RJbmZvQXRvbSB9IGZyb20gJy4uL2N1cnJlbnQtY29udHJhY3QtaW5mby1hdG9tcyc7XHJcbmltcG9ydCB7IFRyYW5zZmVyVHlwZSwgdHJhbnNmZXJUeXBlQXRvbSB9IGZyb20gJy4uL3RyYW5zZmVyJztcclxuaW1wb3J0IHsgdGlwb1Ryb3VibGVzaG9vdGluZ0NhbGNvbGF0byQgfSBmcm9tICcuLi9hY3RpdmF0aW9ucy90aXBvLXRyb3VibGVzaG9vdGluZyc7XHJcbmltcG9ydCB7XHJcbiAgZ2V0QWN0aXZhdGlvblNkcixcclxuICBWT0xUVVJBX0NBTUJJT19GT1JOSVRPUkUsXHJcbiAgVk9MVFVSQV9HQVMsXHJcbiAgVk9MVFVSQV9HQVNfSU5DT1JQT1JBWklPTkVfU09DSUVUQVJJQSxcclxuICBWT0xUVVJBX0dBU19NT1JUSVNfQ0FVU0EsXHJcbiAgVk9MVFVSQV9QT1dFUixcclxuICBWT0xUVVJBX1BPV0VSX0lOQ09SUE9SQVpJT05FX1NPQ0lFVEFSSUEsXHJcbiAgVk9MVFVSQV9QT1dFUl9NT1JUSVNfQ0FVU0EsXHJcbn0gZnJvbSAnLi9zZHInO1xyXG5cclxuZXhwb3J0IHR5cGUgQ29zdHMgPSBBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIGNvc3RpQXR0aXZhemlvbmU+PjtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFjdGl2YXRpb25zIGNvc3RzIGJ5IGNhbGxpbmcgYSBzZXJ2aWNlLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGFjdGl2YXRpb25Db3N0cyQgPSBhdG9tV2l0aEVycm9yUmVzZXQoYXN5bmMgKGdldCkgPT4ge1xyXG4gIGNvbnN0IGNvbnRyYWN0ID0gZ2V0KGN1cnJlbnRDb250cmFjdEluZm9BdG9tKTtcclxuICBjb25zdCBpZExlYWQgPSBjb250cmFjdC5pZExlYWQ7XHJcbiAgY29uc3QgcGxpY29Db2RlID0gYXdhaXQgY29udHJhY3QucGxpY29Db2RlO1xyXG4gIGNvbnN0IHdwID0gZ2V0KHdvcmtpbmdQcm9kdWN0QXRvbSkhO1xyXG4gIGNvbnN0IGNvbW1vZGl0eU9iaiA9IHdwLmNvbW1vZGl0eSE7XHJcbiAgY29uc3QgY29tbW9kaXR5ID0gY29tbW9kaXR5T2JqLnRvU3RyaW5nKCk7XHJcbiAgY29uc3QgY29kaWNlSXN0YXQgPSAoYXdhaXQgZ2V0KHN1cHBseUFkZHJlc3NTZWxlY3RlZEF0b20pKT8uaXN0YXRDb2RlO1xyXG5cclxuICBjb25zdCB0b1JldHVybjogeyBnYXM/OiBDb3N0czsgcG93ZXI/OiBDb3N0cyB9ID0ge307XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIGdldFNkcihjb21tb2RpdHk6ICdHQVMnIHwgJ1BPV0VSJykge1xyXG4gICAgc3dpdGNoICh3cC5vcGVyYXRpdmVNb2RlKSB7XHJcbiAgICAgIGNhc2UgT3BlcmF0aXZlTW9kZS5ORVdfQUNUSVZBVElPTjoge1xyXG4gICAgICAgIGNvbnN0IHRpcG9Ucm91Ymxlc2hvb3RpbmcgPSAoYXdhaXQgZ2V0KHRpcG9Ucm91Ymxlc2hvb3RpbmdDYWxjb2xhdG8kKSkhO1xyXG4gICAgICAgIHJldHVybiBnZXRBY3RpdmF0aW9uU2RyKHRpcG9Ucm91Ymxlc2hvb3RpbmcpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgT3BlcmF0aXZlTW9kZS5TV0lUQ0hfSU5fVFJBTlNGRVI6IHtcclxuICAgICAgICBpZiAoY29tbW9kaXR5ID09PSAnUE9XRVInKSByZXR1cm4gVk9MVFVSQV9DQU1CSU9fRk9STklUT1JFO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIE9wZXJhdGl2ZU1vZGUuVFJBTlNGRVI6IHtcclxuICAgICAgICBjb25zdCB0aXBvbG9neVRyYW5zZmVyID0gZ2V0KHRyYW5zZmVyVHlwZUF0b20pO1xyXG5cclxuICAgICAgICBpZiAoY29tbW9kaXR5ID09PSAnR0FTJykge1xyXG4gICAgICAgICAgaWYgKHRpcG9sb2d5VHJhbnNmZXIgPT09IFRyYW5zZmVyVHlwZS5PUkRJTkFSSUEpIHJldHVybiBWT0xUVVJBX0dBUztcclxuICAgICAgICAgIGlmICh0aXBvbG9neVRyYW5zZmVyID09PSBUcmFuc2ZlclR5cGUuTU9SVElTX0NBVVNBKVxyXG4gICAgICAgICAgICByZXR1cm4gVk9MVFVSQV9HQVNfTU9SVElTX0NBVVNBO1xyXG4gICAgICAgICAgaWYgKHRpcG9sb2d5VHJhbnNmZXIgPT09IFRyYW5zZmVyVHlwZS5JTkNPUlBPUkFaSU9ORV9TT0NJRVRBUklBKVxyXG4gICAgICAgICAgICByZXR1cm4gVk9MVFVSQV9HQVNfSU5DT1JQT1JBWklPTkVfU09DSUVUQVJJQTtcclxuICAgICAgICAgIHJldHVybiBWT0xUVVJBX0dBUztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbW1vZGl0eSA9PT0gJ1BPV0VSJykge1xyXG4gICAgICAgICAgaWYgKHRpcG9sb2d5VHJhbnNmZXIgPT09IFRyYW5zZmVyVHlwZS5PUkRJTkFSSUEpIHJldHVybiBWT0xUVVJBX1BPV0VSO1xyXG4gICAgICAgICAgaWYgKHRpcG9sb2d5VHJhbnNmZXIgPT09IFRyYW5zZmVyVHlwZS5NT1JUSVNfQ0FVU0EpXHJcbiAgICAgICAgICAgIHJldHVybiBWT0xUVVJBX1BPV0VSX01PUlRJU19DQVVTQTtcclxuICAgICAgICAgIGlmICh0aXBvbG9neVRyYW5zZmVyID09PSBUcmFuc2ZlclR5cGUuSU5DT1JQT1JBWklPTkVfU09DSUVUQVJJQSlcclxuICAgICAgICAgICAgcmV0dXJuIFZPTFRVUkFfUE9XRVJfSU5DT1JQT1JBWklPTkVfU09DSUVUQVJJQTtcclxuICAgICAgICAgIHJldHVybiBWT0xUVVJBX1BPV0VSO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKGNvbW1vZGl0eU9iai5nYXMpIHtcclxuICAgIGNvbnN0IHNkciA9IGF3YWl0IGdldFNkcignR0FTJyk7XHJcbiAgICBpZiAoc2RyKSB7XHJcbiAgICAgIHRvUmV0dXJuLmdhcyA9IGF3YWl0IGNvc3RpQXR0aXZhemlvbmUoe1xyXG4gICAgICAgIGlkTGVhZCxcclxuICAgICAgICBwbGljb0NvZGUsXHJcbiAgICAgICAgY29tbW9kaXR5OiBjb21tb2RpdHksXHJcbiAgICAgICAgY29kaWNlU2RyOiBzZHIuY29kaWNlU2RyLFxyXG4gICAgICAgIGRlc2NyaXppb25lU2RyOiBzZHIuZGVzY3JpemlvbmVTZHIsXHJcbiAgICAgICAgY29kaWNlSXN0YXQ6IGNvZGljZUlzdGF0LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmIChjb21tb2RpdHlPYmoucG93ZXIpIHtcclxuICAgIGNvbnN0IHNkciA9IGF3YWl0IGdldFNkcignUE9XRVInKTtcclxuICAgIGlmIChzZHIpIHtcclxuICAgICAgdG9SZXR1cm4ucG93ZXIgPSBhd2FpdCBjb3N0aUF0dGl2YXppb25lKHtcclxuICAgICAgICBpZExlYWQsXHJcbiAgICAgICAgcGxpY29Db2RlLFxyXG4gICAgICAgIGNvbW1vZGl0eTogY29tbW9kaXR5LFxyXG4gICAgICAgIGNvZGljZVNkcjogc2RyLmNvZGljZVNkcixcclxuICAgICAgICBkZXNjcml6aW9uZVNkcjogc2RyLmRlc2NyaXppb25lU2RyLFxyXG4gICAgICAgIGNvZGljZUlzdGF0OiBjb2RpY2VJc3RhdCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdG9SZXR1cm47XHJcbn0pO1xyXG4iXSwiZmlsZSI6IkM6L1VzZXJzL2FpbnRyb25hL0Rlc2t0b3AvQXBwL3JlYWN0L25hai9saWJzL2RhdGEtYWNjZXNzL3NyYy9saWIvYXRvbXMvY29zdHMvYWN0aXZhdGlvbi1jb3N0cy50cyJ9