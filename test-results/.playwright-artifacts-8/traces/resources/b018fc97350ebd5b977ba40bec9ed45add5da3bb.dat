import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/PrintModal.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/node_modules/.vite/apps/naj/deps/react_jsx-dev-runtime.js?v=0189a8d1"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.__vite_plugin_react_preamble_installed__) {
    throw new Error("@vitejs/plugin-react can't detect preamble. Something is wrong. See https://github.com/vitejs/vite-plugin-react/pull/11#discussion_r430879201");
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = (type, id) => {
    RefreshRuntime.register(type, "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/PrintModal.tsx " + id);
  };
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
globalThis.jotaiAtomCache = globalThis.jotaiAtomCache || { cache: /* @__PURE__ */ new Map(), get(name, inst) {
  if (this.cache.has(name)) {
    return this.cache.get(name);
  }
  this.cache.set(name, inst);
  return inst;
} };
import __vite__cjsImport3_react from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/node_modules/.vite/apps/naj/deps/react.js?v=0189a8d1"; const React = __vite__cjsImport3_react.__esModule ? __vite__cjsImport3_react.default : __vite__cjsImport3_react; const useEffect = __vite__cjsImport3_react["useEffect"]; const useState = __vite__cjsImport3_react["useState"];
import "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/Modal.module.less";
import { ButtonPln } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/ButtonPln.tsx";
import { FormControlLabel } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/FormControlLabel.tsx";
import { Modal } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/Modal.tsx";
import { ModalBox, ModalButtonsBox } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/ModalBox.tsx";
import { ModalGenericContent } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/ModalGenericContent.tsx";
import { ModalWrapper } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/ModalWrapper.tsx";
export function PrintModal({
  title,
  icon,
  children,
  noButtons = false,
  buttons = [],
  defaultButton = {
    text: "OK",
    color: "primary",
    onButtonClick: () => console.log("Default button action"),
    type: "button",
    closeOnAction: true
  },
  contentAlign = "default",
  onOpen,
  onClose,
  closeButton = true,
  footer = null
}) {
  _s();
  const [isOpen, setIsOpen] = useState(false);
  const [isChecked, setIsChecked] = useState(false);
  useEffect(() => {
    setIsOpen(true);
    if (onOpen) {
      onOpen();
    }
    return () => {
    };
  }, [onOpen]);
  const handleClose = () => {
    setIsOpen(false);
    if (onClose) {
      onClose();
    }
  };
  const handleAction = (button) => {
    if (button.onButtonClick) {
      button.onButtonClick();
    }
  };
  if (!isOpen) return null;
  return /* @__PURE__ */ jsxDEV(ModalWrapper, { children: /* @__PURE__ */ jsxDEV(Modal, { children: /* @__PURE__ */ jsxDEV(
    ModalGenericContent,
    {
      showClose: closeButton,
      onClose: handleClose,
      title,
      icon,
      children: [
        /* @__PURE__ */ jsxDEV(ModalBox, { align: contentAlign, gap: 2, children: React.Children.map(children, (child) => {
          if (React.isValidElement(child)) {
            if (child.type === FormControlLabel && child.props?.type === "checkbox") {
              return React.cloneElement(child, {
                ...child.props,
                inputProps: {
                  ...child.props.inputProps,
                  onChange: (event) => {
                    setIsChecked(event.target.checked);
                    if (child.props.inputProps?.onChange) {
                      child.props.inputProps.onChange(event);
                    }
                  }
                }
              });
            }
            if (child.type === ButtonPln && child.props?.dataOnNext) {
              alert("trigger OK");
              return child;
            }
          }
          return child;
        }) }, void 0, false, {
          fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/PrintModal.tsx",
          lineNumber: 139,
          columnNumber: 11
        }, this),
        !noButtons && /* @__PURE__ */ jsxDEV(ModalButtonsBox, { children: (buttons.length > 0 ? buttons : [defaultButton]).map(
          (button, index) => {
            const isLastButton = index === buttons.length - 1;
            let disabled = false;
            React.Children.forEach(children, (child) => {
              if (React.isValidElement(child) && child.props?.type === "checkbox") {
                disabled = isLastButton && !isChecked;
              }
            });
            return (
              // Render effettivo del bottone
              /* @__PURE__ */ jsxDEV(
                ButtonPln,
                {
                  color: button.color || defaultButton.color,
                  onClick: () => handleAction(button),
                  disabled,
                  children: [
                    button.icon,
                    button.text
                  ]
                },
                index,
                true,
                {
                  fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/PrintModal.tsx",
                  lineNumber: 197,
                  columnNumber: 19
                },
                this
              )
            );
          }
        ) }, void 0, false, {
          fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/PrintModal.tsx",
          lineNumber: 179,
          columnNumber: 11
        }, this),
        footer
      ]
    },
    void 0,
    true,
    {
      fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/PrintModal.tsx",
      lineNumber: 132,
      columnNumber: 9
    },
    this
  ) }, void 0, false, {
    fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/PrintModal.tsx",
    lineNumber: 131,
    columnNumber: 7
  }, this) }, void 0, false, {
    fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/PrintModal.tsx",
    lineNumber: 130,
    columnNumber: 5
  }, this);
}
_s(PrintModal, "C7wOG6bGpPoCqhvPeDhNvF1tPzc=");
_c = PrintModal;
export default PrintModal;
var _c;
$RefreshReg$(_c, "PrintModal");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Users/aintrona/Desktop/App/react/naj/libs/ui-atoms/src/lib/modal/PrintModal.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate(currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QkFBUW9DLFNBQVMsSUFBSXBDLFVBQVUsQ0FBQ0MsYUFBYSxHQUFHdUI7QUFBQUEsVUFDaEQsQ0FBQ0YsUUFBUWUsVUFBVTtBQUVqQixrQkFBTUMsZUFBZUQsVUFBVXJDLFFBQVFvQyxTQUFTO0FBQ2hELGdCQUFJRyxXQUFXO0FBQ2ZyRCxrQkFBTXFDLFNBQVNpQixRQUFRMUMsVUFBVSxDQUFDMkIsVUFBVTtBQUMxQyxrQkFDRXZDLE1BQU13QyxlQUFlRCxLQUFLLEtBQzFCQSxNQUFNRSxPQUFPcEIsU0FBUyxZQUN0QjtBQUNBZ0MsMkJBQVdELGdCQUFnQixDQUFDcEI7QUFBQUEsY0FDOUI7QUFBQSxZQUNGLENBQUM7QUFFRDtBQUFBO0FBQUEsY0FFRTtBQUFBLGdCQUFDO0FBQUE7QUFBQSxrQkFFQyxPQUFPSSxPQUFPbkIsU0FBU0YsY0FBY0U7QUFBQUEsa0JBQ3JDLFNBQVMsTUFBTWtCLGFBQWFDLE1BQU07QUFBQSxrQkFDbEM7QUFBQSxrQkFHQ0E7QUFBQUEsMkJBQU96QjtBQUFBQSxvQkFHUHlCLE9BQU9wQjtBQUFBQTtBQUFBQTtBQUFBQSxnQkFUSG1DO0FBQUFBLGdCQURQO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsY0FXQTtBQUFBO0FBQUEsVUFFSjtBQUFBLFFBQ0YsS0FoQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxlQWlDQTtBQUFBLFFBSUR4QjtBQUFBQTtBQUFBQTtBQUFBQSxJQXBGSDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFxRkEsS0F0RkY7QUFBQTtBQUFBO0FBQUE7QUFBQSxTQXVGQSxLQXhGRjtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBeUZBO0FBRUo7QUFBQ0MsR0EvSmVuQixZQUFVO0FBQUE4QyxLQUFWOUM7QUFpS2hCLGVBQWVBO0FBQVcsSUFBQThDO0FBQUFDLGFBQUFELElBQUEiLCJuYW1lcyI6WyJSZWFjdCIsInVzZUVmZmVjdCIsIkJ1dHRvblBsbiIsIkZvcm1Db250cm9sTGFiZWwiLCJNb2RhbCIsIk1vZGFsQm94IiwiTW9kYWxCdXR0b25zQm94IiwiTW9kYWxHZW5lcmljQ29udGVudCIsIk1vZGFsV3JhcHBlciIsIlByaW50TW9kYWwiLCJ0aXRsZSIsImljb24iLCJjaGlsZHJlbiIsIm5vQnV0dG9ucyIsImJ1dHRvbnMiLCJkZWZhdWx0QnV0dG9uIiwidGV4dCIsImNvbG9yIiwib25CdXR0b25DbGljayIsImNvbnNvbGUiLCJsb2ciLCJ0eXBlIiwiY2xvc2VPbkFjdGlvbiIsImNvbnRlbnRBbGlnbiIsIm9uT3BlbiIsIm9uQ2xvc2UiLCJjbG9zZUJ1dHRvbiIsImZvb3RlciIsIl9zIiwiaXNPcGVuIiwic2V0SXNPcGVuIiwidXNlU3RhdGUiLCJpc0NoZWNrZWQiLCJzZXRJc0NoZWNrZWQiLCJoYW5kbGVDbG9zZSIsImhhbmRsZUFjdGlvbiIsImJ1dHRvbiIsIkNoaWxkcmVuIiwibWFwIiwiY2hpbGQiLCJpc1ZhbGlkRWxlbWVudCIsInByb3BzIiwiY2xvbmVFbGVtZW50IiwiaW5wdXRQcm9wcyIsIm9uQ2hhbmdlIiwiZXZlbnQiLCJ0YXJnZXQiLCJjaGVja2VkIiwiZGF0YU9uTmV4dCIsImFsZXJ0IiwibGVuZ3RoIiwiaW5kZXgiLCJpc0xhc3RCdXR0b24iLCJkaXNhYmxlZCIsImZvckVhY2giLCJfYyIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJQcmludE1vZGFsLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0ICcuL01vZGFsLm1vZHVsZS5sZXNzJztcclxuaW1wb3J0IHsgQnV0dG9uUGxuIH0gZnJvbSAnLi4vQnV0dG9uUGxuJztcclxuaW1wb3J0IHsgRm9ybUNvbnRyb2xMYWJlbCB9IGZyb20gJy4uL0Zvcm1Db250cm9sTGFiZWwnO1xyXG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gJy4vTW9kYWwnO1xyXG5pbXBvcnQgeyBNb2RhbEJveCwgTW9kYWxCdXR0b25zQm94IH0gZnJvbSAnLi9Nb2RhbEJveCc7XHJcbmltcG9ydCB7IE1vZGFsR2VuZXJpY0NvbnRlbnQgfSBmcm9tICcuL01vZGFsR2VuZXJpY0NvbnRlbnQnO1xyXG5pbXBvcnQgeyBNb2RhbFdyYXBwZXIgfSBmcm9tICcuL01vZGFsV3JhcHBlcic7XHJcblxyXG4vKipcclxuICogQm90dG9uaVxyXG4gKi9cclxuaW50ZXJmYWNlIEJ1dHRvbkl0ZW1UeXBlIHtcclxuICAvKiogVGVzdG8gZGVsIGJvdHRvbmUsIG9wemlvbmFsZSAqL1xyXG4gIHRleHQ/OiBzdHJpbmc7XHJcbiAgLyoqIEljb25hIGRlbCBib3R0b25lLCBvcHppb25hbGUgKi9cclxuICBpY29uPzogUmVhY3QuUmVhY3ROb2RlO1xyXG4gIC8qKiBBemlvbmUgZGVsIGJvdHRvbmUsIG9wemlvbmFsZSAqL1xyXG4gIG9uQnV0dG9uQ2xpY2s/OiAoKSA9PiB2b2lkO1xyXG4gIC8qKiBUaXBvbG9naWEgZGVsIGJvdHRvbmUsIG9wemlvbmFsZSAqL1xyXG4gIHR5cGU/OiAnYnV0dG9uJyB8ICdzdWJtaXQnO1xyXG4gIC8qKiBDb2xvcmUgZGVsIGJvdHRvbmUsIG9wemlvbmFsZSAqL1xyXG4gIGNvbG9yPzogJ3ByaW1hcnknIHwgJ3NlY29uZGFyeSc7XHJcbiAgLyoqXHJcbiAgICogT3B6aW9uYWxlLCBzZSB0cnVlLCBhbGxhIHByZXNzaW9uZSBkZWwgYm90dG9uZSwgZG9wbyBsJ29uQnV0dG9uQ2xpY2sgdmllbmUgaW52b2NhdG8gb25DbG9zZSBwZXIgY2hpdWRlcmUgaWwgbW9kYWxlXHJcbiAgICogZSBwYXNzYXJlIGFsIHN1Y2Nlc3Npdm8gKHNlIHByZXNlbnRlKSBvIGNoaXVkZXJlIHR1dHRvXHJcbiAgICovXHJcbiAgY2xvc2VPbkFjdGlvbj86IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcm9wcmlldMOgIGRpIFByaW50TW9kYWxcclxuICovXHJcbmludGVyZmFjZSBQcmludE1vZGFsUHJvcHMge1xyXG4gIC8qKiBUaXRvbG8gZGVsIG1vZGFsZSwgb3B6aW9uYWxlICovXHJcbiAgdGl0bGU/OiBzdHJpbmc7XHJcbiAgLyoqIEljb25hIGRlbCBtb2RhbGUsIG9wemlvbmFsZSAqL1xyXG4gIGljb24/OiBSZWFjdC5SZWFjdE5vZGU7XHJcbiAgLyoqIENvbnRlbnV0byBwcmluY2lwYWxlIGRlbCBtb2RhbGUsIG9wemlvbmFsZSAqL1xyXG4gIGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlO1xyXG4gIC8qKiBBbGxpbmVhbWVudG8gZGVsIGNoaWxkcmVuLCBvcHppb25hbGUgKi9cclxuICBjb250ZW50QWxpZ24/OiAnZGVmYXVsdCcgfCAnY2VudGVyJztcclxuICAvKiogU2UgdHJ1ZSBuYXNjb25kZSBpIHB1bHNhbnRpLCBvcHppb25hbGUgKi9cclxuICBub0J1dHRvbnM/OiBib29sZWFuO1xyXG4gIC8qKiBFbGVuY2EgaSBib3R0b25pIGRlbCBtb2RhbGUsIHNlIHZ1b3RvLCBtb3N0cmEgaWwgcHVsc2FudGUgZGkgZGVmYXVsdCAqL1xyXG4gIGJ1dHRvbnM/OiBCdXR0b25JdGVtVHlwZVtdO1xyXG4gIC8qKiBQdWxzYW50ZSBkaSBkZWZhdWx0LCBvcHppb25hbGUgKi9cclxuICBkZWZhdWx0QnV0dG9uPzogQnV0dG9uSXRlbVR5cGU7XHJcbiAgLyoqIEV2ZW50byBhcHBlbmEgc3VjY2Vzc2l2byBhbGwnYXBlcnR1cmEgZGVsIG1vZGFsZSAqL1xyXG4gIG9uT3Blbj86ICgpID0+IHZvaWQ7XHJcbiAgLyoqIEV2ZW50byBzdWJpdG8gZG9wbyBsYSBjaGl1c3VyYSBkZWwgbW9kYWxlICovXHJcbiAgb25DbG9zZT86ICgpID0+IHZvaWQ7XHJcbiAgLyoqIFNlIHRydWUsIG5hc2NvbmRlIGwnaWNvbmEgZGkgY2hpdXN1cmEgZGVsIG1vZGFsZSAqL1xyXG4gIGNsb3NlQnV0dG9uPzogYm9vbGVhbjtcclxuICAvKiogTm9kbyBleHRyYSwgb3B6aW9uYWxlICovXHJcbiAgZm9vdGVyPzogUmVhY3QuUmVhY3ROb2RlIHwgbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbXBvbmVudGUgUHJpbnRNb2RhbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIFByaW50TW9kYWwoe1xyXG4gIHRpdGxlLFxyXG4gIGljb24sXHJcbiAgY2hpbGRyZW4sXHJcbiAgbm9CdXR0b25zID0gZmFsc2UsXHJcbiAgYnV0dG9ucyA9IFtdLFxyXG4gIGRlZmF1bHRCdXR0b24gPSB7XHJcbiAgICB0ZXh0OiAnT0snLFxyXG4gICAgY29sb3I6ICdwcmltYXJ5JyxcclxuICAgIG9uQnV0dG9uQ2xpY2s6ICgpID0+IGNvbnNvbGUubG9nKCdEZWZhdWx0IGJ1dHRvbiBhY3Rpb24nKSxcclxuICAgIHR5cGU6ICdidXR0b24nLFxyXG4gICAgY2xvc2VPbkFjdGlvbjogdHJ1ZSxcclxuICB9LFxyXG4gIGNvbnRlbnRBbGlnbiA9ICdkZWZhdWx0JyxcclxuICBvbk9wZW4sXHJcbiAgb25DbG9zZSxcclxuICBjbG9zZUJ1dHRvbiA9IHRydWUsXHJcbiAgZm9vdGVyID0gbnVsbCxcclxufTogUHJpbnRNb2RhbFByb3BzKSB7XHJcbiAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbaXNDaGVja2VkLCBzZXRJc0NoZWNrZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gQXR0aXZhIGlsIG1vZGFsZVxyXG4gICAgc2V0SXNPcGVuKHRydWUpO1xyXG5cclxuICAgIC8vIEV2ZW50byBzdWJpdG8gZG9wbyBsJ2FwZXJ0dXJhIGRlbCBtb2RhbGVcclxuICAgIGlmIChvbk9wZW4pIHtcclxuICAgICAgb25PcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXZlbnRvIGRpIENhbGxCYWNrXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAvKmlmKG9uQ2xvc2Upe1xyXG4gICAgICAgICAgICAgICAgb25DbG9zZSgpO1xyXG4gICAgICAgICAgICB9ICovXHJcbiAgICB9O1xyXG4gIH0sIFtvbk9wZW5dKTtcclxuXHJcbiAgLyoqXHJcbiAgICogRXZlbnRvIENvbXBsZXNzaXZvIGRpIGNoaXVzdXJhIGRlbCBtb2RhbGVcclxuICAgKi9cclxuICBjb25zdCBoYW5kbGVDbG9zZSA9ICgpID0+IHtcclxuICAgIC8vRGlzYXR0aXZhIGlsIG1vZGFsZVxyXG4gICAgc2V0SXNPcGVuKGZhbHNlKTtcclxuICAgIC8vIEV2ZW50byBzdWJpdG8gZG9wbyBsYSBjaGl1c3VyYSBkZWwgbW9kYWxlXHJcbiAgICBpZiAob25DbG9zZSkge1xyXG4gICAgICBvbkNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ2xpY2sgc3VsIHB1bHNhbnRlXHJcbiAgICogQHBhcmFtIHtCdXR0b25JdGVtVHlwZX0gYnV0dG9uIC0gQ29uZmlndXJhemlvbmUgZGVsIGJvdHRvbmVcclxuICAgKi9cclxuICBjb25zdCBoYW5kbGVBY3Rpb24gPSAoYnV0dG9uOiBCdXR0b25JdGVtVHlwZSkgPT4ge1xyXG4gICAgaWYgKGJ1dHRvbi5vbkJ1dHRvbkNsaWNrKSB7XHJcbiAgICAgIGJ1dHRvbi5vbkJ1dHRvbkNsaWNrKCk7XHJcbiAgICB9XHJcbiAgICAvLyBMYSBjaGl1c3VyYSBkZWwgbW9kYWxlIGNvcnJlbnRlIGUgaWwgcGFzc2FnZ2lvIGFsIHN1Y2Nlc3Npdm8sIGF2dmllbmUgaW4gTW9kYWxCdWlsZGVyXHJcbiAgICAvLyBzZSBsYSBwcm9wcmlldMOgIGJ1dHRvbi5jbG9zZU9uQWN0aW9uID09PSB0cnVlXHJcbiAgICAvLyBzZSBzaSB2dW9sZSBpZ25vcmFyZSBxdWVzdGEgZnVuemlvbmFsaXTDoCBkZWNvbW1lbnRhcmUgbGEgc2VndWVudGUgcmlnYSBwZXIgZm9yemFyZSBsYSBjaGl1c3VyYSBlIHBhc3NhcmUgYWwgcHJvc3NpbW9cclxuICAgIC8vIGhhbmRsZUNsb3NlKClcclxuICB9O1xyXG5cclxuICBpZiAoIWlzT3BlbikgcmV0dXJuIG51bGw7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8TW9kYWxXcmFwcGVyPlxyXG4gICAgICA8TW9kYWw+XHJcbiAgICAgICAgPE1vZGFsR2VuZXJpY0NvbnRlbnRcclxuICAgICAgICAgIHNob3dDbG9zZT17Y2xvc2VCdXR0b259XHJcbiAgICAgICAgICBvbkNsb3NlPXtoYW5kbGVDbG9zZX1cclxuICAgICAgICAgIHRpdGxlPXt0aXRsZX1cclxuICAgICAgICAgIGljb249e2ljb259XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgey8qIENvbnRhaW5lciBwcmluY2lwYWxlIGRlbCBtb2RhbGUgKi99XHJcbiAgICAgICAgICA8TW9kYWxCb3ggYWxpZ249e2NvbnRlbnRBbGlnbn0gZ2FwPXsyfT5cclxuICAgICAgICAgICAgey8qIENvbnRlbnV0byBwcmluY2lwYWxlIGRlbCBtb2RhbGUgKi99XHJcblxyXG4gICAgICAgICAgICB7LyogQ2VyY2EgaWwgY2hlY2tib3ggbmVpIGNoaWxkcmVuICovfVxyXG4gICAgICAgICAgICB7UmVhY3QuQ2hpbGRyZW4ubWFwKGNoaWxkcmVuLCAoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgICBpZiAoUmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGQpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYSBzZSBpbCBjb21wb25lbnRlIMOoIHVuIEZvcm1Db250cm9sTGFiZWwgZGkgdGlwbyBjaGVja2JveFxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICBjaGlsZC50eXBlID09PSBGb3JtQ29udHJvbExhYmVsICYmXHJcbiAgICAgICAgICAgICAgICAgIGNoaWxkLnByb3BzPy50eXBlID09PSAnY2hlY2tib3gnXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChjaGlsZCwge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmNoaWxkLnByb3BzLFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0UHJvcHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgIC4uLmNoaWxkLnByb3BzLmlucHV0UHJvcHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD5cclxuICAgICAgICAgICAgICAgICAgICAgICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZ2dhbmNpYSBpbCBjYW1iaW8gZGkgc3RhdG8gZGkgaXNDaGVja2VkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldElzQ2hlY2tlZChldmVudC50YXJnZXQuY2hlY2tlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5wcm9wcy5pbnB1dFByb3BzPy5vbkNoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLnByb3BzLmlucHV0UHJvcHMub25DaGFuZ2UoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC50eXBlID09PSBCdXR0b25QbG4gJiYgY2hpbGQucHJvcHM/LmRhdGFPbk5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgYWxlcnQoJ3RyaWdnZXIgT0snKTtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvLyBSZXN0aXR1aXNjaSBhbHRyaSBlbGVtZW50aSBzZW56YSBtb2RpZmljYXJsaVxyXG4gICAgICAgICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICA8L01vZGFsQm94PlxyXG5cclxuICAgICAgICAgIHsvKiBBcmVhIHJpc2VydmF0YSBhaSBib3R0b25pLCBub24gdmlzaWJpbGUgc2Ugbm9CdXR0b25zID09PSB0cnVlICovfVxyXG4gICAgICAgICAgeyFub0J1dHRvbnMgJiYgKFxyXG4gICAgICAgICAgICA8TW9kYWxCdXR0b25zQm94PlxyXG4gICAgICAgICAgICAgIHsvKiBDaWNsbyBkZWkgYm90dG9uaSBkZWwgbW9kYWxlICovfVxyXG4gICAgICAgICAgICAgIHsoYnV0dG9ucy5sZW5ndGggPiAwID8gYnV0dG9ucyA6IFtkZWZhdWx0QnV0dG9uXSkubWFwKFxyXG4gICAgICAgICAgICAgICAgKGJ1dHRvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8gU2UgYyfDqCBpbCBjaGVja2JveCwgbCd1bHRpbW8gcHVsc2FudGUgKG8gdW5pY28pIMOoIGRpc2FiaWxpdGF0byBzZSBpbCBjaGVja2JveCBub24gw6ggc3B1bnRhdG8gKCFpc0NoZWNrZWQpXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTGFzdEJ1dHRvbiA9IGluZGV4ID09PSBidXR0b25zLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICBSZWFjdC5DaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCAoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5pc1ZhbGlkRWxlbWVudChjaGlsZCkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLnByb3BzPy50eXBlID09PSAnY2hlY2tib3gnXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZCA9IGlzTGFzdEJ1dHRvbiAmJiAhaXNDaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbmRlciBlZmZldHRpdm8gZGVsIGJvdHRvbmVcclxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uUGxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2luZGV4fSAvL0tleSB1bnV2b2NhIGRlbCBib3R0b25lXHJcbiAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17YnV0dG9uLmNvbG9yIHx8IGRlZmF1bHRCdXR0b24uY29sb3J9IC8vQ29sb3JlIGRlbCBib3R0b25lXHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVBY3Rpb24oYnV0dG9uKX0gLy9BemlvbmUgZGVsIGJvdHRvbmVcclxuICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH0gLy9EaXNhYmlsaXRhdG8gaW4gcmVsYXppb25lIGFsIGNoZWNrYm94IChzb2xvIHNlIGNoZWNrYm94IHByZXNlbnRlIGUgbm9uIGNoZWNrYXRvKVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBJY29uYSBkZWwgYm90dG9uZSAqL31cclxuICAgICAgICAgICAgICAgICAgICAgIHtidXR0b24uaWNvbn1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICB7LyogVGVzdG8gZGVsIGJvdHRvbmUgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICB7YnV0dG9uLnRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b25QbG4+XHJcbiAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9Nb2RhbEJ1dHRvbnNCb3g+XHJcbiAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgIHsvKiBOb2RvIGV4dHJhICovfVxyXG4gICAgICAgICAge2Zvb3Rlcn1cclxuICAgICAgICA8L01vZGFsR2VuZXJpY0NvbnRlbnQ+XHJcbiAgICAgIDwvTW9kYWw+XHJcbiAgICA8L01vZGFsV3JhcHBlcj5cclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQcmludE1vZGFsO1xyXG4iXSwiZmlsZSI6IkM6L1VzZXJzL2FpbnRyb25hL0Rlc2t0b3AvQXBwL3JlYWN0L25hai9saWJzL3VpLWF0b21zL3NyYy9saWIvbW9kYWwvUHJpbnRNb2RhbC50c3gifQ==