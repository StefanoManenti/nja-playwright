globalThis.jotaiAtomCache = globalThis.jotaiAtomCache || {
  cache: /* @__PURE__ */ new Map(),
  get(name, inst) {
    if (this.cache.has(name)) {
      return this.cache.get(name);
    }
    this.cache.set(name, inst);
    return inst;
  }
};
import { API, atomWithRetryableQuery, generateOperationID } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/utils/index.ts";
const FALLBACK_POWER = "0.01";
async function fetchPanelBestSize(pod, customerId) {
  const logHash = generateOperationID();
  const response = await fetch(`${API}/productsServices/v1/getPanelBestSize/${pod}/${customerId}`, {
    method: "GET",
    headers: {
      Accept: "application/json",
      logHash,
      channel: "PORTAL"
    }
  });
  if (response.status === 200) {
    return (await response.json()).recommendedPower || FALLBACK_POWER;
  }
  return FALLBACK_POWER;
}
export function buildPanelBestSizeAtom(supply, customerCode) {
  return atomWithRetryableQuery((get) => ({
    queryKey: ["panelBestSize", get(supply.pod), get(customerCode)],
    queryFn: ({
      queryKey: [, pod, customerCode2]
    }) => fetchPanelBestSize(pod, customerCode2)
  }));
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUVBLFNBQVNBLEtBQUtDLHdCQUF3QkMsMkJBQTJCO0FBRWpFLE1BQU1DLGlCQUFpQjtBQUV2QixlQUFlQyxtQkFBbUJDLEtBQWFDLFlBQW9CO0FBQ2pFLFFBQU1DLFVBQVVMLG9CQUFvQjtBQUVwQyxRQUFNTSxXQUFXLE1BQU1DLE1BQ3JCLEdBQUdULEdBQUcseUNBQXlDSyxHQUFHLElBQUlDLFVBQVUsSUFDaEU7QUFBQSxJQUNFSSxRQUFRO0FBQUEsSUFDUkMsU0FBUztBQUFBLE1BQ1BDLFFBQVE7QUFBQSxNQUNSTDtBQUFBQSxNQUNBTSxTQUFTO0FBQUEsSUFDWDtBQUFBLEVBQ0YsQ0FDRjtBQUVBLE1BQUlMLFNBQVNNLFdBQVcsS0FBSztBQUMzQixZQUNJLE1BQU1OLFNBQVNPLEtBQUssR0FBeUJDLG9CQUMvQ2I7QUFBQUEsRUFFSjtBQUVBLFNBQU9BO0FBQ1Q7QUFFTyxnQkFBU2MsdUJBQ2RDLFFBQ0FDLGNBQ0E7QUFDQSxTQUFPbEIsdUJBQXdCbUIsVUFBUztBQUFBLElBQ3RDQyxVQUFVLENBQUMsaUJBQWlCRCxJQUFJRixPQUFPYixHQUFHLEdBQUdlLElBQUlELFlBQVksQ0FBQztBQUFBLElBQzlERyxTQUFTQSxDQUFDO0FBQUEsTUFBRUQsVUFBVSxHQUFHaEIsS0FBS2MsYUFBWTtBQUFBLElBQUUsTUFDMUNmLG1CQUFtQkMsS0FBZWMsYUFBc0I7QUFBQSxFQUM1RCxFQUFFO0FBQ0oiLCJuYW1lcyI6WyJBUEkiLCJhdG9tV2l0aFJldHJ5YWJsZVF1ZXJ5IiwiZ2VuZXJhdGVPcGVyYXRpb25JRCIsIkZBTExCQUNLX1BPV0VSIiwiZmV0Y2hQYW5lbEJlc3RTaXplIiwicG9kIiwiY3VzdG9tZXJJZCIsImxvZ0hhc2giLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkFjY2VwdCIsImNoYW5uZWwiLCJzdGF0dXMiLCJqc29uIiwicmVjb21tZW5kZWRQb3dlciIsImJ1aWxkUGFuZWxCZXN0U2l6ZUF0b20iLCJzdXBwbHkiLCJjdXN0b21lckNvZGUiLCJnZXQiLCJxdWVyeUtleSIsInF1ZXJ5Rm4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiZ2V0UGFuZWxCZXN0U2l6ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBdG9tIH0gZnJvbSAnam90YWknO1xyXG5pbXBvcnQgdHlwZSB7IEVzdGltYXRvclJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vc3dhZ2dlcnMnO1xyXG5pbXBvcnQgeyBBUEksIGF0b21XaXRoUmV0cnlhYmxlUXVlcnksIGdlbmVyYXRlT3BlcmF0aW9uSUQgfSBmcm9tICcuLi8uLi91dGlscyc7XHJcblxyXG5jb25zdCBGQUxMQkFDS19QT1dFUiA9ICcwLjAxJztcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoUGFuZWxCZXN0U2l6ZShwb2Q6IHN0cmluZywgY3VzdG9tZXJJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgbG9nSGFzaCA9IGdlbmVyYXRlT3BlcmF0aW9uSUQoKTtcclxuXHJcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgIGAke0FQSX0vcHJvZHVjdHNTZXJ2aWNlcy92MS9nZXRQYW5lbEJlc3RTaXplLyR7cG9kfS8ke2N1c3RvbWVySWR9YCxcclxuICAgIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIGxvZ0hhc2g6IGxvZ0hhc2gsXHJcbiAgICAgICAgY2hhbm5lbDogJ1BPUlRBTCcsXHJcbiAgICAgIH0sXHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAoKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgRXN0aW1hdG9yUmVzcG9uc2UpLnJlY29tbWVuZGVkUG93ZXIgfHxcclxuICAgICAgRkFMTEJBQ0tfUE9XRVJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gRkFMTEJBQ0tfUE9XRVI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZFBhbmVsQmVzdFNpemVBdG9tKFxyXG4gIHN1cHBseTogeyBwb2Q6IEF0b208c3RyaW5nPiB9LFxyXG4gIGN1c3RvbWVyQ29kZTogQXRvbTxzdHJpbmcgfCB1bmRlZmluZWQ+XHJcbikge1xyXG4gIHJldHVybiBhdG9tV2l0aFJldHJ5YWJsZVF1ZXJ5KChnZXQpID0+ICh7XHJcbiAgICBxdWVyeUtleTogWydwYW5lbEJlc3RTaXplJywgZ2V0KHN1cHBseS5wb2QpLCBnZXQoY3VzdG9tZXJDb2RlKV0sXHJcbiAgICBxdWVyeUZuOiAoeyBxdWVyeUtleTogWywgcG9kLCBjdXN0b21lckNvZGVdIH0pID0+XHJcbiAgICAgIGZldGNoUGFuZWxCZXN0U2l6ZShwb2QgYXMgc3RyaW5nLCBjdXN0b21lckNvZGUgYXMgc3RyaW5nKSxcclxuICB9KSk7XHJcbn1cclxuIl0sImZpbGUiOiJDOi9Vc2Vycy9haW50cm9uYS9EZXNrdG9wL0FwcC9yZWFjdC9uYWovbGlicy9kYXRhLWFjY2Vzcy9zcmMvbGliL2FwaS9wYW5lbC1hZG9wdGlvbi9nZXRQYW5lbEJlc3RTaXplLnRzIn0=