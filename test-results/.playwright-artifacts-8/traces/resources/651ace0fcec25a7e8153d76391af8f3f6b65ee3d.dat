globalThis.jotaiAtomCache = globalThis.jotaiAtomCache || {
  cache: /* @__PURE__ */ new Map(),
  get(name, inst) {
    if (this.cache.has(name)) {
      return this.cache.get(name);
    }
    this.cache.set(name, inst);
    return inst;
  }
};
import { atom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/node_modules/.vite/apps/naj/deps/jotai.js?v=0189a8d1";
import { gasAtom, powerAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/atoms.ts";
import { currentSalesProcess } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/sales-process-atoms.ts";
import { BaseBulkOrderContract } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/contract/BaseBulkOrderContract.ts";
import { bulkOrderBroadband$, bulkOrderCustomer$, bulkOrderImmediateEffect$, bulkOrderOfferInfo$, bulkOrderOptions$, bulkOrderPayment$, bulkOrderProduct$, bulkOrderSupply$, bulkOrderTerms$ } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/contract/helpers/index.ts";
import { bulkOrderAppointment$ } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/contract/helpers/appointment.ts";
import { bulkOrderCoupon$ } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/contract/helpers/coupon.ts";
import { bulkOrderProperty$ } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/contract/helpers/property.ts";
import { urlLead } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/contract/helpers/urlLead.ts";
import { bulkOrderVas$ } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/contract/helpers/vas.ts";
export class CommodityContract extends BaseBulkOrderContract {
  constructor() {
    super(...arguments);
    this.baseLead = atom(async (get) => {
      const product = await get(bulkOrderProduct$);
      const {
        billType,
        domiciliation,
        hoursBundle
      } = await get(bulkOrderOptions$);
      const info = await get(bulkOrderOfferInfo$);
      const {
        cpqGas,
        cpqPower,
        options,
        productTitle
      } = info;
      const power = get(powerAtom);
      const gas = get(gasAtom);
      const immediateEffect = await get(bulkOrderImmediateEffect$);
      const {
        segment,
        consentPhoneContact,
        userType,
        personalData,
        consentsData,
        legalRepresentativeData
      } = await get(bulkOrderCustomer$);
      const {
        broadband,
        fornitureData
      } = await get(bulkOrderBroadband$);
      const {
        campiVasContratto
      } = await get(bulkOrderVas$);
      const couponData = await get(bulkOrderCoupon$);
      const lead = {
        /* Offer data */
        ...product,
        urlLead,
        /* Offer info */
        cpqGas: gas ? cpqGas : void 0,
        cpqPower: power ? cpqPower : void 0,
        productTitle,
        /* Offer options */
        billType,
        domiciliation,
        options: {
          ...options,
          hoursBundle
        },
        campiVasContratto,
        ...immediateEffect,
        consentPhoneContact,
        userType,
        plicoCode: await get(this.plicoCode),
        // TODO bulkOrderSupply$ should return null if no fields are set
        fornitureData: await get(bulkOrderSupply$) || fornitureData,
        paymentData: await get(bulkOrderPayment$),
        segment,
        personalData,
        legalRepresentativeData,
        salesProcess: await get(currentSalesProcess),
        flussoWebOrder: this.flussoWebOrder,
        consentsData: {
          ...consentsData,
          ...get(bulkOrderTerms$)
        },
        immobileData: get(bulkOrderProperty$),
        broadband,
        appointmentData: await get(bulkOrderAppointment$),
        ...couponData
      };
      return lead;
    });
  }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLFNBQVNBLFlBQVk7QUFFckIsU0FBU0MsU0FBU0MsaUJBQWlCO0FBQ25DLFNBQVNDLDJCQUEyQjtBQUVwQyxTQUFTQyw2QkFBNkI7QUFDdEMsU0FDRUMscUJBQ0FDLG9CQUNBQywyQkFDQUMscUJBQ0FDLG1CQUNBQyxtQkFDQUMsbUJBQ0FDLGtCQUNBQyx1QkFDSztBQUNQLFNBQVNDLDZCQUE2QjtBQUN0QyxTQUFTQyx3QkFBd0I7QUFDakMsU0FBU0MsMEJBQTBCO0FBQ25DLFNBQVNDLGVBQWU7QUFDeEIsU0FBU0MscUJBQXFCO0FBRXZCLGFBQWVDLDBCQUEwQmYsc0JBQXNCO0FBQUEsRUFBL0Q7QUFBQTtBQUdMLFNBQW1CZ0IsV0FBaUNwQixLQUFLLE9BQU9xQixRQUFRO0FBR3RFLFlBQU1DLFVBQVUsTUFBTUQsSUFBSVYsaUJBQWlCO0FBQzNDLFlBQU07QUFBQSxRQUFFWTtBQUFBQSxRQUFVQztBQUFBQSxRQUFlQztBQUFBQSxNQUFZLElBQUksTUFBTUosSUFDckRaLGlCQUNGO0FBQ0EsWUFBTWlCLE9BQU8sTUFBTUwsSUFBSWIsbUJBQW1CO0FBQzFDLFlBQU07QUFBQSxRQUFFbUI7QUFBQUEsUUFBUUM7QUFBQUEsUUFBVUM7QUFBQUEsUUFBU0M7QUFBQUEsTUFBYSxJQUFJSjtBQUNwRCxZQUFNSyxRQUFRVixJQUFJbkIsU0FBUztBQUMzQixZQUFNOEIsTUFBTVgsSUFBSXBCLE9BQU87QUFFdkIsWUFBTWdDLGtCQUFrQixNQUFNWixJQUFJZCx5QkFBeUI7QUFDM0QsWUFBTTtBQUFBLFFBQ0oyQjtBQUFBQSxRQUNBQztBQUFBQSxRQUNBQztBQUFBQSxRQUNBQztBQUFBQSxRQUNBQztBQUFBQSxRQUNBQztBQUFBQSxNQUNGLElBQUksTUFBTWxCLElBQUlmLGtCQUFrQjtBQUVoQyxZQUFNO0FBQUEsUUFBRWtDO0FBQUFBLFFBQVdDO0FBQUFBLE1BQWMsSUFBSSxNQUFNcEIsSUFBSWhCLG1CQUFtQjtBQUVsRSxZQUFNO0FBQUEsUUFBRXFDO0FBQUFBLE1BQWtCLElBQUksTUFBTXJCLElBQUlILGFBQWE7QUFDckQsWUFBTXlCLGFBQWEsTUFBTXRCLElBQUlOLGdCQUFnQjtBQUU3QyxZQUFNNkIsT0FBa0I7QUFBQTtBQUFBLFFBRXRCLEdBQUd0QjtBQUFBQSxRQUVITDtBQUFBQTtBQUFBQSxRQUdBVSxRQUFRSyxNQUFNTCxTQUFTa0I7QUFBQUEsUUFDdkJqQixVQUFVRyxRQUFRSCxXQUFXaUI7QUFBQUEsUUFDN0JmO0FBQUFBO0FBQUFBLFFBR0FQO0FBQUFBLFFBQ0FDO0FBQUFBLFFBQ0FLLFNBQVM7QUFBQSxVQUNQLEdBQUdBO0FBQUFBLFVBQ0hKO0FBQUFBLFFBQ0Y7QUFBQSxRQUNBaUI7QUFBQUEsUUFFQSxHQUFHVDtBQUFBQSxRQUNIRTtBQUFBQSxRQUNBQztBQUFBQSxRQUNBVSxXQUFXLE1BQU16QixJQUFJLEtBQUt5QixTQUFTO0FBQUE7QUFBQSxRQUVuQ0wsZUFBZ0IsTUFBTXBCLElBQUlULGdCQUFnQixLQUFNNkI7QUFBQUEsUUFDaERNLGFBQWEsTUFBTTFCLElBQUlYLGlCQUFpQjtBQUFBLFFBQ3hDd0I7QUFBQUEsUUFDQUc7QUFBQUEsUUFDQUU7QUFBQUEsUUFDQVMsY0FBYyxNQUFNM0IsSUFBSWxCLG1CQUFtQjtBQUFBLFFBQzNDOEMsZ0JBQWdCLEtBQUtBO0FBQUFBLFFBQ3JCWCxjQUFjO0FBQUEsVUFDWixHQUFHQTtBQUFBQSxVQUNILEdBQUdqQixJQUFJUixlQUFlO0FBQUEsUUFDeEI7QUFBQSxRQUNBcUMsY0FBYzdCLElBQUlMLGtCQUFrQjtBQUFBLFFBQ3BDd0I7QUFBQUEsUUFDQVcsaUJBQWlCLE1BQU05QixJQUFJUCxxQkFBcUI7QUFBQSxRQUNoRCxHQUFHNkI7QUFBQUEsTUFDTDtBQUVBLGFBQU9DO0FBQUFBLElBQ1QsQ0FBQztBQUFBO0FBQ0giLCJuYW1lcyI6WyJhdG9tIiwiZ2FzQXRvbSIsInBvd2VyQXRvbSIsImN1cnJlbnRTYWxlc1Byb2Nlc3MiLCJCYXNlQnVsa09yZGVyQ29udHJhY3QiLCJidWxrT3JkZXJCcm9hZGJhbmQkIiwiYnVsa09yZGVyQ3VzdG9tZXIkIiwiYnVsa09yZGVySW1tZWRpYXRlRWZmZWN0JCIsImJ1bGtPcmRlck9mZmVySW5mbyQiLCJidWxrT3JkZXJPcHRpb25zJCIsImJ1bGtPcmRlclBheW1lbnQkIiwiYnVsa09yZGVyUHJvZHVjdCQiLCJidWxrT3JkZXJTdXBwbHkkIiwiYnVsa09yZGVyVGVybXMkIiwiYnVsa09yZGVyQXBwb2ludG1lbnQkIiwiYnVsa09yZGVyQ291cG9uJCIsImJ1bGtPcmRlclByb3BlcnR5JCIsInVybExlYWQiLCJidWxrT3JkZXJWYXMkIiwiQ29tbW9kaXR5Q29udHJhY3QiLCJiYXNlTGVhZCIsImdldCIsInByb2R1Y3QiLCJiaWxsVHlwZSIsImRvbWljaWxpYXRpb24iLCJob3Vyc0J1bmRsZSIsImluZm8iLCJjcHFHYXMiLCJjcHFQb3dlciIsIm9wdGlvbnMiLCJwcm9kdWN0VGl0bGUiLCJwb3dlciIsImdhcyIsImltbWVkaWF0ZUVmZmVjdCIsInNlZ21lbnQiLCJjb25zZW50UGhvbmVDb250YWN0IiwidXNlclR5cGUiLCJwZXJzb25hbERhdGEiLCJjb25zZW50c0RhdGEiLCJsZWdhbFJlcHJlc2VudGF0aXZlRGF0YSIsImJyb2FkYmFuZCIsImZvcm5pdHVyZURhdGEiLCJjYW1waVZhc0NvbnRyYXR0byIsImNvdXBvbkRhdGEiLCJsZWFkIiwidW5kZWZpbmVkIiwicGxpY29Db2RlIiwicGF5bWVudERhdGEiLCJzYWxlc1Byb2Nlc3MiLCJmbHVzc29XZWJPcmRlciIsImltbW9iaWxlRGF0YSIsImFwcG9pbnRtZW50RGF0YSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJDb21tb2RpdHlDb250cmFjdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdG9tIH0gZnJvbSAnam90YWknO1xyXG5pbXBvcnQgeyBNb25nb0xlYWQgfSBmcm9tICcuLi8uLi9hcGkvbGVhZCc7XHJcbmltcG9ydCB7IGdhc0F0b20sIHBvd2VyQXRvbSB9IGZyb20gJy4uLy4uL3Ryb3VibGVzaG9vdGluZy9hdG9tcyc7XHJcbmltcG9ydCB7IGN1cnJlbnRTYWxlc1Byb2Nlc3MgfSBmcm9tICcuLi9zYWxlcy1wcm9jZXNzLWF0b21zJztcclxuaW1wb3J0IHsgQXN5bmNBdG9tIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBCYXNlQnVsa09yZGVyQ29udHJhY3QgfSBmcm9tICcuL0Jhc2VCdWxrT3JkZXJDb250cmFjdCc7XHJcbmltcG9ydCB7XHJcbiAgYnVsa09yZGVyQnJvYWRiYW5kJCxcclxuICBidWxrT3JkZXJDdXN0b21lciQsXHJcbiAgYnVsa09yZGVySW1tZWRpYXRlRWZmZWN0JCxcclxuICBidWxrT3JkZXJPZmZlckluZm8kLFxyXG4gIGJ1bGtPcmRlck9wdGlvbnMkLFxyXG4gIGJ1bGtPcmRlclBheW1lbnQkLFxyXG4gIGJ1bGtPcmRlclByb2R1Y3QkLFxyXG4gIGJ1bGtPcmRlclN1cHBseSQsXHJcbiAgYnVsa09yZGVyVGVybXMkLFxyXG59IGZyb20gJy4vaGVscGVycyc7XHJcbmltcG9ydCB7IGJ1bGtPcmRlckFwcG9pbnRtZW50JCB9IGZyb20gJy4vaGVscGVycy9hcHBvaW50bWVudCc7XHJcbmltcG9ydCB7IGJ1bGtPcmRlckNvdXBvbiQgfSBmcm9tICcuL2hlbHBlcnMvY291cG9uJztcclxuaW1wb3J0IHsgYnVsa09yZGVyUHJvcGVydHkkIH0gZnJvbSAnLi9oZWxwZXJzL3Byb3BlcnR5JztcclxuaW1wb3J0IHsgdXJsTGVhZCB9IGZyb20gJy4vaGVscGVycy91cmxMZWFkJztcclxuaW1wb3J0IHsgYnVsa09yZGVyVmFzJCB9IGZyb20gJy4vaGVscGVycy92YXMnO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbW1vZGl0eUNvbnRyYWN0IGV4dGVuZHMgQmFzZUJ1bGtPcmRlckNvbnRyYWN0IHtcclxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZmx1c3NvV2ViT3JkZXI6IE1vbmdvTGVhZFsnZmx1c3NvV2ViT3JkZXInXTtcclxuXHJcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IGJhc2VMZWFkOiBBc3luY0F0b208TW9uZ29MZWFkPiA9IGF0b20oYXN5bmMgKGdldCkgPT4ge1xyXG4gICAgLy8gY29uc3QgcGFuZWxzU2VsZWN0ZWREZXRhaWxzID0gYXdhaXQgZ2V0KHBhbmVsc1NlbGVjdGVkRGV0YWlsc0F0b20pO1xyXG5cclxuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBnZXQoYnVsa09yZGVyUHJvZHVjdCQpO1xyXG4gICAgY29uc3QgeyBiaWxsVHlwZSwgZG9taWNpbGlhdGlvbiwgaG91cnNCdW5kbGUgfSA9IGF3YWl0IGdldChcclxuICAgICAgYnVsa09yZGVyT3B0aW9ucyRcclxuICAgICk7XHJcbiAgICBjb25zdCBpbmZvID0gYXdhaXQgZ2V0KGJ1bGtPcmRlck9mZmVySW5mbyQpO1xyXG4gICAgY29uc3QgeyBjcHFHYXMsIGNwcVBvd2VyLCBvcHRpb25zLCBwcm9kdWN0VGl0bGUgfSA9IGluZm87XHJcbiAgICBjb25zdCBwb3dlciA9IGdldChwb3dlckF0b20pO1xyXG4gICAgY29uc3QgZ2FzID0gZ2V0KGdhc0F0b20pO1xyXG5cclxuICAgIGNvbnN0IGltbWVkaWF0ZUVmZmVjdCA9IGF3YWl0IGdldChidWxrT3JkZXJJbW1lZGlhdGVFZmZlY3QkKTtcclxuICAgIGNvbnN0IHtcclxuICAgICAgc2VnbWVudCxcclxuICAgICAgY29uc2VudFBob25lQ29udGFjdCxcclxuICAgICAgdXNlclR5cGUsXHJcbiAgICAgIHBlcnNvbmFsRGF0YSxcclxuICAgICAgY29uc2VudHNEYXRhLFxyXG4gICAgICBsZWdhbFJlcHJlc2VudGF0aXZlRGF0YSxcclxuICAgIH0gPSBhd2FpdCBnZXQoYnVsa09yZGVyQ3VzdG9tZXIkKTtcclxuXHJcbiAgICBjb25zdCB7IGJyb2FkYmFuZCwgZm9ybml0dXJlRGF0YSB9ID0gYXdhaXQgZ2V0KGJ1bGtPcmRlckJyb2FkYmFuZCQpO1xyXG5cclxuICAgIGNvbnN0IHsgY2FtcGlWYXNDb250cmF0dG8gfSA9IGF3YWl0IGdldChidWxrT3JkZXJWYXMkKTtcclxuICAgIGNvbnN0IGNvdXBvbkRhdGEgPSBhd2FpdCBnZXQoYnVsa09yZGVyQ291cG9uJCk7XHJcblxyXG4gICAgY29uc3QgbGVhZDogTW9uZ29MZWFkID0ge1xyXG4gICAgICAvKiBPZmZlciBkYXRhICovXHJcbiAgICAgIC4uLnByb2R1Y3QsXHJcblxyXG4gICAgICB1cmxMZWFkOiB1cmxMZWFkLFxyXG5cclxuICAgICAgLyogT2ZmZXIgaW5mbyAqL1xyXG4gICAgICBjcHFHYXM6IGdhcyA/IGNwcUdhcyA6IHVuZGVmaW5lZCxcclxuICAgICAgY3BxUG93ZXI6IHBvd2VyID8gY3BxUG93ZXIgOiB1bmRlZmluZWQsXHJcbiAgICAgIHByb2R1Y3RUaXRsZTogcHJvZHVjdFRpdGxlLFxyXG5cclxuICAgICAgLyogT2ZmZXIgb3B0aW9ucyAqL1xyXG4gICAgICBiaWxsVHlwZTogYmlsbFR5cGUsXHJcbiAgICAgIGRvbWljaWxpYXRpb246IGRvbWljaWxpYXRpb24sXHJcbiAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgIGhvdXJzQnVuZGxlLFxyXG4gICAgICB9LFxyXG4gICAgICBjYW1waVZhc0NvbnRyYXR0bzogY2FtcGlWYXNDb250cmF0dG8sXHJcblxyXG4gICAgICAuLi5pbW1lZGlhdGVFZmZlY3QsXHJcbiAgICAgIGNvbnNlbnRQaG9uZUNvbnRhY3Q6IGNvbnNlbnRQaG9uZUNvbnRhY3QsXHJcbiAgICAgIHVzZXJUeXBlOiB1c2VyVHlwZSxcclxuICAgICAgcGxpY29Db2RlOiBhd2FpdCBnZXQodGhpcy5wbGljb0NvZGUpLFxyXG4gICAgICAvLyBUT0RPIGJ1bGtPcmRlclN1cHBseSQgc2hvdWxkIHJldHVybiBudWxsIGlmIG5vIGZpZWxkcyBhcmUgc2V0XHJcbiAgICAgIGZvcm5pdHVyZURhdGE6IChhd2FpdCBnZXQoYnVsa09yZGVyU3VwcGx5JCkpIHx8IGZvcm5pdHVyZURhdGEsXHJcbiAgICAgIHBheW1lbnREYXRhOiBhd2FpdCBnZXQoYnVsa09yZGVyUGF5bWVudCQpLFxyXG4gICAgICBzZWdtZW50OiBzZWdtZW50LFxyXG4gICAgICBwZXJzb25hbERhdGE6IHBlcnNvbmFsRGF0YSxcclxuICAgICAgbGVnYWxSZXByZXNlbnRhdGl2ZURhdGE6IGxlZ2FsUmVwcmVzZW50YXRpdmVEYXRhLFxyXG4gICAgICBzYWxlc1Byb2Nlc3M6IGF3YWl0IGdldChjdXJyZW50U2FsZXNQcm9jZXNzKSxcclxuICAgICAgZmx1c3NvV2ViT3JkZXI6IHRoaXMuZmx1c3NvV2ViT3JkZXIsXHJcbiAgICAgIGNvbnNlbnRzRGF0YToge1xyXG4gICAgICAgIC4uLmNvbnNlbnRzRGF0YSxcclxuICAgICAgICAuLi5nZXQoYnVsa09yZGVyVGVybXMkKSxcclxuICAgICAgfSxcclxuICAgICAgaW1tb2JpbGVEYXRhOiBnZXQoYnVsa09yZGVyUHJvcGVydHkkKSxcclxuICAgICAgYnJvYWRiYW5kOiBicm9hZGJhbmQsXHJcbiAgICAgIGFwcG9pbnRtZW50RGF0YTogYXdhaXQgZ2V0KGJ1bGtPcmRlckFwcG9pbnRtZW50JCksXHJcbiAgICAgIC4uLmNvdXBvbkRhdGEsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBsZWFkO1xyXG4gIH0pO1xyXG59XHJcbiJdLCJmaWxlIjoiQzovVXNlcnMvYWludHJvbmEvRGVza3RvcC9BcHAvcmVhY3QvbmFqL2xpYnMvZGF0YS1hY2Nlc3Mvc3JjL2xpYi9hdG9tcy9jb250cmFjdC9Db21tb2RpdHlDb250cmFjdC50cyJ9