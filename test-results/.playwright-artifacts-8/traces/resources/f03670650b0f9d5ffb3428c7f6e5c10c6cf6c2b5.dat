import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/node_modules/.vite/apps/naj/deps/react_jsx-dev-runtime.js?v=0189a8d1"; const Fragment = __vite__cjsImport0_react_jsxDevRuntime["Fragment"]; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.__vite_plugin_react_preamble_installed__) {
    throw new Error("@vitejs/plugin-react can't detect preamble. Something is wrong. See https://github.com/vitejs/vite-plugin-react/pull/11#discussion_r430879201");
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = (type, id) => {
    RefreshRuntime.register(type, "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx " + id);
  };
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
globalThis.jotaiAtomCache = globalThis.jotaiAtomCache || { cache: /* @__PURE__ */ new Map(), get(name, inst) {
  if (this.cache.has(name)) {
    return this.cache.get(name);
  }
  this.cache.set(name, inst);
  return inst;
} };
import { useEngine } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/engine/src/index.ts";
import { useCartState } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/tracking-app/src/index.ts";
import {
  BackToProductsLink,
  CtaLayoutContainer,
  Layout,
  PlnFooter,
  UserAccordionConnected
} from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-molecules/src/index.ts";
import { motion } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/node_modules/.vite/apps/naj/deps/framer-motion.js?v=0189a8d1";
import __vite__cjsImport7_react from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/node_modules/.vite/apps/naj/deps/react.js?v=0189a8d1"; const Suspense = __vite__cjsImport7_react["Suspense"]; const useEffect = __vite__cjsImport7_react["useEffect"];
import { useFormContext } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/node_modules/.vite/apps/naj/deps/react-hook-form.js?v=0189a8d1";
import { Cart, CartMobileFooter, CartSkeleton } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/cart/index.ts";
import classes from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/step-layout.module.less";
import { StepHeader } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepHeader.tsx";
import { applicationMode } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/util/src/index.ts";
export function StepLayout({
  children,
  cta,
  disabled,
  isLastStep,
  isFirstStep,
  variant = "default",
  header = /* @__PURE__ */ jsxDEV(StepHeader, { isLastStep, isFirstStep }, void 0, false, {
    fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
    lineNumber: 35,
    columnNumber: 12
  }, this),
  ...cartProps
}) {
  _s();
  const { cartShown, setCartAvailable } = useCartState();
  const { isPending } = useEngine();
  const { formState } = useFormContext() || {};
  disabled = disabled || formState?.isSubmitting || isPending;
  const cart = cartProps.cartVariant === "none" ? null : /* @__PURE__ */ jsxDEV(Suspense, { fallback: /* @__PURE__ */ jsxDEV(CartSkeleton, {}, void 0, false, {
    fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
    lineNumber: 46,
    columnNumber: 23
  }, this), children: /* @__PURE__ */ jsxDEV(Cart, { ...cartProps }, void 0, false, {
    fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
    lineNumber: 47,
    columnNumber: 9
  }, this) }, void 0, false, {
    fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
    lineNumber: 46,
    columnNumber: 3
  }, this);
  useEffect(() => {
    setCartAvailable(cartProps.cartVariant !== "none");
  }, [cartProps.cartVariant, setCartAvailable]);
  const initial = {
    opacity: 0
    /* x: 100 * lastDirection */
  };
  const animate = {
    opacity: 1
    /*x: 0 */
  };
  if (cartShown) {
    return /* @__PURE__ */ jsxDEV(Layout, { header, children: /* @__PURE__ */ jsxDEV(
      motion.div,
      {
        className: classes.cartMobileContainer,
        initial,
        animate,
        children: [
          /* @__PURE__ */ jsxDEV(UserAccordionConnected, {}, void 0, false, {
            fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
            lineNumber: 79,
            columnNumber: 11
          }, this),
          cart,
          !isLastStep && !applicationMode && /* @__PURE__ */ jsxDEV(CartMobileFooter, { children: /* @__PURE__ */ jsxDEV(BackToProductsLink, { position: "footer" }, void 0, false, {
            fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
            lineNumber: 83,
            columnNumber: 15
          }, this) }, void 0, false, {
            fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
            lineNumber: 82,
            columnNumber: 11
          }, this)
        ]
      },
      void 0,
      true,
      {
        fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
        lineNumber: 67,
        columnNumber: 9
      },
      this
    ) }, void 0, false, {
      fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
      lineNumber: 66,
      columnNumber: 7
    }, this);
  }
  if (variant === "typ") {
    return /* @__PURE__ */ jsxDEV(Layout, { variant: "typ", header, disabled, children: /* @__PURE__ */ jsxDEV(
      motion.div,
      {
        className: classes.centeredContent,
        initial,
        animate,
        children: [
          children,
          cta && /* @__PURE__ */ jsxDEV(CtaLayoutContainer, { variant: "plain", children: cta }, void 0, false, {
            fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
            lineNumber: 101,
            columnNumber: 11
          }, this)
        ]
      },
      void 0,
      true,
      {
        fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
        lineNumber: 94,
        columnNumber: 9
      },
      this
    ) }, void 0, false, {
      fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
      lineNumber: 93,
      columnNumber: 7
    }, this);
  }
  return /* @__PURE__ */ jsxDEV(
    Layout,
    {
      header,
      footer: /* @__PURE__ */ jsxDEV(Fragment, { children: [
        cta && /* @__PURE__ */ jsxDEV(CtaLayoutContainer, { variant: "sticky-bottom", children: cta }, void 0, false, {
          fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
          lineNumber: 114,
          columnNumber: 9
        }, this),
        /* @__PURE__ */ jsxDEV(PlnFooter, {}, void 0, false, {
          fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
          lineNumber: 118,
          columnNumber: 11
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
        lineNumber: 112,
        columnNumber: 7
      }, this),
      disabled,
      children: [
        /* @__PURE__ */ jsxDEV(
          motion.main,
          {
            className: classes.main,
            initial,
            animate,
            exit: {
              opacity: 0
              /*x: -100 * lastDirection*/
            },
            children
          },
          void 0,
          false,
          {
            fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
            lineNumber: 123,
            columnNumber: 7
          },
          this
        ),
        /* @__PURE__ */ jsxDEV("aside", { className: classes.aside, children: cart }, void 0, false, {
          fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
          lineNumber: 132,
          columnNumber: 7
        }, this)
      ]
    },
    void 0,
    true,
    {
      fileName: "C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx",
      lineNumber: 109,
      columnNumber: 5
    },
    this
  );
}
_s(StepLayout, "1zJdKLeb/gbaA0MVl1cAKYif+bg=", false, function() {
  return [useCartState, useEngine, useFormContext];
});
_c = StepLayout;
var _c;
$RefreshReg$(_c, "StepLayout");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Users/aintrona/Desktop/App/react/naj/libs/ui-organisms/src/lib/layout/StepLayout.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate(currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQVNBLEtBVkY7QUFBQTtBQUFBO0FBQUE7QUFBQSxXQVdBO0FBQUEsRUFFSjtBQUVBLFNBQ0U7QUFBQSxJQUFDO0FBQUE7QUFBQSxNQUNDO0FBQUEsTUFDQSxRQUNFLG1DQUNHQTtBQUFBQSxlQUNDLHVCQUFDLHNCQUFtQixTQUFRLGlCQUN6QkEsaUJBREg7QUFBQTtBQUFBO0FBQUE7QUFBQSxlQUVBO0FBQUEsUUFFRix1QkFBQyxlQUFEO0FBQUE7QUFBQTtBQUFBO0FBQUEsZUFBVTtBQUFBLFdBTlo7QUFBQTtBQUFBO0FBQUE7QUFBQSxhQU9BO0FBQUEsTUFFRjtBQUFBLE1BRUE7QUFBQTtBQUFBLFVBQUMsT0FBTztBQUFBLFVBQVA7QUFBQSxZQUNDLFdBQVdMLFFBQVF5QjtBQUFBQSxZQUNuQjtBQUFBLFlBQ0E7QUFBQSxZQUNBLE1BQU07QUFBQSxjQUFFSixTQUFTO0FBQUE7QUFBQSxZQUE4QjtBQUFBLFlBRzlDakI7QUFBQUE7QUFBQUEsVUFQSDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsUUFRQTtBQUFBLFFBQ0EsdUJBQUMsV0FBTSxXQUFXSixRQUFRMEIsT0FBUVIsa0JBQWxDO0FBQUE7QUFBQTtBQUFBO0FBQUEsZUFBdUM7QUFBQTtBQUFBO0FBQUEsSUF2QnpDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQXdCQTtBQUVKO0FBQUNOLEdBM0dlVCxZQUFVO0FBQUEsVUFVZ0JoQixjQUNsQkQsV0FDQVUsY0FBYztBQUFBO0FBQUErQixLQVp0QnhCO0FBQVUsSUFBQXdCO0FBQUFDLGFBQUFELElBQUEiLCJuYW1lcyI6WyJ1c2VFbmdpbmUiLCJ1c2VDYXJ0U3RhdGUiLCJCYWNrVG9Qcm9kdWN0c0xpbmsiLCJDdGFMYXlvdXRDb250YWluZXIiLCJMYXlvdXQiLCJQbG5Gb290ZXIiLCJVc2VyQWNjb3JkaW9uQ29ubmVjdGVkIiwibW90aW9uIiwiU3VzcGVuc2UiLCJ1c2VFZmZlY3QiLCJ1c2VGb3JtQ29udGV4dCIsIkNhcnQiLCJDYXJ0TW9iaWxlRm9vdGVyIiwiQ2FydFNrZWxldG9uIiwiY2xhc3NlcyIsIlN0ZXBIZWFkZXIiLCJhcHBsaWNhdGlvbk1vZGUiLCJTdGVwTGF5b3V0IiwiY2hpbGRyZW4iLCJjdGEiLCJkaXNhYmxlZCIsImlzTGFzdFN0ZXAiLCJpc0ZpcnN0U3RlcCIsInZhcmlhbnQiLCJoZWFkZXIiLCJjYXJ0UHJvcHMiLCJfcyIsImNhcnRTaG93biIsInNldENhcnRBdmFpbGFibGUiLCJpc1BlbmRpbmciLCJmb3JtU3RhdGUiLCJpc1N1Ym1pdHRpbmciLCJjYXJ0IiwiY2FydFZhcmlhbnQiLCJpbml0aWFsIiwib3BhY2l0eSIsImFuaW1hdGUiLCJjYXJ0TW9iaWxlQ29udGFpbmVyIiwiY2VudGVyZWRDb250ZW50IiwibWFpbiIsImFzaWRlIiwiX2MiLCIkUmVmcmVzaFJlZyQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiU3RlcExheW91dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRW5naW5lIH0gZnJvbSAnQG5hai13by9lbmdpbmUnO1xyXG5pbXBvcnQgeyB1c2VDYXJ0U3RhdGUgfSBmcm9tICdAbmFqLXdvL3RyYWNraW5nLWFwcCc7XHJcbmltcG9ydCB7XHJcbiAgQmFja1RvUHJvZHVjdHNMaW5rLFxyXG4gIEN0YUxheW91dENvbnRhaW5lcixcclxuICBMYXlvdXQsXHJcbiAgUGxuRm9vdGVyLFxyXG4gIFVzZXJBY2NvcmRpb25Db25uZWN0ZWQsXHJcbn0gZnJvbSAnQG5hai13by91aS1tb2xlY3VsZXMnO1xyXG5pbXBvcnQgeyBtb3Rpb24gfSBmcm9tICdmcmFtZXItbW90aW9uJztcclxuaW1wb3J0IHsgdHlwZSBSZWFjdE5vZGUsIFN1c3BlbnNlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZUZvcm1Db250ZXh0IH0gZnJvbSAncmVhY3QtaG9vay1mb3JtJztcclxuaW1wb3J0IHsgQ2FydCwgQ2FydE1vYmlsZUZvb3RlciwgQ2FydFByb3BzLCBDYXJ0U2tlbGV0b24gfSBmcm9tICcuLi9jYXJ0JztcclxuaW1wb3J0IGNsYXNzZXMgZnJvbSAnLi9zdGVwLWxheW91dC5tb2R1bGUubGVzcyc7XHJcbmltcG9ydCB7IFN0ZXBIZWFkZXIgfSBmcm9tICcuL1N0ZXBIZWFkZXInO1xyXG5pbXBvcnQgeyBhcHBsaWNhdGlvbk1vZGUgfSBmcm9tICdAbmFqLXdvL3V0aWwnO1xyXG5cclxuZXhwb3J0IHR5cGUgU3RlcExheW91dFByb3BzID0ge1xyXG4gIGNoaWxkcmVuOiBSZWFjdE5vZGU7XHJcbiAgY3RhOiBSZWFjdE5vZGU7XHJcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xyXG4gIHZhcmlhbnQ/OiAnZGVmYXVsdCcgfCAndHlwJztcclxuICBoZWFkZXI/OiBSZWFjdE5vZGU7XHJcbiAgaXNMYXN0U3RlcD86IGJvb2xlYW47XHJcbiAgaXNGaXJzdFN0ZXA/OiBib29sZWFuO1xyXG59ICYgQ2FydFByb3BzO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFN0ZXBMYXlvdXQoe1xyXG4gIGNoaWxkcmVuLFxyXG4gIGN0YSxcclxuICBkaXNhYmxlZCxcclxuICBpc0xhc3RTdGVwLFxyXG4gIGlzRmlyc3RTdGVwLFxyXG4gIHZhcmlhbnQgPSAnZGVmYXVsdCcsXHJcbiAgaGVhZGVyID0gPFN0ZXBIZWFkZXIgaXNMYXN0U3RlcD17aXNMYXN0U3RlcH0gaXNGaXJzdFN0ZXA9e2lzRmlyc3RTdGVwfSAvPixcclxuICAuLi5jYXJ0UHJvcHNcclxufTogU3RlcExheW91dFByb3BzKSB7XHJcbiAgY29uc3QgeyBjYXJ0U2hvd24sIHNldENhcnRBdmFpbGFibGUgfSA9IHVzZUNhcnRTdGF0ZSgpO1xyXG4gIGNvbnN0IHsgaXNQZW5kaW5nIH0gPSB1c2VFbmdpbmUoKTtcclxuICBjb25zdCB7IGZvcm1TdGF0ZSB9ID0gdXNlRm9ybUNvbnRleHQoKSB8fCB7fTtcclxuXHJcbiAgZGlzYWJsZWQgPSBkaXNhYmxlZCB8fCBmb3JtU3RhdGU/LmlzU3VibWl0dGluZyB8fCBpc1BlbmRpbmc7XHJcblxyXG4gIGNvbnN0IGNhcnQgPVxyXG4gICAgY2FydFByb3BzLmNhcnRWYXJpYW50ID09PSAnbm9uZScgPyBudWxsIDogKFxyXG4gICAgICA8U3VzcGVuc2UgZmFsbGJhY2s9ezxDYXJ0U2tlbGV0b24gLz59PlxyXG4gICAgICAgIDxDYXJ0IHsuLi5jYXJ0UHJvcHN9IC8+XHJcbiAgICAgIDwvU3VzcGVuc2U+XHJcbiAgICApO1xyXG5cclxuICAvKiBTeW5jaHJvbml6ZSBjYXJ0IGF2YWlsYWJsZSBzdGF0dXMgdG8gc2hvdy9oaWRlIHRoZSBidXR0b24gKi9cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgc2V0Q2FydEF2YWlsYWJsZShjYXJ0UHJvcHMuY2FydFZhcmlhbnQgIT09ICdub25lJyk7XHJcbiAgfSwgW2NhcnRQcm9wcy5jYXJ0VmFyaWFudCwgc2V0Q2FydEF2YWlsYWJsZV0pO1xyXG5cclxuICAvKiB4IGFuaW1hdGlvbnMgc2VlbXMgaW5jb21wYXRpYmxlIHdpdGggc3RpY2t5IGZvb3RlciAqL1xyXG4gIGNvbnN0IGluaXRpYWwgPSB7IG9wYWNpdHk6IDAgLyogeDogMTAwICogbGFzdERpcmVjdGlvbiAqLyB9O1xyXG4gIGNvbnN0IGFuaW1hdGUgPSB7IG9wYWNpdHk6IDEgLyp4OiAwICovIH07XHJcblxyXG4gIGlmIChjYXJ0U2hvd24pIHtcclxuICAgIC8qIHggYW5pbWF0aW9ucyBzZWVtcyBpbmNvbXBhdGlibGUgd2l0aCBzdGlja3kgZm9vdGVyICovXHJcbiAgICAvLyBjb25zdCBpbml0aWFsID0geyBvcGFjaXR5OiAwLCB5OiAtMTAwLCBzY2FsZTogMCB9O1xyXG4gICAgLy8gY29uc3QgYW5pbWF0ZSA9IHsgb3BhY2l0eTogMSwgeTogMCwgc2NhbGU6IDEgfTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8TGF5b3V0IGhlYWRlcj17aGVhZGVyfT5cclxuICAgICAgICA8bW90aW9uLmRpdlxyXG4gICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc2VzLmNhcnRNb2JpbGVDb250YWluZXJ9XHJcbiAgICAgICAgICBpbml0aWFsPXtpbml0aWFsfVxyXG4gICAgICAgICAgYW5pbWF0ZT17YW5pbWF0ZX1cclxuICAgICAgICAgIC8qdHJhbnNpdGlvbj17e1xyXG4gICAgICAgICAgICAvLyBkdXJhdGlvbjogMC4yLCAvLyBBZGp1c3QgdGhlIGR1cmF0aW9uIGFzIG5lZWRlZFxyXG4gICAgICAgICAgICBlYXNlOiAnZWFzZUluT3V0JyxcclxuICAgICAgICAgIH19Ki9cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7LyogPEJ1dHRvbkxpbmsgY2hldnJvbj1cInByZXZcIiBvbkNsaWNrPXtoaWRlQ2FydH0+XHJcbiAgICAgICAgICBUb3JuYSBhbGxhIGNvbmZpZ3VyYXppb25lXHJcbiAgICAgICAgPC9CdXR0b25MaW5rPiAqL31cclxuICAgICAgICAgIDxVc2VyQWNjb3JkaW9uQ29ubmVjdGVkIC8+XHJcbiAgICAgICAgICB7Y2FydH1cclxuICAgICAgICAgIHshaXNMYXN0U3RlcCAmJiAhYXBwbGljYXRpb25Nb2RlICYmIChcclxuICAgICAgICAgICAgPENhcnRNb2JpbGVGb290ZXI+XHJcbiAgICAgICAgICAgICAgPEJhY2tUb1Byb2R1Y3RzTGluayBwb3NpdGlvbj1cImZvb3RlclwiIC8+XHJcbiAgICAgICAgICAgIDwvQ2FydE1vYmlsZUZvb3Rlcj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9tb3Rpb24uZGl2PlxyXG4gICAgICA8L0xheW91dD5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBpZiAodmFyaWFudCA9PT0gJ3R5cCcpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxMYXlvdXQgdmFyaWFudD1cInR5cFwiIGhlYWRlcj17aGVhZGVyfSBkaXNhYmxlZD17ZGlzYWJsZWR9PlxyXG4gICAgICAgIDxtb3Rpb24uZGl2XHJcbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMuY2VudGVyZWRDb250ZW50fVxyXG4gICAgICAgICAgaW5pdGlhbD17aW5pdGlhbH1cclxuICAgICAgICAgIGFuaW1hdGU9e2FuaW1hdGV9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge2NoaWxkcmVufVxyXG4gICAgICAgICAge2N0YSAmJiAoXHJcbiAgICAgICAgICAgIDxDdGFMYXlvdXRDb250YWluZXIgdmFyaWFudD1cInBsYWluXCI+e2N0YX08L0N0YUxheW91dENvbnRhaW5lcj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9tb3Rpb24uZGl2PlxyXG4gICAgICA8L0xheW91dD5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPExheW91dFxyXG4gICAgICBoZWFkZXI9e2hlYWRlcn1cclxuICAgICAgZm9vdGVyPXtcclxuICAgICAgICA8PlxyXG4gICAgICAgICAge2N0YSAmJiAoXHJcbiAgICAgICAgICAgIDxDdGFMYXlvdXRDb250YWluZXIgdmFyaWFudD1cInN0aWNreS1ib3R0b21cIj5cclxuICAgICAgICAgICAgICB7Y3RhfVxyXG4gICAgICAgICAgICA8L0N0YUxheW91dENvbnRhaW5lcj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgICA8UGxuRm9vdGVyIC8+XHJcbiAgICAgICAgPC8+XHJcbiAgICAgIH1cclxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxyXG4gICAgPlxyXG4gICAgICA8bW90aW9uLm1haW5cclxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMubWFpbn1cclxuICAgICAgICBpbml0aWFsPXtpbml0aWFsfVxyXG4gICAgICAgIGFuaW1hdGU9e2FuaW1hdGV9XHJcbiAgICAgICAgZXhpdD17eyBvcGFjaXR5OiAwIC8qeDogLTEwMCAqIGxhc3REaXJlY3Rpb24qLyB9fVxyXG4gICAgICAgIC8vIHRyYW5zaXRpb249e3sgdHlwZTogJ3NwcmluZycsIGJvdW5jZTogMCwgdmVsb2NpdHk6IDAuMiwgZHVyYXRpb246IDAuNCB9fVxyXG4gICAgICA+XHJcbiAgICAgICAge2NoaWxkcmVufVxyXG4gICAgICA8L21vdGlvbi5tYWluPlxyXG4gICAgICA8YXNpZGUgY2xhc3NOYW1lPXtjbGFzc2VzLmFzaWRlfT57Y2FydH08L2FzaWRlPlxyXG4gICAgPC9MYXlvdXQ+XHJcbiAgKTtcclxufVxyXG4iXSwiZmlsZSI6IkM6L1VzZXJzL2FpbnRyb25hL0Rlc2t0b3AvQXBwL3JlYWN0L25hai9saWJzL3VpLW9yZ2FuaXNtcy9zcmMvbGliL2xheW91dC9TdGVwTGF5b3V0LnRzeCJ9