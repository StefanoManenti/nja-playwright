globalThis.jotaiAtomCache = globalThis.jotaiAtomCache || {
  cache: /* @__PURE__ */ new Map(),
  get(name, inst) {
    if (this.cache.has(name)) {
      return this.cache.get(name);
    }
    this.cache.set(name, inst);
    return inst;
  }
};
import { NotImplementedError, PreconditionFailedError } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/util/src/index.ts";
import { atom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/node_modules/.vite/apps/naj/deps/jotai.js?v=0189a8d1";
import { accountSelectedAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/account-selected-atoms.ts";
import { isExistingPowerSupply, NewPowerSupply } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/supply.ts";
import { operativeModeAtom } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/troubleshooting/atoms.ts";
import { atomWithCheckPodDuereti } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/api/weborder/verificaPodDuereti.ts";
import { atomWithCheckAsset } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/api/weborder/checkAsset.ts";
import { getKwLabel } from "/@fs/C:/Users/aintrona/Desktop/App/react/naj/libs/data-access/src/lib/atoms/activations/index.ts";
export const powerSupplySelectedAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\atoms\\supply-selected-power.ts/powerSupplySelectedAtom", atom(async (get) => {
  const account = await get(accountSelectedAtom);
  if (!account) return;
  return get(account.powerSupply);
}));
powerSupplySelectedAtom.debugLabel = "powerSupplySelectedAtom";
export const podPowerAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\atoms\\supply-selected-power.ts/podPowerAtom", atom(async (get) => {
  const supply = await get(powerSupplySelectedAtom);
  if (supply?.pod == null) return;
  return get(supply.pod);
}, async (get, set, pod) => {
  const supply = await get(powerSupplySelectedAtom);
  const operativeMode = get(operativeModeAtom);
  if (supply?.pod == null || !operativeMode) {
    throw new NotImplementedError();
  }
  set(supply.pod, pod);
  await get(atomWithCheckPodDuereti({
    pod,
    supply
  }));
  if (!(supply instanceof NewPowerSupply)) {
    throw new NotImplementedError();
  }
  const checkPod = await set(supply.checkPodForOperativeModeAtoms(operativeMode));
  if (checkPod == null) {
    throw new PreconditionFailedError("checkPod is null, this may happen if pod is empty");
  }
  await get(atomWithCheckAsset({
    pod
  }));
  return checkPod;
}));
podPowerAtom.debugLabel = "podPowerAtom";
export const currentYearPowerConsumptionAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\atoms\\supply-selected-power.ts/currentYearPowerConsumptionAtom", atom(async (get) => {
  const supply = await get(powerSupplySelectedAtom);
  const currentYearAtom = supply?.consumption?.currentYear;
  if (!currentYearAtom) return;
  return get(currentYearAtom);
}));
currentYearPowerConsumptionAtom.debugLabel = "currentYearPowerConsumptionAtom";
export const estimatedYearPowerConsumptionAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\atoms\\supply-selected-power.ts/estimatedYearPowerConsumptionAtom", atom(async (get) => {
  const supply = await get(powerSupplySelectedAtom);
  const currentYearAtom = supply?.consumption?.estimatedYear;
  if (!currentYearAtom) return;
  return get(currentYearAtom);
}, async (get, set, consumption) => {
  const supply = await get(powerSupplySelectedAtom);
  if (supply?.consumption?.estimatedYear == null) {
    throw new NotImplementedError();
  }
  set(supply.consumption.estimatedYear, consumption);
}));
estimatedYearPowerConsumptionAtom.debugLabel = "estimatedYearPowerConsumptionAtom";
export const estimatedYearPowerConsumptionWithUnitAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\atoms\\supply-selected-power.ts/estimatedYearPowerConsumptionWithUnitAtom", atom(async (get) => await get(estimatedYearPowerConsumptionAtom) + " kWh"));
estimatedYearPowerConsumptionWithUnitAtom.debugLabel = "estimatedYearPowerConsumptionWithUnitAtom";
export const powerProductName$ = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\atoms\\supply-selected-power.ts/powerProductName$", atom(async (get) => {
  const supply = await get(powerSupplySelectedAtom);
  if (!supply || !isExistingPowerSupply(supply)) {
    return;
  }
  return supply.productName;
}));
powerProductName$.debugLabel = "powerProductName$";
export const powerKwAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\atoms\\supply-selected-power.ts/powerKwAtom", atom(async (get) => {
  const supply = await get(powerSupplySelectedAtom);
  if (!supply || isExistingPowerSupply(supply)) {
    return;
  }
  return supply.kwAtom ? (await get(supply.kwAtom))?.[0] : void 0;
}, async (get, set, kw) => {
  const supply = await get(powerSupplySelectedAtom);
  if (!supply || isExistingPowerSupply(supply)) {
    return;
  }
  return supply.kwAtom ? set(supply.kwAtom, kw) : void 0;
}));
powerKwAtom.debugLabel = "powerKwAtom";
export const powerKwAsStringAtom = globalThis.jotaiAtomCache.get("C:\\Users\\aintrona\\Desktop\\App\\react\\naj\\libs\\data-access\\src\\lib\\atoms\\supply-selected-power.ts/powerKwAsStringAtom", atom(async (get) => {
  const value = await get(powerKwAtom);
  if (value == null) return value;
  return getKwLabel(value);
}));
powerKwAsStringAtom.debugLabel = "powerKwAsStringAtom";

//# sourceMappingURL=data:application/json;base64,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Y291bnRTZWxlY3RlZEF0b20iLCJpc0V4aXN0aW5nUG93ZXJTdXBwbHkiLCJOZXdQb3dlclN1cHBseSIsIm9wZXJhdGl2ZU1vZGVBdG9tIiwiYXRvbVdpdGhDaGVja1BvZER1ZXJldGkiLCJhdG9tV2l0aENoZWNrQXNzZXQiLCJnZXRLd0xhYmVsIiwicG93ZXJTdXBwbHlTZWxlY3RlZEF0b20iLCJnbG9iYWxUaGlzIiwiam90YWlBdG9tQ2FjaGUiLCJnZXQiLCJhY2NvdW50IiwicG93ZXJTdXBwbHkiLCJkZWJ1Z0xhYmVsIiwicG9kUG93ZXJBdG9tIiwic3VwcGx5IiwicG9kIiwic2V0Iiwib3BlcmF0aXZlTW9kZSIsImNoZWNrUG9kIiwiY2hlY2tQb2RGb3JPcGVyYXRpdmVNb2RlQXRvbXMiLCJjdXJyZW50WWVhclBvd2VyQ29uc3VtcHRpb25BdG9tIiwiY3VycmVudFllYXJBdG9tIiwiY29uc3VtcHRpb24iLCJjdXJyZW50WWVhciIsImVzdGltYXRlZFllYXJQb3dlckNvbnN1bXB0aW9uQXRvbSIsImVzdGltYXRlZFllYXIiLCJlc3RpbWF0ZWRZZWFyUG93ZXJDb25zdW1wdGlvbldpdGhVbml0QXRvbSIsInBvd2VyUHJvZHVjdE5hbWUkIiwicHJvZHVjdE5hbWUiLCJwb3dlckt3QXRvbSIsImt3QXRvbSIsInVuZGVmaW5lZCIsImt3IiwicG93ZXJLd0FzU3RyaW5nQXRvbSIsInZhbHVlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbInN1cHBseS1zZWxlY3RlZC1wb3dlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOb3RJbXBsZW1lbnRlZEVycm9yLCBQcmVjb25kaXRpb25GYWlsZWRFcnJvciB9IGZyb20gJ0BuYWotd28vdXRpbCc7XHJcbmltcG9ydCB7IEF0b20sIGF0b20gfSBmcm9tICdqb3RhaSc7XHJcbmltcG9ydCB7IGFjY291bnRTZWxlY3RlZEF0b20gfSBmcm9tICcuL2FjY291bnQtc2VsZWN0ZWQtYXRvbXMnO1xyXG5pbXBvcnQgeyBpc0V4aXN0aW5nUG93ZXJTdXBwbHksIE5ld1Bvd2VyU3VwcGx5IH0gZnJvbSAnLi9zdXBwbHknO1xyXG5pbXBvcnQgeyBQb3dlclN1cHBseSB9IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgeyBvcGVyYXRpdmVNb2RlQXRvbSB9IGZyb20gJy4uL3Ryb3VibGVzaG9vdGluZy9hdG9tcyc7XHJcbmltcG9ydCB7IGF0b21XaXRoQ2hlY2tQb2REdWVyZXRpIH0gZnJvbSAnLi4vYXBpL3dlYm9yZGVyL3ZlcmlmaWNhUG9kRHVlcmV0aSc7XHJcbmltcG9ydCB7IGF0b21XaXRoQ2hlY2tBc3NldCB9IGZyb20gJy4uL2FwaS93ZWJvcmRlci9jaGVja0Fzc2V0JztcclxuaW1wb3J0IHsgZ2V0S3dMYWJlbCB9IGZyb20gJy4vYWN0aXZhdGlvbnMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvd2VyU3VwcGx5U2VsZWN0ZWRBdG9tOiBBdG9tPFByb21pc2U8UG93ZXJTdXBwbHkgfCB1bmRlZmluZWQ+PiA9XHJcbiAgYXRvbShhc3luYyAoZ2V0KSA9PiB7XHJcbiAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZ2V0KGFjY291bnRTZWxlY3RlZEF0b20pO1xyXG4gICAgaWYgKCFhY2NvdW50KSByZXR1cm47XHJcblxyXG4gICAgcmV0dXJuIGdldChhY2NvdW50LnBvd2VyU3VwcGx5KTtcclxuICB9KTtcclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSBQT0QgZm9yIHRoZSBjdXJyZW50IHN1cHBseS5cclxuICpcclxuICogV2hlbiBzZXQgaXQgZG9lcyB0aGVzZSBjaGVja3M6XHJcbiAqXHJcbiAqIDEuIENoZWNrIGlmIHRoZSBQT0QgaXMgXCJkdWVyZXRpXCJcclxuICogMi4gQ2FsbCBDaGVja1BvZFxyXG4gKiAzLiBDYWxsIENoZWNrQXNzZXRcclxuICovXHJcbmV4cG9ydCBjb25zdCBwb2RQb3dlckF0b20gPSBhdG9tKFxyXG4gIGFzeW5jIChnZXQpID0+IHtcclxuICAgIGNvbnN0IHN1cHBseSA9IGF3YWl0IGdldChwb3dlclN1cHBseVNlbGVjdGVkQXRvbSk7XHJcbiAgICBpZiAoc3VwcGx5Py5wb2QgPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgcmV0dXJuIGdldChzdXBwbHkucG9kKTtcclxuICB9LFxyXG4gIGFzeW5jIChnZXQsIHNldCwgcG9kOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IHN1cHBseSA9IGF3YWl0IGdldChwb3dlclN1cHBseVNlbGVjdGVkQXRvbSk7XHJcbiAgICBjb25zdCBvcGVyYXRpdmVNb2RlID0gZ2V0KG9wZXJhdGl2ZU1vZGVBdG9tKTtcclxuXHJcbiAgICBpZiAoc3VwcGx5Py5wb2QgPT0gbnVsbCB8fCAhb3BlcmF0aXZlTW9kZSkge1xyXG4gICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldChzdXBwbHkucG9kLCBwb2QpO1xyXG5cclxuICAgIGF3YWl0IGdldChhdG9tV2l0aENoZWNrUG9kRHVlcmV0aSh7IHBvZCwgc3VwcGx5IH0pKTtcclxuXHJcbiAgICBpZiAoIShzdXBwbHkgaW5zdGFuY2VvZiBOZXdQb3dlclN1cHBseSkpIHtcclxuICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNoZWNrUG9kID0gYXdhaXQgc2V0KFxyXG4gICAgICBzdXBwbHkuY2hlY2tQb2RGb3JPcGVyYXRpdmVNb2RlQXRvbXMob3BlcmF0aXZlTW9kZSlcclxuICAgICk7XHJcbiAgICBpZiAoY2hlY2tQb2QgPT0gbnVsbCkge1xyXG4gICAgICB0aHJvdyBuZXcgUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IoXHJcbiAgICAgICAgJ2NoZWNrUG9kIGlzIG51bGwsIHRoaXMgbWF5IGhhcHBlbiBpZiBwb2QgaXMgZW1wdHknXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgZ2V0KGF0b21XaXRoQ2hlY2tBc3NldCh7IHBvZCB9KSk7XHJcblxyXG4gICAgcmV0dXJuIGNoZWNrUG9kO1xyXG4gIH1cclxuKTtcclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSB5ZWFyIHJlYWwgY29uc3VtcHRpb24gZm9yIHRoZSBjdXJyZW50IHBvd2VyIHN1cHBseVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGN1cnJlbnRZZWFyUG93ZXJDb25zdW1wdGlvbkF0b20gPSBhdG9tKGFzeW5jIChnZXQpID0+IHtcclxuICBjb25zdCBzdXBwbHkgPSBhd2FpdCBnZXQocG93ZXJTdXBwbHlTZWxlY3RlZEF0b20pO1xyXG4gIGNvbnN0IGN1cnJlbnRZZWFyQXRvbSA9IHN1cHBseT8uY29uc3VtcHRpb24/LmN1cnJlbnRZZWFyO1xyXG4gIGlmICghY3VycmVudFllYXJBdG9tKSByZXR1cm47XHJcbiAgcmV0dXJuIGdldChjdXJyZW50WWVhckF0b20pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSB5ZWFyIGVzdGltYXRlZCBjb25zdW1wdGlvbiBmb3IgdGhlIGN1cnJlbnQgcG93ZXIgc3VwcGx5XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZXN0aW1hdGVkWWVhclBvd2VyQ29uc3VtcHRpb25BdG9tID0gYXRvbShcclxuICBhc3luYyAoZ2V0KSA9PiB7XHJcbiAgICBjb25zdCBzdXBwbHkgPSBhd2FpdCBnZXQocG93ZXJTdXBwbHlTZWxlY3RlZEF0b20pO1xyXG4gICAgY29uc3QgY3VycmVudFllYXJBdG9tID0gc3VwcGx5Py5jb25zdW1wdGlvbj8uZXN0aW1hdGVkWWVhcjtcclxuICAgIGlmICghY3VycmVudFllYXJBdG9tKSByZXR1cm47XHJcbiAgICByZXR1cm4gZ2V0KGN1cnJlbnRZZWFyQXRvbSk7XHJcbiAgfSxcclxuICBhc3luYyAoZ2V0LCBzZXQsIGNvbnN1bXB0aW9uOiBudW1iZXIpID0+IHtcclxuICAgIGNvbnN0IHN1cHBseSA9IGF3YWl0IGdldChwb3dlclN1cHBseVNlbGVjdGVkQXRvbSk7XHJcbiAgICBpZiAoc3VwcGx5Py5jb25zdW1wdGlvbj8uZXN0aW1hdGVkWWVhciA9PSBudWxsKSB7XHJcbiAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0KHN1cHBseS5jb25zdW1wdGlvbi5lc3RpbWF0ZWRZZWFyLCBjb25zdW1wdGlvbik7XHJcbiAgfVxyXG4pO1xyXG5leHBvcnQgY29uc3QgZXN0aW1hdGVkWWVhclBvd2VyQ29uc3VtcHRpb25XaXRoVW5pdEF0b20gPSBhdG9tKFxyXG4gIGFzeW5jIChnZXQpID0+IChhd2FpdCBnZXQoZXN0aW1hdGVkWWVhclBvd2VyQ29uc3VtcHRpb25BdG9tKSkgKyAnIGtXaCdcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3dlclByb2R1Y3ROYW1lJCA9IGF0b20oYXN5bmMgKGdldCkgPT4ge1xyXG4gIGNvbnN0IHN1cHBseSA9IGF3YWl0IGdldChwb3dlclN1cHBseVNlbGVjdGVkQXRvbSk7XHJcbiAgaWYgKCFzdXBwbHkgfHwgIWlzRXhpc3RpbmdQb3dlclN1cHBseShzdXBwbHkpKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIHJldHVybiBzdXBwbHkucHJvZHVjdE5hbWU7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvd2VyS3dBdG9tID0gYXRvbShcclxuICBhc3luYyAoZ2V0KSA9PiB7XHJcbiAgICBjb25zdCBzdXBwbHkgPSBhd2FpdCBnZXQocG93ZXJTdXBwbHlTZWxlY3RlZEF0b20pO1xyXG4gICAgaWYgKCFzdXBwbHkgfHwgaXNFeGlzdGluZ1Bvd2VyU3VwcGx5KHN1cHBseSkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1cHBseS5rd0F0b20gPyAoYXdhaXQgZ2V0KHN1cHBseS5rd0F0b20pKT8uWzBdIDogdW5kZWZpbmVkO1xyXG4gIH0sXHJcbiAgYXN5bmMgKGdldCwgc2V0LCBrdzogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBzdXBwbHkgPSBhd2FpdCBnZXQocG93ZXJTdXBwbHlTZWxlY3RlZEF0b20pO1xyXG4gICAgaWYgKCFzdXBwbHkgfHwgaXNFeGlzdGluZ1Bvd2VyU3VwcGx5KHN1cHBseSkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1cHBseS5rd0F0b20gPyBzZXQoc3VwcGx5Lmt3QXRvbSwga3cpIDogdW5kZWZpbmVkO1xyXG4gIH1cclxuKTtcclxuXHJcbi8vIFRPRE8gVVNBTUkgbmVsIHJpZXBpbG9nb1xyXG5leHBvcnQgY29uc3QgcG93ZXJLd0FzU3RyaW5nQXRvbSA9IGF0b20oYXN5bmMgKGdldCkgPT4ge1xyXG4gIGNvbnN0IHZhbHVlID0gYXdhaXQgZ2V0KHBvd2VyS3dBdG9tKTtcclxuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHZhbHVlO1xyXG4gIHJldHVybiBnZXRLd0xhYmVsKHZhbHVlKTtcclxufSk7XHJcbiJdLCJmaWxlIjoiQzovVXNlcnMvYWludHJvbmEvRGVza3RvcC9BcHAvcmVhY3QvbmFqL2xpYnMvZGF0YS1hY2Nlc3Mvc3JjL2xpYi9hdG9tcy9zdXBwbHktc2VsZWN0ZWQtcG93ZXIudHMifQ==